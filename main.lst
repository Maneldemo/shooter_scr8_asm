Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2015.04.07 - 00:30:05]

main.asm
Errors: 0

       1   00:0000                      ;----------------------------------------------------------------------------
       2   00:0000                      ;----------------------------------------------------------------------------
       3   00:0000                      
       4   00:0000                              output "urd_scr8.rom"
       5   00:0000                      
       6   00:0000                      		incdir ene_code
       7   00:0000                      
       8   00:0000                      		defpage	 0,0x4000, 0x2000		; page 0 main code + far call routines
       9   00:0000                      		defpage	 1,0x6000, 0x2000		; page 1 main code + far call routines
      10   00:0000                      		defpage	 2,0x8000, 0x2000		; swapped data 
      11   00:0000                      		defpage	 3,0xA000, 0x2000		; swapped data 
      12   00:0000                      		
      13   00:0000                      		defpage	 4,0xA000, 0x2000		; swapped data 
      14   00:0000                      		defpage	 5..11					; 64KB of swapped data 
      15   00:0000                      
      16   00:0000                      		defpage	12,0x4000, 0x2000		; swapped code
      17   00:0000                      		defpage	13,0x6000, 0x2000		; swapped code 
      18   00:0000                      		defpage	14,0x8000, 0x2000		; swapped data 
      19   00:0000                      		defpage	15,0xA000, 0x2000		; swapped data 
      20   00:0000                      
      21   00:0000                      		;	konami scc
      22   00:0000                      		
      23   00:0000  (00:5000)           _kBank1:	equ 05000h ;- 57FFh (5000h used)
      24   00:0000  (00:7000)           _kBank2: 	equ 07000h ;- 77FFh (7000h used)
      25   00:0000  (00:9000)           _kBank3: 	equ 09000h ;- 97FFh (9000h used)
      26   00:0000  (00:B000)           _kBank4: 	equ 0B000h ;- B7FFh (B000h used)
      27   00:0000                      	
      28   00:0000  (00:0100)           mapWidth	equ	256
      29   00:0000  (00:000B)           mapHeight	equ	11
      30   00:0000                      		
      31   00:0000                      	macro setpage_a
      32   00:0000                    < 		ld	(_kBank3),a
      33   00:0000                    < 		inc	a
      34   00:0000                    < 		ld	(_kBank4),a
      35   00:0000                    < 	endmacro
      36   00:0000                        
      37   00:0000  (00)                		page 0
      38   00:4000                      		
      39   00:4000                              org 4000h
      40   00:4000                              dw  4241h,START,0,0,0,0,0,0
      40   00:4000  41 42 A9 44 00 00 00 00 00 00 00 00 00 00 00 00 
      41   00:4010                      
      42   00:4010                      	;-------------------------------------		
      43   00:4010                      
      44   00:4010                      		include "header.asm"
       1.  00:4010                      
       2.  00:4010  (00:00A0)           YSIZE	equ	160
      45   00:4010                      		include "rominit64.asm"
       1.  00:4010                      
       2.  00:4010                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       3.  00:4010                      ; set pages and subslot
       4.  00:4010                      ;
       5.  00:4010                      
       6.  00:4010                      
       7.  00:4010  (00:0024)           ENASLT:			equ		024h
       8.  00:4010  (00:0138)           RSLREG:			equ		0138h
       9.  00:4010  (00:FCC1)           EXPTBL:			equ		0FCC1h	; Bios Slot / Expansion Slot
      10.  00:4010                      
      11.  00:4010                      
      12.  00:4010                      ; ----------------------------
      13.  00:4010                      ; pre-set main slot for page 3
      14.  00:4010                      ; and set sub-slot for page 3
      15.  00:4010                      ; ----------------------------
      16.  00:4010                      	macro	mainslot_setup n
      17.  00:4010                    < 	and		3
      18.  00:4010                    < [2]	rrca
      19.  00:4010                    < 	and		0xC0
      20.  00:4010                    < 	ld		c,a
      21.  00:4010                    < 	ld		a,d
      22.  00:4010                    < 	and		0x3F
      23.  00:4010                    < 	or		c
      24.  00:4010                    < 	ld		c,a					; Primary slot value with main slot in page 3
      25.  00:4010                    < 
      26.  00:4010                    < 	ld		a,b
      27.  00:4010                    < 	and		0x0C
      28.  00:4010                    < [2]	rrca
      29.  00:4010                    < 	and		3
      30.  00:4010                    < 	ld		b,a					; B = Expanded slot in page 3
      31.  00:4010                    < 	ld		a,c
      32.  00:4010                    < 	out		(0A8h),a			; Slot : Main Slot, xx, xx, Main slot
      33.  00:4010                    < 	ld		a,(0FFFFh)
      34.  00:4010                    < 	cpl
      35.  00:4010                    < 	if (n<=4)
      36.  00:4010                    < [n]	RLCA
      37.  00:4010                    < 	else
      38.  00:4010                    < [8-n] RRCA	
      39.  00:4010                    < 	endif
      40.  00:4010                    < 	and		0xFC
      41.  00:4010                    < 	or		b
      42.  00:4010                    < 	if (n<=4)
      43.  00:4010                    < [n]	RRCA
      44.  00:4010                    < 	else
      45.  00:4010                    < [8-n] RLCA
      46.  00:4010                    < 	endif
      47.  00:4010                    < 	ld		(0FFFFh),a		; Expanded slot selected
      48.  00:4010                    < 	ld		b,a				; save for later	
      49.  00:4010                    < 	endmacro
      50.  00:4010                      		
      51.  00:4010                      
      52.  00:4010                      ; ------------------------------
      53.  00:4010                      ; SEARCH_SLOT
      54.  00:4010                      ; look for the slot of our rom
      55.  00:4010                      ; active in page 1
      56.  00:4010                      ; ------------------------------
      57.  00:4010                      
      58.  00:4010                      search_slot:
      59.  00:4010  CD 38 01            	call	RSLREG
      60.  00:4013  0F 0F               [2]	rrca
      61.  00:4015  E6 03               	and		3
      62.  00:4017  4F                  	ld		c,a
      63.  00:4018  06 00               	ld		b,0
      64.  00:401A  21 C1 FC            	ld		hl,EXPTBL
      65.  00:401D  09                  	add		hl,bc
      66.  00:401E  7E                  	ld		a,(hl)
      67.  00:401F  E6 80               	and		080h
      68.  00:4021  B1                  	or		c
      69.  00:4022  4F                  	ld		c,a
      70.  00:4023  23 23 23 23         [4]	inc		hl
      71.  00:4027  7E                  	ld		a,(hl)
      72.  00:4028  E6 0C               	and		0Ch
      73.  00:402A  B1                  	or		c
      74.  00:402B  32 CD D3            	ld		(slotvar),a
      75.  00:402E  C9                  	ret
      76.  00:402F                      	
      77.  00:402F                      ; ------------------------------
      78.  00:402F                      ; look for the slot of ram
      79.  00:402F                      ; active in page 3
      80.  00:402F                      ; ------------------------------
      81.  00:402F                      
      82.  00:402F                      search_slotram:
      83.  00:402F  F3                  	di
      84.  00:4030  CD 38 01            	call	RSLREG
      85.  00:4033  07 07               [2]	rlca
      86.  00:4035  E6 03               	and		3
      87.  00:4037  4F                  	ld		c,a
      88.  00:4038  06 00               	ld		b,0
      89.  00:403A  21 C1 FC            	ld		hl,EXPTBL
      90.  00:403D  09                  	add		hl,bc
      91.  00:403E  7E                  	ld		a,(hl)
      92.  00:403F  E6 80               	and		080h
      93.  00:4041  28 0D               	jr		z,search_slotram0
      94.  00:4043  B1                  	or		c
      95.  00:4044  4F                  	ld		c,a
      96.  00:4045  23 23 23 23         [4]	inc		hl
      97.  00:4049  7E                  	ld		a,(hl)
      98.  00:404A  07 07 07 07         [4]	rlca
      99.  00:404E  E6 0C               	and		0Ch
     100.  00:4050                      search_slotram0:
     101.  00:4050  B1                  	or		c
     102.  00:4051  32 CE D3            	ld		(slotram),a
     103.  00:4054  C9                  	ret
     104.  00:4055                      	
     105.  00:4055                      ; ------------------------------
     106.  00:4055                      ; SETROMPAGE0
     107.  00:4055                      ; Set the chart in
     108.  00:4055                      ; Page 0
     109.  00:4055                      ; -----------------------------
     110.  00:4055                      
     111.  00:4055                      setrompage0:
     112.  00:4055  3A CD D3            	ld		a,(slotvar)
     113.  00:4058  C3 7C 40            	jp		setslotpage0
     114.  00:405B                      
     115.  00:405B                      setrampage0:
     116.  00:405B  3A CE D3            	ld		a,(slotram)
     117.  00:405E  C3 7C 40            	jp		setslotpage0
     118.  00:4061                      
     119.  00:4061                      setrompage2:
     120.  00:4061  3A CD D3            	ld		a,(slotvar)
     121.  00:4064  C3 F2 40            	jp		setslotpage2
     122.  00:4067                      
     123.  00:4067                      setrampage2:
     124.  00:4067  3A CE D3            	ld		a,(slotram)
     125.  00:406A  C3 F2 40            	jp		setslotpage2
     126.  00:406D                      	
     127.  00:406D                      setrompage3:
     128.  00:406D  3A CD D3            	ld		a,(slotvar)
     129.  00:4070  C3 39 41            	jp		setslotpage3
     130.  00:4073                      
     131.  00:4073                      setrampage3:
     132.  00:4073  3A CE D3            	ld		a,(slotram)
     133.  00:4076  C3 39 41            	jp		setslotpage3
     134.  00:4079                      	
     135.  00:4079                      ; ------------------------------
     136.  00:4079                      ; RECBIOS
     137.  00:4079                      ; set the bios ROM
     138.  00:4079                      ; -------------------------------
     139.  00:4079                      recbios:
     140.  00:4079  3A C1 FC            	ld		a,(EXPTBL)
     141.  00:407C                      
     142.  00:407C                      ; ---------------------------
     143.  00:407C                      ; SETSLOTPAGE0
     144.  00:407C                      ; Set the slot passed in A
     145.  00:407C                      ; at page 0 in the Z80 address space
     146.  00:407C                      ; A: Format FxxxSSPP
     147.  00:407C                      ; ----------------------------
     148.  00:407C                      
     149.  00:407C                      setslotpage0:
     150.  00:407C  F3                  	di
     151.  00:407D  47                  	ld		b,a					; B = Slot param in FxxxSSPP format
     152.  00:407E  DB A8               	in		a,(0A8h)
     153.  00:4080  E6 FC               	and		0xFC
     154.  00:4082  57                  	ld		d,a					; D = Primary slot value
     155.  00:4083  78                  	ld		a,b
     156.  00:4084  E6 03               	and		3
     157.  00:4086  B2                  	or		d
     158.  00:4087  57                  	ld		d,a		; D = Final Value for primary slot
     159.  00:4088  78                  	ld		a,b		; Check if expanded
     160.  00:4089  CB 7F               	bit		7,a
     161.  00:408B  28 22               	jr		z,1f	; Not Expanded
     162.  00:408D                      	mainslot_setup	0
     162.  00:408D  E6 03             >  and  3
     162.  00:408F  0F 0F             > [2] rrca
     162.  00:4091  E6 C0             >  and  0xC0
     162.  00:4093  4F                >  ld  c,a
     162.  00:4094  7A                >  ld  a,d
     162.  00:4095  E6 3F             >  and  0x3F
     162.  00:4097  B1                >  or  c
     162.  00:4098  4F                >  ld  c,a
     162.  00:4099                    > 
     162.  00:4099  78                >  ld  a,b
     162.  00:409A  E6 0C             >  and  0x0C
     162.  00:409C  0F 0F             > [2] rrca
     162.  00:409E  E6 03             >  and  3
     162.  00:40A0  47                >  ld  b,a
     162.  00:40A1  79                >  ld  a,c
     162.  00:40A2  D3 A8             >  out  (0A8h),a
     162.  00:40A4  3A FF FF          >  ld  a,(0FFFFh)
     162.  00:40A7  2F                >  cpl
     162.  00:40A8                    >  if (n<=4)
     162.  00:40A8                    > [n] RLCA
     162.  00:40A8                    >  else
     162.  00:40A8                    ~ [8-n] RRCA
     162.  00:40A8                    ~  endif
     162.  00:40A8  E6 FC             >  and  0xFC
     162.  00:40AA  B0                >  or  b
     162.  00:40AB                    >  if (n<=4)
     162.  00:40AB                    > [n] RRCA
     162.  00:40AB                    >  else
     162.  00:40AB                    ~ [8-n] RLCA
     162.  00:40AB                    ~  endif
     162.  00:40AB  32 FF FF          >  ld  (0FFFFh),a
     162.  00:40AE  47                >  ld  b,a
     163.  00:40AF  7A                  1:	ld		a,d				; A = Final value
     164.  00:40B0  D3 A8               	out		(0A8h),a		; Slot Final. Ram, rom c, rom c, Main
     165.  00:40B2  C9                  	ret
     166.  00:40B3                      
     167.  00:40B3                      ; ---------------------------
     168.  00:40B3                      ; SETSLOTPAGE1
     169.  00:40B3                      ; Set the slot passed in A
     170.  00:40B3                      ; at page 1 in the Z80 address space
     171.  00:40B3                      ; A: Format FxxxSSPP
     172.  00:40B3                      ; ----------------------------
     173.  00:40B3                      
     174.  00:40B3                      setslotpage1:
     175.  00:40B3  F3                  	di
     176.  00:40B4  47                  	ld		b,a					; B = Slot param in FxxxSSPP format
     177.  00:40B5  DB A8               	in		a,(0A8h)
     178.  00:40B7  0F 0F               [2]	RRCA
     179.  00:40B9  E6 FC               	and		0xFC
     180.  00:40BB  57                  	ld		d,a					; D = Primary slot value
     181.  00:40BC  78                  	ld		a,b
     182.  00:40BD  E6 03               	and		3
     183.  00:40BF  B2                  	or		d
     184.  00:40C0  07 07               [2]	RLCA
     185.  00:40C2  57                  	ld		d,a		; D = Final Value for primary slot
     186.  00:40C3  78                  	ld		a,b		; Check if expanded
     187.  00:40C4  CB 7F               	bit		7,a
     188.  00:40C6  28 26               	jr		z,1f	; Not Expanded
     189.  00:40C8                      	mainslot_setup	6
     189.  00:40C8  E6 03             >  and  3
     189.  00:40CA  0F 0F             > [2] rrca
     189.  00:40CC  E6 C0             >  and  0xC0
     189.  00:40CE  4F                >  ld  c,a
     189.  00:40CF  7A                >  ld  a,d
     189.  00:40D0  E6 3F             >  and  0x3F
     189.  00:40D2  B1                >  or  c
     189.  00:40D3  4F                >  ld  c,a
     189.  00:40D4                    > 
     189.  00:40D4  78                >  ld  a,b
     189.  00:40D5  E6 0C             >  and  0x0C
     189.  00:40D7  0F 0F             > [2] rrca
     189.  00:40D9  E6 03             >  and  3
     189.  00:40DB  47                >  ld  b,a
     189.  00:40DC  79                >  ld  a,c
     189.  00:40DD  D3 A8             >  out  (0A8h),a
     189.  00:40DF  3A FF FF          >  ld  a,(0FFFFh)
     189.  00:40E2  2F                >  cpl
     189.  00:40E3                    >  if (n<=4)
     189.  00:40E3                    ~ [n] RLCA
     189.  00:40E3                    ~  else
     189.  00:40E3  0F 0F             > [8-n] RRCA
     189.  00:40E5                    >  endif
     189.  00:40E5  E6 FC             >  and  0xFC
     189.  00:40E7  B0                >  or  b
     189.  00:40E8                    >  if (n<=4)
     189.  00:40E8                    ~ [n] RRCA
     189.  00:40E8                    ~  else
     189.  00:40E8  07 07             > [8-n] RLCA
     189.  00:40EA                    >  endif
     189.  00:40EA  32 FF FF          >  ld  (0FFFFh),a
     189.  00:40ED  47                >  ld  b,a
     190.  00:40EE  7A                  1:	ld		a,d				; A = Final value
     191.  00:40EF  D3 A8               	out		(0A8h),a		; Slot Final. Ram, rom c, rom c, Main
     192.  00:40F1  C9                  	ret
     193.  00:40F2                      	
     194.  00:40F2                      
     195.  00:40F2                      ; ---------------------------
     196.  00:40F2                      ; SETSLOTPAGE2
     197.  00:40F2                      ; Set the slot passed in A
     198.  00:40F2                      ; at page 2 in the Z80 address space
     199.  00:40F2                      ; A: Format FxxxSSPP
     200.  00:40F2                      ; ----------------------------
     201.  00:40F2                      
     202.  00:40F2                      setslotpage2:
     203.  00:40F2  F3                  	di
     204.  00:40F3  47                  	ld		b,a					; B = Slot param in FxxxSSPP format
     205.  00:40F4  DB A8               	in		a,(0A8h)
     206.  00:40F6  07 07 07 07         [4]	RLCA
     207.  00:40FA  E6 FC               	and		0xFC
     208.  00:40FC  57                  	ld		d,a					; D = Primary slot value
     209.  00:40FD  78                  	ld		a,b
     210.  00:40FE  E6 03               	and		3
     211.  00:4100  B2                  	or		d
     212.  00:4101  0F 0F 0F 0F         [4]	RRCA
     213.  00:4105  57                  	ld		d,a		; D = Final Value for primary slot
     214.  00:4106  78                  	ld		a,b		; Check if expanded
     215.  00:4107  CB 7F               	bit		7,a
     216.  00:4109  28 2A               	jr		z,1f	; Not Expanded
     217.  00:410B                      	mainslot_setup	4
     217.  00:410B  E6 03             >  and  3
     217.  00:410D  0F 0F             > [2] rrca
     217.  00:410F  E6 C0             >  and  0xC0
     217.  00:4111  4F                >  ld  c,a
     217.  00:4112  7A                >  ld  a,d
     217.  00:4113  E6 3F             >  and  0x3F
     217.  00:4115  B1                >  or  c
     217.  00:4116  4F                >  ld  c,a
     217.  00:4117                    > 
     217.  00:4117  78                >  ld  a,b
     217.  00:4118  E6 0C             >  and  0x0C
     217.  00:411A  0F 0F             > [2] rrca
     217.  00:411C  E6 03             >  and  3
     217.  00:411E  47                >  ld  b,a
     217.  00:411F  79                >  ld  a,c
     217.  00:4120  D3 A8             >  out  (0A8h),a
     217.  00:4122  3A FF FF          >  ld  a,(0FFFFh)
     217.  00:4125  2F                >  cpl
     217.  00:4126                    >  if (n<=4)
     217.  00:4126  07 07 07 07       > [n] RLCA
     217.  00:412A                    >  else
     217.  00:412A                    ~ [8-n] RRCA
     217.  00:412A                    ~  endif
     217.  00:412A  E6 FC             >  and  0xFC
     217.  00:412C  B0                >  or  b
     217.  00:412D                    >  if (n<=4)
     217.  00:412D  0F 0F 0F 0F       > [n] RRCA
     217.  00:4131                    >  else
     217.  00:4131                    ~ [8-n] RLCA
     217.  00:4131                    ~  endif
     217.  00:4131  32 FF FF          >  ld  (0FFFFh),a
     217.  00:4134  47                >  ld  b,a
     218.  00:4135  7A                  1:	ld		a,d				; A = Final value
     219.  00:4136  D3 A8               	out		(0A8h),a		; Slot Final. Ram, rom c, rom c, Main
     220.  00:4138  C9                  	ret
     221.  00:4139                      	
     222.  00:4139                      ; ---------------------------
     223.  00:4139                      ; SETSLOTPAGE3
     224.  00:4139                      ; Set the slot passed in A
     225.  00:4139                      ; at page 3 in the Z80 address space
     226.  00:4139                      ; A: Format FxxxSSPP
     227.  00:4139                      ; ----------------------------
     228.  00:4139                      	
     229.  00:4139                      setslotpage3:
     230.  00:4139  F3                  	di
     231.  00:413A  47                  	ld		b,a					; B = Slot param in FxxxSSPP format
     232.  00:413B  DB A8               	in		a,(0A8h)
     233.  00:413D  07 07               [2]	RLCA
     234.  00:413F  E6 FC               	and		0xFC
     235.  00:4141  57                  	ld		d,a					; D = Primary slot value
     236.  00:4142  78                  	ld		a,b
     237.  00:4143  E6 03               	and		3
     238.  00:4145  B2                  	or		d
     239.  00:4146  0F 0F               [2]	RRCA	
     240.  00:4148  57                  	ld		d,a		; D = Final Value for primary slot
     241.  00:4149  78                  	ld		a,b		; Check if expanded
     242.  00:414A  CB 7F               	bit		7,a
     243.  00:414C  28 26               	jr		z,1f	; Not Expanded
     244.  00:414E                      	mainslot_setup	2
     244.  00:414E  E6 03             >  and  3
     244.  00:4150  0F 0F             > [2] rrca
     244.  00:4152  E6 C0             >  and  0xC0
     244.  00:4154  4F                >  ld  c,a
     244.  00:4155  7A                >  ld  a,d
     244.  00:4156  E6 3F             >  and  0x3F
     244.  00:4158  B1                >  or  c
     244.  00:4159  4F                >  ld  c,a
     244.  00:415A                    > 
     244.  00:415A  78                >  ld  a,b
     244.  00:415B  E6 0C             >  and  0x0C
     244.  00:415D  0F 0F             > [2] rrca
     244.  00:415F  E6 03             >  and  3
     244.  00:4161  47                >  ld  b,a
     244.  00:4162  79                >  ld  a,c
     244.  00:4163  D3 A8             >  out  (0A8h),a
     244.  00:4165  3A FF FF          >  ld  a,(0FFFFh)
     244.  00:4168  2F                >  cpl
     244.  00:4169                    >  if (n<=4)
     244.  00:4169  07 07             > [n] RLCA
     244.  00:416B                    >  else
     244.  00:416B                    ~ [8-n] RRCA
     244.  00:416B                    ~  endif
     244.  00:416B  E6 FC             >  and  0xFC
     244.  00:416D  B0                >  or  b
     244.  00:416E                    >  if (n<=4)
     244.  00:416E  0F 0F             > [n] RRCA
     244.  00:4170                    >  else
     244.  00:4170                    ~ [8-n] RLCA
     244.  00:4170                    ~  endif
     244.  00:4170  32 FF FF          >  ld  (0FFFFh),a
     244.  00:4173  47                >  ld  b,a
     245.  00:4174  7A                  1:	ld		a,d				; A = Final value
     246.  00:4175  D3 A8               	out		(0A8h),a		; Slot Final. Ram, rom c, rom c, Main
     247.  00:4177  C9                  	ret
     248.  00:4178                      
     249.  00:4178                      	
      46   00:4178                      		include "vdpio.asm"
       1.  00:4178                      
       2.  00:4178                             
       3.  00:4178                      ;-------------------------------------
       4.  00:4178                      _cls:		
       5.  00:4178  11 00 00            		ld		de,0
       6.  00:417B  4B                  		ld		c,e
       7.  00:417C  F3                  		di
       8.  00:417D  CD A8 41            		call	_vdpsetvramwr
       9.  00:4180  01 00 00            		ld		bc,0x0000
      10.  00:4183  3E 25               1:		ld		a,00100101B
      11.  00:4185  D3 98               		out		(0x98),a
      12.  00:4187  0B                  		dec		bc
      13.  00:4188  78                  		ld		a,b
      14.  00:4189  B1                  		or		c
      15.  00:418A  20 F7               		jr	nz,1b
      16.  00:418C  3E 25               1:		ld		a,00100101B
      17.  00:418E  D3 98               		out		(0x98),a
      18.  00:4190  0B                  		dec		bc
      19.  00:4191  78                  		ld		a,b
      20.  00:4192  B1                  		or		c
      21.  00:4193  20 F7               		jr	nz,1b
      22.  00:4195  C9                  		ret
      23.  00:4196                      ;-------------------------------------
      24.  00:4196                      		
      25.  00:4196  (00:0099)           vdpport1 equ 0x99
      26.  00:4196  (00:009A)           vdpport2 equ 0x9A
      27.  00:4196                      
      28.  00:4196                      levelcolors:
      29.  00:4196                      	; incbin "palette.bin"
      30.  00:4196                      
      31.  00:4196                      _SetPalet:   
      32.  00:4196  F3                  	di
      33.  00:4197  AF                  	xor a 			;Set pointer to zero.
      34.  00:4198  D3 99               	out (vdpport1),a        
      35.  00:419A  3E 90               	ld  a,16 | 010000000B
      36.  00:419C  D3 99               	out (vdpport1),a
      37.  00:419E                      
      38.  00:419E  21 96 41            	ld  hl,levelcolors
      39.  00:41A1  01 9A 20            	ld bc,vdpport2+32*256
      40.  00:41A4  ED B3               	otir
      41.  00:41A6  FB                  	ei
      42.  00:41A7  C9                  	ret
      43.  00:41A8                      
      44.  00:41A8                      ;Set VDP for writing at address CDE (17-bit) 
      45.  00:41A8                      
      46.  00:41A8                      _vdpsetvramwr:
      47.  00:41A8  79                  	ld a,c
      48.  00:41A9                      ;Set VDP for writing at address ADE (17-bit) ;
      49.  00:41A9  CB 02               	rlc d
      50.  00:41AB  17                  	rla
      51.  00:41AC  CB 02               	rlc d
      52.  00:41AE  17                  	rla
      53.  00:41AF  CB 3A               	srl d ; primo shift, il secondo dopo la out
      54.  00:41B1                      
      55.  00:41B1  D3 99               	out (0x99),a ;set bits 14-16
      56.  00:41B3  3E 8E               	ld a,14+128
      57.  00:41B5  D3 99               	out (0x99),a
      58.  00:41B7                      
      59.  00:41B7  CB 3A               	srl d ; secondo shift.     
      60.  00:41B9                      _vdpsetvramwr14
      61.  00:41B9  7B                  	ld a,e ;set bits 0-7
      62.  00:41BA  D3 99               	out (0x99),a
      63.  00:41BC  7A                  	ld a,d ;set bits 8-13
      64.  00:41BD  F6 40               	or 0x40 ; + write access
      65.  00:41BF  D3 99               	out (0x99),a
      66.  00:41C1  C9                  	ret
      67.  00:41C2                      	
      68.  00:41C2                      ;Set VDP port #98 to start reading at address CDE (17-bit) ;
      69.  00:41C2                      
      70.  00:41C2                      _vdpsetvramrd:
      71.  00:41C2  79                  	ld a,c
      72.  00:41C3                      ;Set VDP port #98 to start reading at address ADE (17-bit) ;
      73.  00:41C3  CB 02               	rlc d
      74.  00:41C5  17                  	rla
      75.  00:41C6  CB 02               	rlc d
      76.  00:41C8  17                  	rla
      77.  00:41C9  CB 3A               	srl d ; primo shift, il secondo dopo la out
      78.  00:41CB                      
      79.  00:41CB  D3 99               	out (0x99),a ;set bits 14-16
      80.  00:41CD  3E 8E               	ld a,14+128
      81.  00:41CF  D3 99               	out (0x99),a
      82.  00:41D1                      
      83.  00:41D1  CB 3A               	srl d ; secondo shift.            
      84.  00:41D3  7B                  	ld a,e ;set bits 0-7
      85.  00:41D4  D3 99               	out (0x99),a
      86.  00:41D6  7A                  	ld a,d ;set bits 8-13
      87.  00:41D7  E6 3F               	and 0x3F
      88.  00:41D9  D3 99               	out (0x99),a
      89.  00:41DB  C9                  	ret
      90.  00:41DC                      
      91.  00:41DC                      ;Display page E in screen 5
      92.  00:41DC                      _setpage:
      93.  00:41DC  7B                  	ld a,e
      94.  00:41DD  87 87 87 87 87      [5]	add a,a ;x32
      95.  00:41E2  F6 1F               	or	 00011111B
      96.  00:41E4  F3                  	di
      97.  00:41E5  D3 99               	out (0x99),a
      98.  00:41E7  3E 82               	ld a,2+128
      99.  00:41E9  D3 99               	out (0x99),a
     100.  00:41EB  FB                  	ei            
     101.  00:41EC  C9                  	ret
     102.  00:41ED                      
     103.  00:41ED  (00:005F)           chgmod        equ     0x005f      ;change graphic mode
     104.  00:41ED  (00:000C)           RDSLT         equ     0x000c      ;read address HL in slot A
     105.  00:41ED  (00:0156)           KILBUF        equ     0x0156      ;clear keyboard buffer
     106.  00:41ED                      
     107.  00:41ED                      set_scr:
     108.  00:41ED  3E 08               	ld  	a,8
     109.  00:41EF  CD 5F 00            	call	chgmod
     110.  00:41F2                      	
     111.  00:41F2  F3                  	di
     112.  00:41F3                      	// sprites 16x16
     113.  00:41F3  3A E0 F3            	ld		a,(0xF3E0)
     114.  00:41F6  F6 02               	or		2
     115.  00:41F8  32 E0 F3            	ld		(0xF3E0),a
     116.  00:41FB  D3 99               	out		(0x99),a
     117.  00:41FD  3E 81               	ld		a,128+1
     118.  00:41FF  D3 99               	out		(0x99),a
     119.  00:4201                      
     120.  00:4201                      	// border color
     121.  00:4201                      	; ld		a,0x55
     122.  00:4201  AF                  	xor		a
     123.  00:4202  D3 99               	out		(0x99),a
     124.  00:4204  3E 87               	ld		a,128+7
     125.  00:4206  D3 99               	out		(0x99),a
     126.  00:4208                      		
     127.  00:4208                      	// enable sprites + TP
     128.  00:4208  3A E7 FF            	ld		a,(0xFFE7)
     129.  00:420B  F6 22               	or		32+2
     130.  00:420D  32 E7 FF            	ld		(0xFFE7),a
     131.  00:4210  D3 99               	out		(0x99),a
     132.  00:4212  3E 88               	ld		a,128+8
     133.  00:4214  D3 99               	out		(0x99),a
     134.  00:4216                      		
     135.  00:4216                      	// Set 192 lines @50Hz (PAL assumed!)
     136.  00:4216  3A CF D3            	ld	a,(SEL_NTSC)
     137.  00:4219  A7                  	and 	a
     138.  00:421A  20 0C               	jr		nz,1f
     139.  00:421C                      	
     140.  00:421C  3A E8 FF            	ld		a,(0xFFE8)		; PAL
     141.  00:421F  E6 7F               	and		01111111B
     142.  00:4221  F6 02               	or		2
     143.  00:4223  32 E8 FF            	ld		(0xFFE8),a
     144.  00:4226  18 08               	jr	2f
     145.  00:4228                      1:		
     146.  00:4228  3A E8 FF            	ld		a,(0xFFE8)		; NTSC
     147.  00:422B  E6 7D               	and		01111101B
     148.  00:422D  32 E8 FF            	ld		(0xFFE8),a
     149.  00:4230                      2:	
     150.  00:4230  D3 99               	out		(0x99),a
     151.  00:4232  3E 89               	ld		a,128+9
     152.  00:4234  D3 99               	out		(0x99),a
     153.  00:4236  FB                  	ei
     154.  00:4237                      
     155.  00:4237  C9                  	ret
     156.  00:4238                      
     157.  00:4238                      
     158.  00:4238                      _waitvdp:
     159.  00:4238  F3                  	di
     160.  00:4239  3E 02               	ld a,2
     161.  00:423B  D3 99               	out (0x99),a
     162.  00:423D  3E 8F               	ld a, 0x8f
     163.  00:423F  D3 99               	out (0x99),a
     164.  00:4241                      
     165.  00:4241  DB 99               1:  in a,(0x99)
     166.  00:4243  0F                  	rrca
     167.  00:4244  DA 41 42            	jp c, 1b
     168.  00:4247                      
     169.  00:4247  AF                  	xor a
     170.  00:4248  D3 99               	out (0x99),a
     171.  00:424A  3E 8F               	ld a, 0x8f
     172.  00:424C  D3 99               	out (0x99),a
     173.  00:424E  FB                  	ei
     174.  00:424F  C9                  	ret
     175.  00:4250                      	
      47   00:4250                      		include "turbo.asm"
       1.  00:4250                      
       2.  00:4250  (00:000C)           rdslt	equ	0x000c
       3.  00:4250  (00:001C)           CALSLT	equ	0x001c
       4.  00:4250  (00:0180)           chgcpu	equ	0x0180	; change cpu mode
       5.  00:4250  (00:FCC1)           exttbl	equ	0xfcc1	; main rom slot
       6.  00:4250                      
       7.  00:4250                      ; Switch to r800 rom mode
       8.  00:4250                      	
       9.  00:4250                      _set_r800:
      10.  00:4250  DB AA               		in	a,(0aah)
      11.  00:4252  E6 F0               		and 011110000B			; upper 4 bits contain info to preserve
      12.  00:4254  F6 06               		or	6
      13.  00:4256  D3 AA               		out (0aah),a
      14.  00:4258  DB A9               		in	a,(0a9h)
      15.  00:425A  6F                  		ld	l,a
      16.  00:425B                      
      17.  00:425B  3A 2D 00            		ld	a,(0x002d)
      18.  00:425E  FE 03               		cp	3					; this is a TR
      19.  00:4260  7D                  		ld	a,l
      20.  00:4261  28 0E               		jr	z,set_turbo_tr
      21.  00:4263                      								; this is anything else
      22.  00:4263  E6 02               		and	0x02				; CTR
      23.  00:4265  C0                  		ret	nz					; if NZ, CTR is not pressed set the turbo
      24.  00:4266                      
      25.  00:4266  3A 80 01            		ld	A,(chgcpu)
      26.  00:4269  FE C3               		cp	0C3h
      27.  00:426B  3E 81               		ld	a,81h              ; R800 ROM mode or any other turbo
      28.  00:426D  CC 80 01            		call	z,chgcpu
      29.  00:4270  C9                  		ret
      30.  00:4271                      
      31.  00:4271                      set_turbo_tr
      32.  00:4271  E6 02               		and	0x02				; CTR
      33.  00:4273  C8                  		ret	z					; if Z, CTR is pressed -> do not set the turbo
      34.  00:4274  3E 81               		ld	a,81h              	; R800 ROM mode
      35.  00:4276  C3 80 01            		jp chgcpu
      36.  00:4279                      		
      48   00:4279                      		include "isr.asm"
       1.  00:4279                      
       2.  00:4279                      		; include "header.asm"
       3.  00:4279                      		
       4.  00:4279  (00:F3DF)           RG0SAV EQU 0xF3DF
       5.  00:4279  (00:F3E0)           RG1SAV equ 0xF3E0
       6.  00:4279  (00:F3E6)           RG7SAV equ 0xF3E6 ; border color
       7.  00:4279  (00:F3E7)           RG8SAV equ 0xF3E7 ; VDP Register 8 Save copy.
       8.  00:4279                      
       9.  00:4279  (00:FC9E)           _jiffy: equ 0xFC9E 
      10.  00:4279                      
      11.  00:4279                      	; global _intinit,_intreset,_scroll_sx,_scroll_dx
      12.  00:4279                      	; global _jiffy
      13.  00:4279                      	; global _xoffset
      14.  00:4279                      	; global _displaypage
      15.  00:4279                      	; global _direction
      16.  00:4279                      	; global _jiffy
      17.  00:4279                      
      18.  00:4279                      
      19.  00:4279                      _isrinit:
      20.  00:4279  F3                  	di
      21.  00:427A  21 38 00            	ld	hl,0x0038
      22.  00:427D  36 C3               	ld	(hl),0xC3
      23.  00:427F  23                  	inc	hl
      24.  00:4280  36 AE               	ld	(hl),low _scroll
      25.  00:4282  23                  	inc	hl
      26.  00:4283  36 42               	ld	(hl),high _scroll
      27.  00:4285                      
      28.  00:4285                      ; set interrupt line
      29.  00:4285  3E 9E               	LD    A,YSIZE-2
      30.  00:4287  D3 99               	OUT   (0x99),A
      31.  00:4289  3E 93               	LD    A,0x93
      32.  00:428B  D3 99               	OUT   (0x99),A
      33.  00:428D                      	
      34.  00:428D                      ; enable line interrupt
      35.  00:428D  3A DF F3            	LD    A,(RG0SAV)
      36.  00:4290  F6 10               	OR    0x10
      37.  00:4292  32 DF F3            	LD    (RG0SAV),A
      38.  00:4295  D3 99               	OUT   (0x99),A
      39.  00:4297  3E 80               	LD    A,0x80
      40.  00:4299  D3 99               	OUT   (0x99),A
      41.  00:429B  FB                  	ei
      42.  00:429C  C9                  	ret
      43.  00:429D                      	
      44.  00:429D                      _intreset:
      45.  00:429D                      ; disable line interrupt
      46.  00:429D  F3                  	di
      47.  00:429E  3A DF F3            	LD    A,(RG0SAV)
      48.  00:42A1  E6 EF               	and    0xEF
      49.  00:42A3  32 DF F3            	LD    (RG0SAV),A
      50.  00:42A6  D3 99               	OUT   (0x99),A
      51.  00:42A8  3E 80               	LD    A,0x80
      52.  00:42AA  D3 99               	OUT   (0x99),A
      53.  00:42AC  FB                  	ei
      54.  00:42AD  C9                  	ret
      55.  00:42AE                      	
      56.  00:42AE                      ;;;;;;;;;;;;;;;;;;;;;;
      57.  00:42AE                      ; actual ISR handler
      58.  00:42AE                      ;;;;;;;;;;;;;;;;;;;;;;
      59.  00:42AE                      
      60.  00:42AE                      _scroll:
      61.  00:42AE  F3                  	di
      62.  00:42AF  F5                  	push	af
      63.  00:42B0                      	
      64.  00:42B0  AF                  	xor	a 			; read S#0
      65.  00:42B1  D3 99               	out (0x99),a
      66.  00:42B3  3E 8F               	ld a,128+15
      67.  00:42B5  D3 99               	out (0x99),a
      68.  00:42B7  DB 99               	in	a,(0x99)
      69.  00:42B9  07                  	rlca
      70.  00:42BA  DA 65 43            	jp	c,vblank
      71.  00:42BD                      	
      72.  00:42BD  3E 01               	ld a,1 			; read S#1
      73.  00:42BF  D3 99               	out (0x99),a
      74.  00:42C1  3E 8F               	ld a,128+15
      75.  00:42C3  D3 99               	out (0x99),a
      76.  00:42C5  DB 99               	in a,(0x99)
      77.  00:42C7  1F                  	rra
      78.  00:42C8  DA CE 42            	jp	c,lint	
      79.  00:42CB                      	
      80.  00:42CB  F1                  	pop	af			; none of them (?)
      81.  00:42CC  FB                  	ei
      82.  00:42CD  C9                  	ret
      83.  00:42CE                      	
      84.  00:42CE                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
      85.  00:42CE                      ; manage scorebar at YSIZE
      86.  00:42CE                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
      87.  00:42CE                      	
      88.  00:42CE                      lint:					
      89.  00:42CE  3A E0 F3            	ld	a,(RG1SAV)
      90.  00:42D1  E6 BF               	and	0xBF			; disable screen
      91.  00:42D3  D3 99               	out	(0x99),a
      92.  00:42D5  3E 81               	ld	a,1+128
      93.  00:42D7  D3 99               	out	(0x99),a
      94.  00:42D9                      
      95.  00:42D9  3E 02               	ld a,2 				; read S#2
      96.  00:42DB  D3 99               	out (0x99),a
      97.  00:42DD  3E 8F               	ld a,128+15
      98.  00:42DF  D3 99               	out (0x99),a		; poll for HBLANK
      99.  00:42E1                      
     100.  00:42E1  DB 99               1:	in	a,(0x99)		; we are in HBLANK already, so wait until end of HBLANK
     101.  00:42E3  E6 20               	and	0x20
     102.  00:42E5  C2 E1 42            	jp	nz,1b			
     103.  00:42E8  DB 99               2:	in	a,(0x99)		; wait until end of the active area
     104.  00:42EA  E6 20               	and	0x20
     105.  00:42EC  CA E8 42            	jp	z,2b
     106.  00:42EF                      						; now we are at the start of HBLANK
     107.  00:42EF  AF                  	xor	a
     108.  00:42F0  D3 99               	out	(099h),a
     109.  00:42F2  3E 92               	ld	a,18+128
     110.  00:42F4  D3 99               	out	(099h),a		; setadjust 0,0
     111.  00:42F6                      	
     112.  00:42F6  3E 22               	LD    A,192-(YSIZE-2)	; SCROLL DOWN
     113.  00:42F8  D3 99               	OUT   (0x99),A
     114.  00:42FA  3E 97               	LD    A,23+128
     115.  00:42FC  D3 99               	OUT   (0x99),A
     116.  00:42FE                      
     117.  00:42FE  3E 1F               	ld a,00011111B		; 0XX11111B
     118.  00:4300  D3 99               	out (0x99),a
     119.  00:4302  3E 82               	ld a,2+128			; R#2 
     120.  00:4304  D3 99               	out (0x99),a		; score bar in page 0
     121.  00:4306                      
     122.  00:4306  3A E7 F3            	ld	a,(RG8SAV)
     123.  00:4309  F6 02               	or	2				; disable sprites
     124.  00:430B  D3 99               	out	(0x99),a
     125.  00:430D  3E 88               	ld	a,8+128
     126.  00:430F  D3 99               	out	(0x99),a
     127.  00:4311                      
     128.  00:4311  3A E0 F3            	ld	a,(RG1SAV)
     129.  00:4314  F6 42               	or 	0x42			; enable screen
     130.  00:4316  D3 99               	out	(0x99),a
     131.  00:4318  3E 81               	ld	a,1+128
     132.  00:431A  D3 99               	out	(0x99),a
     133.  00:431C                      	
     134.  00:431C  3E 00               	ld	a,border_color;00000001B		; dark blue colour
     135.  00:431E  D3 99               	out	(0x99),a
     136.  00:4320  3E 87               	ld	a,7+128
     137.  00:4322  D3 99               	out	(0x99),a
     138.  00:4324                      	
     139.  00:4324  E5                  	push   hl         
     140.  00:4325  D5                  	push   de         
     141.  00:4326  C5                  	push   bc         
     142.  00:4327  F5                  	push   af         
     143.  00:4328  D9                  	exx               
     144.  00:4329  08                  	ex     af,af'     
     145.  00:432A  E5                  	push   hl         
     146.  00:432B  D5                  	push   de         
     147.  00:432C  C5                  	push   bc         
     148.  00:432D  F5                  	push   af         
     149.  00:432E  FD E5               	push   iy         
     150.  00:4330  DD E5               	push   ix         
     151.  00:4332                      	
     152.  00:4332  CD 8B 44            	call __sat_update
     153.  00:4335                      
     154.  00:4335  21 47 43            	ld	hl,.exit
     155.  00:4338  E5                  	push	hl
     156.  00:4339  3A 01 D4            	ld	a,(_direction)
     157.  00:433C  CB 07               	rlc a
     158.  00:433E  28 06               	jr	z,1f
     159.  00:4340  D2 D6 45            	jp	nc,inc_xoffset			; >0 == dx
     160.  00:4343  DA 16 46            	jp	 c,dec_xoffset			; <0 == sx
     161.  00:4346  E1                  1:	pop	hl
     162.  00:4347                      .exit:
     163.  00:4347                      
     164.  00:4347  CD CE 6A            	call	replay_route		; first output data
     165.  00:434A  CD 51 61            	call	replay_play			; calculate next output
     166.  00:434D                      
     167.  00:434D  AF                  	xor		a				; black colour
     168.  00:434E  D3 99               	out		(0x99),a
     169.  00:4350  3E 87               	ld		a,128+7
     170.  00:4352  D3 99               	out		(0x99),a
     171.  00:4354                      
     172.  00:4354  DD E1               	pop    ix         
     173.  00:4356  FD E1               	pop    iy         
     174.  00:4358  F1                  	pop    af         
     175.  00:4359  C1                  	pop    bc         
     176.  00:435A  D1                  	pop    de         
     177.  00:435B  E1                  	pop    hl         
     178.  00:435C  08                  	ex     af,af'     
     179.  00:435D  D9                  	exx               
     180.  00:435E  F1                  	pop    af         
     181.  00:435F  C1                  	pop    bc         
     182.  00:4360  D1                  	pop    de         
     183.  00:4361  E1                  	pop    hl         
     184.  00:4362                      
     185.  00:4362  F1                  	pop		af
     186.  00:4363  FB                  	ei
     187.  00:4364  C9                  	ret
     188.  00:4365                      
     189.  00:4365                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
     190.  00:4365                      ;   manage normal vblank routine
     191.  00:4365                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;	
     192.  00:4365                      
     193.  00:4365                      vblank:
     194.  00:4365  3A E7 F3            	ld	a,(RG8SAV)		; enable sprites
     195.  00:4368  E6 FD               	and	11111101B
     196.  00:436A  D3 99               	out	(0x99),a
     197.  00:436C  3E 88               	ld	a,8+128
     198.  00:436E  D3 99               	out	(0x99),a
     199.  00:4370  3A 00 D4            	ld	a,(_displaypage)
     200.  00:4373  87 87 87 87 87      [5]	add a,a 			; x32
     201.  00:4378  F6 1F               	or	00011111B
     202.  00:437A  D3 99               	out (0x99),a
     203.  00:437C  3E 82               	ld a,2+128
     204.  00:437E  D3 99               	out (0x99),a
     205.  00:4380                      
     206.  00:4380  E5                  	push	hl
     207.  00:4381  2A 9E FC            	ld	hl,(_jiffy)
     208.  00:4384  23                  	inc	hl
     209.  00:4385  22 9E FC            	ld	(_jiffy),hl
     210.  00:4388  E1                  	pop		hl
     211.  00:4389                      
     212.  00:4389  3A 04 D4            	LD    A,(_yoffset)		; SCROLL DOWN
     213.  00:438C  D3 99               	OUT   (0x99),A
     214.  00:438E  3E 97               	LD    A,23+128
     215.  00:4390  D3 99               	OUT   (0x99),A
     216.  00:4392                      
     217.  00:4392  3A 04 D4            	LD    A,(_yoffset)		; set interrupt line
     218.  00:4395  C6 9E               	add    A,YSIZE-2
     219.  00:4397  D3 99               	OUT   (0x99),A
     220.  00:4399  3E 93               	LD    A,0x93
     221.  00:439B  D3 99               	OUT   (0x99),A
     222.  00:439D                      			
     223.  00:439D                      	; ld      a,2              ; wait VDPready
     224.  00:439D                      	; out     (0x99),a         ; select s#2
     225.  00:439D                      	; ld      a,15+128
     226.  00:439D                      	; out     (0x99),a
     227.  00:439D                      ; 1:	in      a,(0x99)
     228.  00:439D                      	; rra
     229.  00:439D                      	; jp      c,1b			; do not set R#18 if vdp is busy
     230.  00:439D                      
     231.  00:439D  3A 03 D4            	ld	a,(_xoffset)		; set R#18 only if not scrolling
     232.  00:43A0  C6 F8               	add	a,-8
     233.  00:43A2  E6 0F               	and	0Fh
     234.  00:43A4  D3 99               	out	(099h),a
     235.  00:43A6  3E 92               	ld	a,18+128
     236.  00:43A8  D3 99               	out	(099h),a
     237.  00:43AA                      	
     238.  00:43AA  F1                  	pop		af
     239.  00:43AB  FB                  	ei
     240.  00:43AC  C9                  	ret
      49   00:43AD                      		
      50   00:43AD                      		include checkkbd.asm
       1.  00:43AD                      
       2.  00:43AD                      ; // Line Bit_7 Bit_6 Bit_5 Bit_4 Bit_3 Bit_2 Bit_1 Bit_0
       3.  00:43AD                      ; // 0 "7" "6" "5" "4" "3" "2" "1" "0"
       4.  00:43AD                      ; // 1 ";" "]" "[" "\" "=" "-" "9" "8"
       5.  00:43AD                      ; // 2 "B" "A" ??? "/" "." "," "'" "`"
       6.  00:43AD                      ; // 3 "J" "I" "H" "G" "F" "E" "D" "C"
       7.  00:43AD                      ; // 4 "R" "Q" "P" "O" "N" "M" "L" "K"
       8.  00:43AD                      ; // 5 "Z" "Y" "X" "W" "V" "U" "T" "S"
       9.  00:43AD                      ; // 6 F3 F2 F1 CODE CAP GRAPH CTRL SHIFT
      10.  00:43AD                      ; // 7 RET SEL BS STOP TAB ESC F5 F4
      11.  00:43AD                      ; // 8 RIGHT DOWN UP LEFT DEL INS HOME SPACE
      12.  00:43AD                      
      13.  00:43AD                      checkkbd:
      14.  00:43AD  DB AA               		in	a,(0aah)
      15.  00:43AF  E6 F0               		and 011110000B			; upper 4 bits contain info to preserve
      16.  00:43B1  B3                  		or	e
      17.  00:43B2  D3 AA               		out (0aah),a
      18.  00:43B4  DB A9               		in	a,(0a9h)
      19.  00:43B6  6F                  		ld	l,a
      20.  00:43B7  C9                  		ret
      51   00:43B8                      		include sprts.asm
       1.  00:43B8                      
       2.  00:43B8                      _hw_sprite_init:
       3.  00:43B8                      
       4.  00:43B8  0E 00               		ld		c,0
       5.  00:43BA  11 00 F0            		ld		de,0F000h
       6.  00:43BD  CD A8 41            		call	_vdpsetvramwr
       7.  00:43C0  21 00 AB            		ld		hl,sprtdata
       8.  00:43C3  01 98 00            		ld		bc,0x0098
       9.  00:43C6                      [8]		otir
       9.  00:43C6  ED B3 ED B3 ED B3 ED B3 ED B3 ED B3 ED B3 ED B3 
      10.  00:43D6                      
      11.  00:43D6  0E 00               		ld		c,0
      12.  00:43D8  11 00 F8            		ld		de,0FA00h-512
      13.  00:43DB  CD A8 41            		call	_vdpsetvramwr
      14.  00:43DE  0E 10               		ld	c,16
      15.  00:43E0  06 10               2:		ld	b,16
      16.  00:43E2  3E 0D               		ld	a,13
      17.  00:43E4  D3 98               1:		out	(0x98),a
      18.  00:43E6  10 FC               		djnz 1b		
      19.  00:43E8  06 10               		ld	b,16
      20.  00:43EA  3E 47               		ld	a,7+64
      21.  00:43EC  D3 98               1:		out	(0x98),a
      22.  00:43EE  10 FC               		djnz 1b
      23.  00:43F0  0D                  		dec	c
      24.  00:43F1  20 ED               		jr	nz,2b
      25.  00:43F3                      
      26.  00:43F3  0E 00               		ld		c,0
      27.  00:43F5  11 00 FA            		ld		de,0FA00h
      28.  00:43F8  CD A8 41            		call	_vdpsetvramwr
      29.  00:43FB                      		; ld		hl,_sat
      30.  00:43FB                      		; ld		bc,0x8098
      31.  00:43FB                      		; otir
      32.  00:43FB                      
      33.  00:43FB  3E D8               		ld		a,0xD8
      34.  00:43FD  D3 98               		out 	(0x98),a
      35.  00:43FF                      
      36.  00:43FF  21 0B 44            		ld  hl,_rom_sat
      37.  00:4402  11 4D D3            		ld	de,_sat
      38.  00:4405  01 80 00            		ld	bc,4*32
      39.  00:4408  ED B0               		ldir
      40.  00:440A  C9                  		ret
      41.  00:440B                      _rom_sat
      42.  00:440B  (00:0000)           counter:=0
      43.  00:440B                          repeat	4
      44.  00:440B                    < 		repeat	4
      45.  00:440B                    < 		db	24+ (@@# * 24)
      46.  00:440B                    < 		db	32+(@# * 48)
      47.  00:440B                    < 		db	0+counter*4
      48.  00:440B                    < 		db	15
      49.  00:440B                    < 		db	24+ (@@# * 24)
      50.  00:440B                    < 		db	32+(@# * 48)
      51.  00:440B                    < 		db	0+(counter+2)*4
      52.  00:440B                    < 		db	15
      53.  00:440B                    < counter:=counter+4
      54.  00:440B                    < 		endrepeat
      55.  00:440B                    < 	endrepeat
      55.  00:440B  18 20 00 0F 18 20 08 0F 18 50 10 0F 18 50 18 0F 
      55.  00:441B  18 80 20 0F 18 80 28 0F 18 B0 30 0F 18 B0 38 0F 
      55.  00:442B  30 20 40 0F 30 20 48 0F 30 50 50 0F 30 50 58 0F 
      55.  00:443B  30 80 60 0F 30 80 68 0F 30 B0 70 0F 30 B0 78 0F 
      55.  00:444B  48 20 80 0F 48 20 88 0F 48 50 90 0F 48 50 98 0F 
      55.  00:445B  48 80 A0 0F 48 80 A8 0F 48 B0 B0 0F 48 B0 B8 0F 
      55.  00:446B  60 20 C0 0F 60 20 C8 0F 60 50 D0 0F 60 50 D8 0F 
      55.  00:447B  60 80 E0 0F 60 80 E8 0F 60 B0 F0 0F 60 B0 F8 0F 
      56.  00:448B                      	
      52   00:448B                      		include sat_update.asm
       1.  00:448B                      
       2.  00:448B                      ; _sat_update
       3.  00:448B                      	; push	hl
       4.  00:448B                      	; push	de
       5.  00:448B                      	; push	bc
       6.  00:448B                      	
       7.  00:448B                      	; call __sat_update
       8.  00:448B                      	
       9.  00:448B                      	; pop		bc
      10.  00:448B                      	; pop		de
      11.  00:448B                      	; pop		hl
      12.  00:448B                      	; ret
      13.  00:448B                      	
      14.  00:448B                      __sat_update
      15.  00:448B  0E 00               	ld		c,0
      16.  00:448D  11 00 FA            	ld		de,0FA00h
      17.  00:4490  CD A8 41            	call	_vdpsetvramwr
      18.  00:4493  21 4D D3            	ld		hl,_sat
      19.  00:4496  01 98 80            	ld		bc,0x8098
      20.  00:4499  ED A3               1:	outi
      21.  00:449B  3A 03 D4            	ld	a,(_xoffset)		; set R#18 only if not scrolling
      22.  00:449E  86                  	add	a,(hl)
      23.  00:449F  D3 98               	out (0x98),a
      24.  00:44A1  23                  	inc hl
      25.  00:44A2  ED A3 ED A3         [2]	outi
      26.  00:44A6  10 F1               	djnz 1b
      27.  00:44A8  C9                  	ret
      28.  00:44A9                      	
      29.  00:44A9                      	; ld	a,0xD8
      30.  00:44A9                      	; out 	(0x98),a
      31.  00:44A9                      
      53   00:44A9                      		
      54   00:44A9                      ;-------------------------------------
      55   00:44A9                      ; Entry point
      56   00:44A9                      ;-------------------------------------
      57   00:44A9                      START:
      58   00:44A9  1E 06               		ld e,6
      59   00:44AB  CD AD 43            		call	checkkbd
      60   00:44AE  3E 01               		ld	a,1
      61   00:44B0  CB 0D               		rrc	l				; shift
      62   00:44B2  D2 B6 44            		jp	nc,_ntsc
      63   00:44B5  AF                  		xor	a
      64   00:44B6  32 CF D3            _ntsc:	ld	(SEL_NTSC),a	; if set NSTC, if reset PAL
      65   00:44B9                      
      66   00:44B9  CD ED 41            		call	set_scr
      67   00:44BC                      
      68   00:44BC                      		; call 	_set_r800
      69   00:44BC                      ;-------------------------------------
      70   00:44BC                      ;   Power-up routine for 32K ROM
      71   00:44BC                      ;   set pages and sub slot
      72   00:44BC                      ;-------------------------------------
      73   00:44BC  CD 10 40                    call    search_slot
      74   00:44BF  CD 2F 40                    call    search_slotram
      75   00:44C2  CD 61 40            		call	setrompage2
      76   00:44C5  CD 5B 40            		call	setrampage0
      77   00:44C8  3E C9               		ld		a,0xc9
      78   00:44CA  32 38 00            		ld		(0x38),a
      79   00:44CD                      
      80   00:44CD  AF                  		xor	a
      81   00:44CE  32 00 50            		ld	(_kBank1),a
      82   00:44D1  3C                  		inc	a
      83   00:44D2  32 00 70            		ld	(_kBank2),a
      84   00:44D5                      		
      85   00:44D5  CD 78 41            		call	_cls
      86   00:44D8  3E 0F               		ld	a, :sprtdata
      87   00:44DA  32 00 B0            		ld	(_kBank4),a
      88   00:44DD  CD B8 43            		call 	_hw_sprite_init
      89   00:44E0                      
      90   00:44E0  3E 02               		ld	a, :_scorebar
      91   00:44E2                      		setpage_a
      91   00:44E2  32 00 90          >   ld (_kBank3),a
      91   00:44E5  3C                >   inc a
      91   00:44E6  32 00 B0          >   ld (_kBank4),a
      92   00:44E9  0E 00               		ld		c,0
      93   00:44EB  11 00 C8            		ld		de,256*(192+8)
      94   00:44EE  CD A8 41            		call	_vdpsetvramwr
      95   00:44F1  21 00 80            		ld		hl,_scorebar
      96   00:44F4  01 98 00            		ld		bc,0x0098
      97   00:44F7  3E 18               		ld		a,24
      98   00:44F9  ED B3               1:		otir
      99   00:44FB  3D                  		dec	a
     100   00:44FC  20 FB               		jr	nz,1b
     101   00:44FE                      		
     102   00:44FE                      	;--- initialise demo song
     103   00:44FE  01 CD 02            		ld	bc,	_levelmap-0xC000
     104   00:4501  21 00 C0            		ld	hl,	0xC000
     105   00:4504  36 00               		ld	(hl),0
     106   00:4506  11 01 C0            		ld	de,	0xC000+1
     107   00:4509  ED B0               		ldir
     108   00:450B                      	
     109   00:450B  3E 0E               		ld	a,:demo_song
     110   00:450D                      		setpage_a
     110   00:450D  32 00 90          >   ld (_kBank3),a
     110   00:4510  3C                >   inc a
     110   00:4511  32 00 B0          >   ld (_kBank4),a
     111   00:4514                      		
     112   00:4514  01 40 0F            		ld	bc,	end_demo_song-musbuff
     113   00:4517  21 00 80            		ld	hl,	demo_song
     114   00:451A  11 40 00            		ld	de,	musbuff
     115   00:451D  ED B0               		ldir
     116   00:451F                      			
     117   00:451F  CD 00 60            		call	replay_init
     118   00:4522  21 40 00            		ld	hl,musbuff
     119   00:4525  CD 5A 60            		call	replay_loadsong
     120   00:4528                      
     121   00:4528                      		; call	_clean_buffs
     122   00:4528                      
     123   00:4528  1E 00               		ld		e,0
     124   00:452A  CD DC 41                    call	_setpage
     125   00:452D                      		
     126   00:452D                      		; unpack level map (bit field for collisions)
     127   00:452D                      		; ld	a, :_level_bf
     128   00:452D                      		; setpage_a
     129   00:452D                      		
     130   00:452D                      		; ld	bc,	mapWidth*mapHeight
     131   00:452D                      		; ld	hl,	_level_bf
     132   00:452D                      		; ld	de,	_cur_level_bf
     133   00:452D                      		; ldir
     134   00:452D                      
     135   00:452D                      
     136   00:452D                      		;copy in ram the map 
     137   00:452D                      		
     138   00:452D  3E 0F               		ld	a, :_level
     139   00:452F  32 00 90            		ld	(_kBank3),a
     140   00:4532                      		
     141   00:4532  21 00 A0            		ld		hl,_level
     142   00:4535  11 CD C2            		ld		de,_levelmap
     143   00:4538  01 00 0B            		ld		bc,mapWidth*mapHeight
     144   00:453B  ED B0               		ldir
     145   00:453D                      				
     146   00:453D                      		; unpack mc frames
     147   00:453D                      		; ld		a, :_mc_sprites
     148   00:453D                      		; setpage_a
     149   00:453D                      		; xor	a
     150   00:453D                      		; ld		(_vbit16 ),a
     151   00:453D                      		; ld		de,	_mc_sprites
     152   00:453D                      		; ld		bc,192*128+256*128
     153   00:453D                      		; call	_vuitpakker 
     154   00:453D                      		
     155   00:453D                      		; di
     156   00:453D                      		; ld	a,:int_sprites
     157   00:453D                      		; ld	(_kBank2),a
     158   00:453D                      		; call	int_sprites
     159   00:453D                      		; ld	a,1
     160   00:453D                      		; ld	(_kBank2),a
     161   00:453D                      		; ei
     162   00:453D                      		
     163   00:453D                      		; main init
     164   00:453D                      		
     165   00:453D                      		; call	init_hero
     166   00:453D  FB                  		ei
     167   00:453E                      		
     168   00:453E  21 00 00            		ld		hl,0
     169   00:4541  7C                  		ld		a,h
     170   00:4542  32 F8 D3            		ld		(_ymappos),a
     171   00:4545  22 F9 D3            		ld		(_xmappos),hl
     172   00:4548                      		
     173   00:4548  22 F4 D3            		ld		(_nframes),hl
     174   00:454B  32 FF D3            		ld		(_currentpage),a
     175   00:454E  22 DB D3            		ld		(_mcdx),hl
     176   00:4551  32 D9 D3            		ld		(_mcframe),a
     177   00:4554                      		
     178   00:4554  32 03 D4            		ld		(_xoffset),a		;  0 tutto a destra
     179   00:4557                      									; 15 tutto a sinistra
     180   00:4557  32 04 D4            		ld		(_yoffset),a		;  0 tutto su
     181   00:455A                      
     182   00:455A  21 DD C2            		ld		hl,_levelmap+16
     183   00:455D  22 FB D3            		ld		(_levelmap_pos),hl
     184   00:4560                      									
     185   00:4560                      		; ld		a,1
     186   00:4560                      		; ld		(_displaypage),a		
     187   00:4560                      		; call	init_page1
     188   00:4560                      
     189   00:4560  AF                  		xor		a
     190   00:4561  32 00 D4            		ld		(_displaypage),a		
     191   00:4564  CD D6 48            		call	init_page0
     192   00:4567                      
     193   00:4567  AF                  		xor		a
     194   00:4568  32 01 D4            		ld		(_direction),a
     195   00:456B                      
     196   00:456B  CD 79 42            		call	_isrinit
     197   00:456E                      		
     198   00:456E                      main_loop:
     199   00:456E  21 00 00            		ld	hl,0
     200   00:4571  22 9E FC            		ld	(_jiffy),hl
     201   00:4574                      
     202   00:4574  21 92 45            		ld	hl,.nomove
     203   00:4577  E5                  		push	hl
     204   00:4578  1E 08               		ld	e,8
     205   00:457A  CD AD 43            		call	checkkbd
     206   00:457D                      
     207   00:457D  CB 7D               		bit	7,l
     208   00:457F  CA AB 45            		jp	z,test_move_right
     209   00:4582  CB 65               		bit	4,l
     210   00:4584  CA B6 45            		jp	z,test_move_left
     211   00:4587                      		
     212   00:4587  CB 75               		bit	6,l
     213   00:4589  CA C2 45            		jp	z,_dw
     214   00:458C  CB 6D               		bit	5,l
     215   00:458E  CA CD 45            		jp	z,_up
     216   00:4591                      		
     217   00:4591  E1                  		pop	hl				
     218   00:4592                      		
     219   00:4592                      .nomove:
     220   00:4592  CD B5 47            		call	_compute_fps
     221   00:4595  CD 98 47            		call	_print_fps
     222   00:4598  CD 53 47            		call	_print_probe
     223   00:459B                      		
     224   00:459B  2A F4 D3            		ld		hl,(_nframes)
     225   00:459E  23                  		inc		hl
     226   00:459F  22 F4 D3            		ld		(_nframes),hl
     227   00:45A2                      	
     228   00:45A2  3A 9E FC            1:		ld	a,(_jiffy)		; wait for vblank (and not for linit)
     229   00:45A5  B7                  		or	a
     230   00:45A6  28 FA               		jr	z,1b
     231   00:45A8                      	
     232   00:45A8  C3 6E 45            		jp      main_loop
     233   00:45AB                      
     234   00:45AB                      ;-------------------------------------
     235   00:45AB                      test_move_right:
     236   00:45AB  3A 03 D4            		ld		a,(_xoffset)
     237   00:45AE  A7                  		and		a
     238   00:45AF  C0                  		ret		nz
     239   00:45B0                      		
     240   00:45B0  3E 01               		ld		a,1
     241   00:45B2  32 01 D4            		ld		(_direction),a			; moving right
     242   00:45B5  C9                  		ret
     243   00:45B6                      test_move_left
     244   00:45B6  3A 03 D4            		ld		a,(_xoffset)
     245   00:45B9  FE 0F               		cp		15
     246   00:45BB  C0                  		ret		nz
     247   00:45BC                      		
     248   00:45BC  3E FF               		ld		a,-1
     249   00:45BE  32 01 D4            		ld		(_direction),a			; moving left
     250   00:45C1  C9                  		ret
     251   00:45C2                      ;-------------------------------------
     252   00:45C2                      
     253   00:45C2  3A 04 D4            _dw:	ld		a,(_yoffset)
     254   00:45C5  3C                  		inc		a
     255   00:45C6  FE 10               		cp		176-YSIZE
     256   00:45C8  F0                  		ret 	p
     257   00:45C9  32 04 D4            		ld		(_yoffset),a
     258   00:45CC  C9                  		ret
     259   00:45CD                      
     260   00:45CD                      		; ld		a,(_direction)
     261   00:45CD                      		; and		a
     262   00:45CD                      		; ret		z
     263   00:45CD                      		; ld		(_old_direction),a
     264   00:45CD                      		; xor		a
     265   00:45CD                      		; ld		(_direction),a
     266   00:45CD                      		; ret
     267   00:45CD                      		
     268   00:45CD  3A 04 D4            _up:	ld		a,(_yoffset)
     269   00:45D0  3D                  		dec		a
     270   00:45D1  F8                  		ret		m
     271   00:45D2  32 04 D4            		ld		(_yoffset),a
     272   00:45D5  C9                  		ret
     273   00:45D6                      
     274   00:45D6                      		; ld		a,(_old_direction)
     275   00:45D6                      		; and		a
     276   00:45D6                      		; ret		z
     277   00:45D6                      		; ld		(_direction),a
     278   00:45D6                      		; ret
     279   00:45D6                      ;-------------------------------------		
     280   00:45D6  (00:0000)           border_color	equ 	0;	00100101B
     281   00:45D6                      		
     282   00:45D6                      inc_xoffset
     283   00:45D6  CD E8 47            		call	blank_line_lft
     284   00:45D9  CD 26 48            		call	plot_line_rgt
     285   00:45DC                      
     286   00:45DC  3A 03 D4            		ld		a,(_xoffset)
     287   00:45DF  A7                  		and		a
     288   00:45E0  20 0F               		jr		nz,.case1_15
     289   00:45E2                      .case0
     290   00:45E2  3A 00 D4            		ld 		a,(_displaypage)
     291   00:45E5  EE 01               		xor		1
     292   00:45E7  57                  		ld 		d,a
     293   00:45E8  1E F0               		ld		e,240
     294   00:45EA  2E 00               		ld		l,border_color
     295   00:45EC  CD 32 49            		call	clrboder
     296   00:45EF  18 0B               		jr	.cont
     297   00:45F1                      .case1_15
     298   00:45F1  87 87 87 87         [4]		add		a,a
     299   00:45F5  5F                  		ld		e,a
     300   00:45F6  D6 10               		sub		a,16
     301   00:45F8  57                  		ld		d,a
     302   00:45F9  CD 63 49            		call	move_block
     303   00:45FC                      .cont
     304   00:45FC  3A 03 D4            		ld		a,(_xoffset)
     305   00:45FF  3C                  		inc	a
     306   00:4600  E6 0F               		and	15
     307   00:4602  32 03 D4            		ld		(_xoffset),a
     308   00:4605  C0                  		ret	nz
     309   00:4606  3A 00 D4            		ld		a,(_displaypage)
     310   00:4609  EE 01               		xor		1
     311   00:460B  32 00 D4            		ld		(_displaypage),a
     312   00:460E  2A FB D3            		ld		hl,(_levelmap_pos)
     313   00:4611  23                  		inc		hl
     314   00:4612  22 FB D3            		ld		(_levelmap_pos),hl
     315   00:4615  C9                  		ret
     316   00:4616                      dec_xoffset
     317   00:4616  CD E3 47            		call	blank_line_rgt
     318   00:4619  CD 1E 48            		call	plot_line_lft
     319   00:461C  3A 03 D4            		ld		a,(_xoffset)
     320   00:461F  FE 0F               		cp	15
     321   00:4621  20 0F               		jr		nz,.case0_14
     322   00:4623                      .case15
     323   00:4623  3A 00 D4            		ld 		a,(_displaypage)
     324   00:4626  EE 01               		xor		1
     325   00:4628  57                  		ld 		d,a
     326   00:4629  1E 00               		ld		e,0
     327   00:462B  2E 00               		ld		l,border_color
     328   00:462D  CD 32 49            		call	clrboder
     329   00:4630  18 0B               		jr	.cont
     330   00:4632                      .case0_14
     331   00:4632  87 87 87 87         [4]		add		a,a
     332   00:4636  5F                  		ld		e,a
     333   00:4637  C6 10               		add		a,16
     334   00:4639  57                  		ld		d,a
     335   00:463A  CD 63 49            		call	move_block
     336   00:463D                      .cont	
     337   00:463D  3A 03 D4            		ld		a,(_xoffset)
     338   00:4640  3D                  		dec	a
     339   00:4641  E6 0F               		and	15
     340   00:4643  32 03 D4            		ld		(_xoffset),a
     341   00:4646  FE 0F               		cp	15
     342   00:4648  C0                  		ret	nz
     343   00:4649  3A 00 D4            		ld		a,(_displaypage)
     344   00:464C  EE 01               		xor		1
     345   00:464E  32 00 D4            		ld		(_displaypage),a
     346   00:4651  2A FB D3            		ld		hl,(_levelmap_pos)
     347   00:4654  2B                  		dec		hl
     348   00:4655  22 FB D3            		ld		(_levelmap_pos),hl
     349   00:4658  C9                  		ret
     350   00:4659                      ;-------------------------------------
     351   00:4659                      AFXPLAY:
     352   00:4659  C9                  		ret
     353   00:465A                      	include vuitpakker.asm
       1.  00:465A                      
       2.  00:465A                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       3.  00:465A                      
       4.  00:465A                      
       5.  00:465A                      _vuitpakker:
       6.  00:465A  FD E5                   push iy
       7.  00:465C  DD E5                   push ix
       8.  00:465E                      
       9.  00:465E  CD 66 46                call  1f
      10.  00:4661                      
      11.  00:4661  DD E1                   pop ix
      12.  00:4663  FD E1                   pop iy
      13.  00:4665  C9                      ret
      14.  00:4666                      
      15.  00:4666                      1:
      16.  00:4666                      ; in de input
      17.  00:4666                      ; in bc VRAM output
      18.  00:4666                      
      19.  00:4666  62                      ld h,d
      20.  00:4667  6B                      ld l,e
      21.  00:4668  50                      ld d,b
      22.  00:4669  59                      ld e,c
      23.  00:466A                      
      24.  00:466A                      ; pletter v0.5 msx unpacker
      25.  00:466A                      
      26.  00:466A                      ;-----------------------------------------------------------
      27.  00:466A                      ; Pletter 0.5b VRAM Depacker - 64Kb version
      28.  00:466A                      ; HL = RAM/ROM source ; DE = VRAM destination
      29.  00:466A                      ;-----------------------------------------------------------
      30.  00:466A  F3                      di
      31.  00:466B                      
      32.  00:466B                      ; VRAM address setup
      33.  00:466B                      ;    ld  a,e
      34.  00:466B                      ;    out (0x99),a
      35.  00:466B                      ;    ld  a,d
      36.  00:466B                      ;    or  0x40
      37.  00:466B                      ;    out (0x99),a
      38.  00:466B  CD 2B 47                call setVwrite
      39.  00:466E                      
      40.  00:466E                      ; Initialization
      41.  00:466E  7E                      ld  a,(hl)
      42.  00:466F  23                      inc hl
      43.  00:4670  D9                      exx
      44.  00:4671  11 00 00                ld  de,0
      45.  00:4674  87                      add a,a
      46.  00:4675  3C                      inc a
      47.  00:4676  CB 13                   rl  e
      48.  00:4678  87                      add a,a
      49.  00:4679  CB 13                   rl  e
      50.  00:467B  87                      add a,a
      51.  00:467C  CB 13                   rl  e
      52.  00:467E  CB 13                   rl  e
      53.  00:4680  21 45 47                ld  hl,__modes
      54.  00:4683  19                      add hl,de
      55.  00:4684  5E                      ld  e,(hl)
      56.  00:4685  DD                      db    0xdd
      57.  00:4686  6B                      ld  l,e         ; ld ixl,e    
      58.  00:4687  23                      inc hl
      59.  00:4688  5E                      ld  e,(hl)
      60.  00:4689  DD                      db    0xdd
      61.  00:468A  63                      ld h,e          ; ld  ixh,e
      62.  00:468B  1E 01                   ld  e,1
      63.  00:468D  D9                      exx
      64.  00:468E  FD 21 97 46             ld  iy,__loop
      65.  00:4692                      
      66.  00:4692                      ; Main depack loop
      67.  00:4692  0E 98               _literal:ld  c,098h
      68.  00:4694  ED A3                   outi
      69.  00:4696  13                      inc de
      70.  00:4697  87                  __loop:   add a,a
      71.  00:4698  CC 1F 47                call    z,_getbit
      72.  00:469B  30 F5                   jr  nc,_literal
      73.  00:469D                      
      74.  00:469D                      ; Compressed data
      75.  00:469D  D9                      exx
      76.  00:469E  62                      ld  h,d
      77.  00:469F  6B                      ld  l,e
      78.  00:46A0  87                  _getlen: add a,a
      79.  00:46A1  CC 23 47                call    z,_getbitexx
      80.  00:46A4  30 1D                   jr  nc,lenok
      81.  00:46A6  87                  lus:    add a,a
      82.  00:46A7  CC 23 47                call    z,_getbitexx
      83.  00:46AA  ED 6A                   adc hl,hl
      84.  00:46AC  D8                      ret c
      85.  00:46AD  87                      add a,a
      86.  00:46AE  CC 23 47                call    z,_getbitexx
      87.  00:46B1  30 10                   jr  nc,lenok
      88.  00:46B3  87                      add a,a
      89.  00:46B4  CC 23 47                call    z,_getbitexx
      90.  00:46B7  ED 6A                   adc hl,hl
      91.  00:46B9  DA 29 47                jp  c,Depack_out
      92.  00:46BC  87                      add a,a
      93.  00:46BD  CC 23 47                call    z,_getbitexx
      94.  00:46C0  DA A6 46                jp  c,lus
      95.  00:46C3  23                  lenok:  inc hl
      96.  00:46C4  D9                      exx
      97.  00:46C5  4E                      ld  c,(hl)
      98.  00:46C6  23                      inc hl
      99.  00:46C7  06 00                   ld  b,0
     100.  00:46C9  CB 79                   bit 7,c
     101.  00:46CB  CA FE 46                jp  z,offsok
     102.  00:46CE  DD E9                   jp  (ix)
     103.  00:46D0                      
     104.  00:46D0  87                  _mode7:  add a,a
     105.  00:46D1  CC 1F 47                call    z,_getbit
     106.  00:46D4  CB 10                   rl  b
     107.  00:46D6  87                  _mode6:  add a,a
     108.  00:46D7  CC 1F 47                call    z,_getbit
     109.  00:46DA  CB 10                   rl  b
     110.  00:46DC  87                  _mode5:  add a,a
     111.  00:46DD  CC 1F 47                call    z,_getbit
     112.  00:46E0  CB 10                   rl  b
     113.  00:46E2  87                  _mode4:  add a,a
     114.  00:46E3  CC 1F 47                call    z,_getbit
     115.  00:46E6  CB 10                   rl  b
     116.  00:46E8  87                  _mode3:  add a,a
     117.  00:46E9  CC 1F 47                call    z,_getbit
     118.  00:46EC  CB 10                   rl  b
     119.  00:46EE  87                  _mode2:  add a,a
     120.  00:46EF  CC 1F 47                call    z,_getbit
     121.  00:46F2  CB 10                   rl  b
     122.  00:46F4  87                      add a,a
     123.  00:46F5  CC 1F 47                call    z,_getbit
     124.  00:46F8  30 04                   jr  nc,offsok
     125.  00:46FA  B7                      or  a
     126.  00:46FB  04                      inc b
     127.  00:46FC  CB B9                   res 7,c
     128.  00:46FE  03                  offsok: inc bc
     129.  00:46FF  E5                      push    hl
     130.  00:4700  D9                      exx
     131.  00:4701  E5                      push    hl
     132.  00:4702  D9                      exx
     133.  00:4703  6B                      ld  l,e
     134.  00:4704  62                      ld  h,d
     135.  00:4705  ED 42                   sbc hl,bc
     136.  00:4707  C1                      pop bc
     137.  00:4708  F5                      push    af
     138.  00:4709                      _loop: 
     139.  00:4709                      ;    ld  a,l
     140.  00:4709                      ;    out (0x99),a
     141.  00:4709                      ;    ld  a,h
     142.  00:4709                      ;    out (0x99),a
     143.  00:4709  CD 37 47                call setVread
     144.  00:470C                          
     145.  00:470C  DB 98                   in  a,(0x98)
     146.  00:470E  08                      ex  af,af'
     147.  00:470F                      ;    ld  a,e
     148.  00:470F                      ;    out (0x99),a
     149.  00:470F                      ;    ld  a,d
     150.  00:470F                      ;    or  0x40
     151.  00:470F                      ;    out (0x99),a
     152.  00:470F  CD 2B 47                call setVwrite
     153.  00:4712                          
     154.  00:4712  08                      ex  af,af'
     155.  00:4713  D3 98                   out (0x98),a
     156.  00:4715  13                      inc de
     157.  00:4716  ED A1                   cpi
     158.  00:4718  EA 09 47                jp  pe,_loop
     159.  00:471B  F1                      pop af
     160.  00:471C  E1                      pop hl
     161.  00:471D  FD E9                   jp  (iy)
     162.  00:471F                      ;
     163.  00:471F  7E                  _getbit: ld  a,(hl)
     164.  00:4720  23                      inc hl
     165.  00:4721  17                      rla
     166.  00:4722  C9                      ret
     167.  00:4723                      
     168.  00:4723                      _getbitexx:
     169.  00:4723  D9                      exx
     170.  00:4724  7E                      ld  a,(hl)
     171.  00:4725  23                      inc hl
     172.  00:4726  D9                      exx
     173.  00:4727  17                      rla
     174.  00:4728  C9                      ret
     175.  00:4729                      
     176.  00:4729                      ; De-packer exit
     177.  00:4729                      Depack_out:
     178.  00:4729  FB                      ei
     179.  00:472A  C9                      ret
     180.  00:472B                      
     181.  00:472B                      
     182.  00:472B                      
     183.  00:472B                      setVwrite:
     184.  00:472B                      
     185.  00:472B  D5                      push    de
     186.  00:472C  C5                      push    bc
     187.  00:472D  ED 4B F6 D3             ld      bc,(_vbit16)
     188.  00:4731  CD A8 41                call    _vdpsetvramwr
     189.  00:4734  C1                      pop     bc
     190.  00:4735  D1                      pop     de
     191.  00:4736                      
     192.  00:4736  C9                      ret
     193.  00:4737                      setVread:    
     194.  00:4737                      
     195.  00:4737  D5                      push    de
     196.  00:4738  C5                      push    bc
     197.  00:4739  5D                      ld      e,l
     198.  00:473A  54                      ld      d,h
     199.  00:473B  ED 4B F6 D3             ld      bc,(_vbit16)
     200.  00:473F  CD C2 41                call    _vdpsetvramrd
     201.  00:4742  C1                      pop     bc
     202.  00:4743  D1                      pop     de
     203.  00:4744                      
     204.  00:4744  C9                      ret
     205.  00:4745                      
     206.  00:4745                      __modes:
     207.  00:4745  FE 46                   dw  offsok
     208.  00:4747  EE 46                   dw  _mode2
     209.  00:4749  E8 46                   dw  _mode3
     210.  00:474B  E2 46                   dw  _mode4
     211.  00:474D  DC 46                   dw  _mode5
     212.  00:474F  D6 46                   dw  _mode6
     213.  00:4751  D0 46                   dw  _mode7
     354   00:4753                      	include print.asm
       1.  00:4753                      
       2.  00:4753                      	
       3.  00:4753                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       4.  00:4753                      
       5.  00:4753                      _print_probe
       6.  00:4753  3A E0 D3            	ld	a,(_mcprobeb)
       7.  00:4756  5F                  	ld	e,a
       8.  00:4757  16 00               	ld	d,0
       9.  00:4759  21 C0 07            	ld	hl,32*(64-2)
      10.  00:475C  19                  	add	hl,de
      11.  00:475D  EB                  	ex	de,hl
      12.  00:475E  21 C0 05            	ld	hl,2*(23*32+0)
      13.  00:4761                      	; call 	plot_foreground
      14.  00:4761                      	
      15.  00:4761  ED 5B E1 D3         	ld	de,(_ticxframe)
      16.  00:4765  16 00               	ld	d,0
      17.  00:4767  01 E2 D3            	ld	bc,_buffer
      18.  00:476A  CD BC 47            	call	int2ascii
      19.  00:476D                      	
      20.  00:476D  3A E4 D3            	ld	a,(_buffer+2)
      21.  00:4770  5F                  	ld	e,a
      22.  00:4771  16 00               	ld	d,0
      23.  00:4773  21 90 07            	ld	hl,32*(64-2)-'0'
      24.  00:4776  19                  	add	hl,de
      25.  00:4777  EB                  	ex	de,hl
      26.  00:4778  21 80 05            	ld	hl,2*(22*32)
      27.  00:477B                      	; call 	plot_foreground
      28.  00:477B                      
      29.  00:477B  3A E5 D3            	ld	a,(_buffer+3)
      30.  00:477E  5F                  	ld	e,a
      31.  00:477F  16 00               	ld	d,0
      32.  00:4781  21 90 07            	ld	hl,32*(64-2)-'0'
      33.  00:4784  19                  	add	hl,de
      34.  00:4785  EB                  	ex	de,hl
      35.  00:4786  21 82 05            	ld	hl,2*(22*32+1)
      36.  00:4789                      	; call 	plot_foreground
      37.  00:4789                      
      38.  00:4789  3A E6 D3            	ld	a,(_buffer+4)
      39.  00:478C  5F                  	ld	e,a
      40.  00:478D  16 00               	ld	d,0
      41.  00:478F  21 90 07            	ld	hl,32*(64-2)-'0'
      42.  00:4792  19                  	add	hl,de
      43.  00:4793  EB                  	ex	de,hl
      44.  00:4794  21 84 05            	ld	hl,2*(22*32+2)
      45.  00:4797                      	; call 	plot_foreground
      46.  00:4797  C9                  	ret
      47.  00:4798                      	
      48.  00:4798                      	
      49.  00:4798                      _print_fps:
      50.  00:4798  3A E5 D3            	ld	a,(_buffer+3)
      51.  00:479B  5F                  	ld	e,a
      52.  00:479C  16 00               	ld	d,0
      53.  00:479E  21 90 07            	ld	hl,32*(64-2)-'0'
      54.  00:47A1  19                  	add	hl,de
      55.  00:47A2  EB                  	ex	de,hl
      56.  00:47A3                      	
      57.  00:47A3  21 FC 05            	ld	hl,2*(23*32+30)
      58.  00:47A6                      	; call 	plot_foreground
      59.  00:47A6                      
      60.  00:47A6  3A E6 D3            	ld	a,(_buffer+4)
      61.  00:47A9  5F                  	ld	e,a
      62.  00:47AA  16 00               	ld	d,0
      63.  00:47AC  21 90 07            	ld	hl,32*(64-2)-'0'
      64.  00:47AF  19                  	add	hl,de
      65.  00:47B0  EB                  	ex	de,hl
      66.  00:47B1                      	
      67.  00:47B1  21 FE 05            	ld	hl,2*(23*32+31)
      68.  00:47B4                      	; call 	plot_foreground
      69.  00:47B4  C9                  	ret
      70.  00:47B5                      
      71.  00:47B5                      ;-------------------------------------
      72.  00:47B5                      _compute_fps:
      73.  00:47B5  ED 5B F2 D3         	ld	de,(_fps)
      74.  00:47B9  01 E2 D3            	ld	bc,_buffer
      75.  00:47BC                      
      76.  00:47BC                      int2ascii:
      77.  00:47BC                      	
      78.  00:47BC                      ; in de input 
      79.  00:47BC                      ; in bc output
      80.  00:47BC                      
      81.  00:47BC  EB                  	ex  de,hl
      82.  00:47BD  59                  	ld  e,c
      83.  00:47BE  50                  	ld  d,b
      84.  00:47BF                      
      85.  00:47BF                      Num2asc:
      86.  00:47BF  01 F0 D8            	ld  bc,-10000
      87.  00:47C2  CD D8 47            	call    Num1
      88.  00:47C5  01 18 FC            	ld  bc,-1000
      89.  00:47C8  CD D8 47            	call    Num1
      90.  00:47CB  01 9C FF            	ld  bc,-100
      91.  00:47CE  CD D8 47            	call    Num1
      92.  00:47D1  0E F6               	ld  c,-10
      93.  00:47D3  CD D8 47            	call    Num1
      94.  00:47D6  0E FF               	ld  c,-1
      95.  00:47D8                      
      96.  00:47D8                      Num1:   
      97.  00:47D8  3E 2F               	ld  a,'0'-1  ; '0' in the tileset
      98.  00:47DA                      
      99.  00:47DA                      Num2:   
     100.  00:47DA  3C                  	inc a
     101.  00:47DB  09                  	add hl,bc
     102.  00:47DC  38 FC               	jr  c,Num2
     103.  00:47DE  ED 42               	sbc hl,bc
     104.  00:47E0                      
     105.  00:47E0  12                  	ld  (de),a
     106.  00:47E1  13                  	inc de
     107.  00:47E2  C9                  	ret
     355   00:47E3                      	include plot_line.asm
       1.  00:47E3                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       2.  00:47E3                      ; no input
       3.  00:47E3                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
       4.  00:47E3                      blank_line_rgt:
       5.  00:47E3  1E F0               	ld	e,240
       6.  00:47E5  C3 EA 47            	jp	blank_line
       7.  00:47E8                      blank_line_lft:
       8.  00:47E8  1E 00               	ld	e,0
       9.  00:47EA                      blank_line:
      10.  00:47EA  F3                  	di
      11.  00:47EB  3E 24               	ld 		a, 36
      12.  00:47ED  D3 99               	out 	(0x99),a
      13.  00:47EF  3E 91               	ld 		a, 17+128
      14.  00:47F1  D3 99               	out 	(0x99),a
      15.  00:47F3  FB                  	ei
      16.  00:47F4                      	
      17.  00:47F4  CD 38 42            	call _waitvdp
      18.  00:47F7                      	
      19.  00:47F7  3A 03 D4            	ld		a,(_xoffset)
      20.  00:47FA  83                  	add		a,e
      21.  00:47FB  D3 9B               	out 	(0x9B), a 			; dx
      22.  00:47FD  AF                  	xor a
      23.  00:47FE  D3 9B               	out 	(0x9B), a			; dx (high)
      24.  00:4800                      	
      25.  00:4800  D3 9B               	out 	(0x9B), a			; dy
      26.  00:4802  3A 00 D4            	ld 		a,(_displaypage)	; destination page
      27.  00:4805  D3 9B               	out 	(0x9B), a			; dy (high-> page 0 or 1)
      28.  00:4807                      	
      29.  00:4807  3E 01               	ld		a,1
      30.  00:4809  D3 9B               	out 	(0x9B), a			; x block size
      31.  00:480B  AF                  	xor a
      32.  00:480C  D3 9B               	out 	(0x9B), a
      33.  00:480E                      
      34.  00:480E  3E B0               	ld		a,11*16
      35.  00:4810  D3 9B               	out 	(0x9B), a			; y block size
      36.  00:4812  AF                  	xor a
      37.  00:4813  D3 9B               	out 	(0x9B), a
      38.  00:4815                      
      39.  00:4815  D3 9B               	out 	(0x9B), a			; color
      40.  00:4817  D3 9B               	out 	(0x9B), a
      41.  00:4819                      
      42.  00:4819  3E C0               	ld		a,11000000B
      43.  00:481B  D3 9B               	out 	(0x9B), a		; command LMMM
      44.  00:481D  C9                  	ret
      45.  00:481E                      
      46.  00:481E                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      47.  00:481E                      ; input
      48.  00:481E                      ; e = x configured in 0-255
      49.  00:481E                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      50.  00:481E                      plot_line_lft:
      51.  00:481E  2A FB D3            	ld	hl,(_levelmap_pos)
      52.  00:4821  1E 00               	ld	e,0
      53.  00:4823  C3 2F 48            	jp plot_line
      54.  00:4826                      plot_line_rgt:
      55.  00:4826  2A FB D3            	ld	hl,(_levelmap_pos)
      56.  00:4829  11 0F 00            	ld	de,15
      57.  00:482C  19                  	add	hl,de
      58.  00:482D  1E F0               	ld	e,240
      59.  00:482F                      plot_line:		
      60.  00:482F  16 00               	ld	d,0
      61.  00:4831  3A 03 D4            	ld	a,(_xoffset)
      62.  00:4834  83                  	add a,e
      63.  00:4835  5F                  	ld	e,a		; de = y*256+x
      64.  00:4836                      	
      65.  00:4836                      111:
      66.  00:4836  7E                  	ld	a,(hl)
      67.  00:4837  D5                  	push	de
      68.  00:4838  E5                  	push	hl
      69.  00:4839                      	
      70.  00:4839  4F                  	ld	c,a
      71.  00:483A  0F 0F 0F 0F 0F      [5]	rrca
      72.  00:483F  E6 07               	and	00000111B
      73.  00:4841  C6 04               	add	a,:_tiles0
      74.  00:4843  32 00 B0            	ld	(_kBank4),a
      75.  00:4846  79                  	ld	a,c
      76.  00:4847  E6 1F               	and	00011111B
      77.  00:4849  C6 A0               	add	a,high _tiles0
      78.  00:484B  67                  	ld	h,a
      79.  00:484C  3A 03 D4            	ld	a,(_xoffset)
      80.  00:484F  87 87 87 87         [4]	add	a,a
      81.  00:4853  6F                  	ld	l,a
      82.  00:4854                      	
      83.  00:4854  3A 00 D4            	ld	a,(_displaypage)
      84.  00:4857  CB 02               	rlc d			; set VDP for writing at address ADE (17-bit) ;
      85.  00:4859  17                  	rla
      86.  00:485A  CB 02               	rlc d
      87.  00:485C  17                  	rla
      88.  00:485D  CB 3A               	srl d 			; first shift
      89.  00:485F  F3                  	di
      90.  00:4860  D3 99               	out (0x99),a 	; set bits 14-16
      91.  00:4862  3E 8E               	ld a,14+128
      92.  00:4864  D3 99               	out (0x99),a
      93.  00:4866  FB                  	ei
      94.  00:4867  CB 3A               	srl d 			; second shift    
      95.  00:4869  CB F2               	set 6,d			; write access
      96.  00:486B                      	
      97.  00:486B  01 98 10            	ld	bc,16*256+0x98
      98.  00:486E                      
      99.  00:486E  F3                  1:	di
     100.  00:486F  7B                  	ld a,e 		;set bits 0-7
     101.  00:4870  D3 99               	out (0x99),a
     102.  00:4872  7A                  	ld a,d 		;set bits 8-13
     103.  00:4873  D3 99               	out (0x99),a
     104.  00:4875  FB                  	ei
     105.  00:4876  14                  	inc	d
     106.  00:4877  ED A3               	outi
     107.  00:4879  20 F3               	jr	nz,1b
     108.  00:487B                      	
     109.  00:487B  E1                  	pop	hl
     110.  00:487C  11 00 01            	ld	de,mapWidth
     111.  00:487F  19                  	add	hl,de
     112.  00:4880  D1                  	pop	de
     113.  00:4881  7A                  	ld	a,d
     114.  00:4882  C6 10               	add	a,16
     115.  00:4884  57                  	ld	d,a
     116.  00:4885  FE B0               	cp	11*16
     117.  00:4887  38 AD               	jr	c,111b
     118.  00:4889  C9                  	ret
     119.  00:488A                      	
     120.  00:488A                      
     121.  00:488A                      
     122.  00:488A                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     123.  00:488A                      ; input
     124.  00:488A                      ; de = y,x configured in window map 256x256
     125.  00:488A                      ; a  tile to be plot
     126.  00:488A                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     127.  00:488A                      plot_tile:
     128.  00:488A  D5                  		push	de
     129.  00:488B  D9                  		exx
     130.  00:488C  D1                  		pop		de
     131.  00:488D                      		
     132.  00:488D  67                  		ld	h,a
     133.  00:488E  0F 0F 0F 0F 0F      [5]		rrca
     134.  00:4893  E6 07               		and	00000111B
     135.  00:4895  C6 04               		add	a,:_tiles0
     136.  00:4897  32 00 B0            		ld	(_kBank4),a
     137.  00:489A  7C                  		ld	a,h
     138.  00:489B  E6 1F               		and	00011111B
     139.  00:489D  C6 A0               		add	a,high _tiles0
     140.  00:489F  67                  		ld	h,a
     141.  00:48A0  2E 00               		ld	l,0
     142.  00:48A2                      
     143.  00:48A2  3A 00 D4            		ld	a,(_displaypage)
     144.  00:48A5                      					; de = y*256+x
     145.  00:48A5  CB 02               		rlc d		; set VDP for writing at address ADE (17-bit) ;
     146.  00:48A7  17                  		rla
     147.  00:48A8  CB 02               		rlc d
     148.  00:48AA  17                  		rla
     149.  00:48AB  CB 3A               		srl d 		 ; first shift
     150.  00:48AD  F3                  		di
     151.  00:48AE  D3 99               		out (0x99),a ; set bits 14-16
     152.  00:48B0  3E 8E               		ld a,14+128
     153.  00:48B2  D3 99               		out (0x99),a
     154.  00:48B4  FB                  		ei
     155.  00:48B5  CB 3A               		srl d 		 ;  second shift.     
     156.  00:48B7  CB F2               		set 6,d		 ;  write access
     157.  00:48B9                      
     158.  00:48B9  01 98 10            		ld	bc,16*256+0x98
     159.  00:48BC                      	
     160.  00:48BC  C5                  2:		push	bc
     161.  00:48BD  06 10               		ld	b,16
     162.  00:48BF                      
     163.  00:48BF  F3                  1:		di
     164.  00:48C0  7B                  		ld a,e 		;set bits 0-7
     165.  00:48C1  D3 99               		out (0x99),a
     166.  00:48C3  7A                  		ld a,d 		;set bits 8-13
     167.  00:48C4  D3 99               		out (0x99),a
     168.  00:48C6  FB                  		ei
     169.  00:48C7  14                  		inc	d
     170.  00:48C8  ED A3               		outi
     171.  00:48CA  20 F3               		jr nz,1b
     172.  00:48CC  3E F0               		ld	a,-16
     173.  00:48CE  82                  		add	a,d
     174.  00:48CF  57                  		ld	d,a
     175.  00:48D0  1C                  		inc	e
     176.  00:48D1  C1                  		pop	bc
     177.  00:48D2  10 E8               		djnz 2b
     178.  00:48D4  D9                  		exx
     179.  00:48D5  C9                  		ret
     180.  00:48D6                      
     181.  00:48D6                      init_page0:
     182.  00:48D6  3A 00 D4            		ld		a,(_displaypage)
     183.  00:48D9  57                  		ld		d,a
     184.  00:48DA  1E F0               		ld		e,240
     185.  00:48DC  2E 00               		ld		l,border_color
     186.  00:48DE  CD 32 49            		call	clrboder
     187.  00:48E1  2A FB D3            		ld		hl,(_levelmap_pos)
     188.  00:48E4  11 00 00            		ld		de,0x0000			; e=x=0, d=y=0
     189.  00:48E7                      		
     190.  00:48E7  06 0B               		ld		b,11
     191.  00:48E9  C5                  2:		push	bc
     192.  00:48EA  06 0F               		ld		b,15
     193.  00:48EC  7E                  1:		ld		a,(hl)
     194.  00:48ED  CD 8A 48            		call 	plot_tile
     195.  00:48F0  23                  		inc		hl
     196.  00:48F1  3E 10               		ld	a,16
     197.  00:48F3  83                  		add	a,e
     198.  00:48F4  5F                  		ld	e,a
     199.  00:48F5  10 F5               		djnz	1b
     200.  00:48F7                      				
     201.  00:48F7  58                  		ld	e,b
     202.  00:48F8  3E 10               		ld	a,16
     203.  00:48FA  82                  		add	a,d
     204.  00:48FB  57                  		ld	d,a
     205.  00:48FC  01 F1 00            		ld	bc,mapWidth-15
     206.  00:48FF  09                  		add	hl,bc
     207.  00:4900  C1                  		pop	bc
     208.  00:4901  10 E6               		djnz	2b
     209.  00:4903  C9                  		ret
     210.  00:4904                      		
     211.  00:4904                      init_page1:
     212.  00:4904  3A 00 D4            		ld		a,(_displaypage)
     213.  00:4907  57                  		ld		d,a
     214.  00:4908  1E 00               		ld		e,0
     215.  00:490A  2E 00               		ld		l,border_color
     216.  00:490C  CD 32 49            		call	clrboder
     217.  00:490F  2A FB D3            		ld		hl,(_levelmap_pos)
     218.  00:4912  11 10 00            		ld		de,0x0010			; e=x=16, d=y=0
     219.  00:4915                      		
     220.  00:4915  06 0B               		ld		b,11
     221.  00:4917  C5                  2:		push	bc
     222.  00:4918  06 0F               		ld		b,15
     223.  00:491A  7E                  1:		ld		a,(hl)
     224.  00:491B  CD 8A 48            		call 	plot_tile
     225.  00:491E  23                  		inc		hl
     226.  00:491F  3E 10               		ld	a,16
     227.  00:4921  83                  		add	a,e
     228.  00:4922  5F                  		ld	e,a
     229.  00:4923  10 F5               		djnz	1b
     230.  00:4925                      		
     231.  00:4925  1E 10               		ld	e,0x10
     232.  00:4927  7B                  		ld	a,e
     233.  00:4928  82                  		add	a,d
     234.  00:4929  57                  		ld	d,a
     235.  00:492A  01 F1 00            		ld	bc,mapWidth-15
     236.  00:492D  09                  		add	hl,bc
     237.  00:492E  C1                  		pop	bc
     238.  00:492F  10 E6               		djnz	2b
     239.  00:4931  C9                  		ret
     240.  00:4932                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     241.  00:4932                      ; input
     242.  00:4932                      ; d = page
     243.  00:4932                      ; e = dx
     244.  00:4932                      ; l = background color
     245.  00:4932                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     246.  00:4932                      		
     247.  00:4932                      clrboder:
     248.  00:4932  F3                  	di
     249.  00:4933  3E 24               	ld 		a, 36
     250.  00:4935  D3 99               	out 	(0x99),a
     251.  00:4937  3E 91               	ld 		a, 17+128
     252.  00:4939  D3 99               	out 	(0x99),a
     253.  00:493B  FB                  	ei
     254.  00:493C                      	
     255.  00:493C  CD 38 42            	call _waitvdp
     256.  00:493F                      	
     257.  00:493F  7B                  	ld		a,e
     258.  00:4940  D3 9B               	out 	(0x9B), a 			; dx
     259.  00:4942  AF                  	xor		a
     260.  00:4943  D3 9B               	out 	(0x9B), a			; dx (high)
     261.  00:4945                      	
     262.  00:4945  D3 9B               	out 	(0x9B), a			; dy
     263.  00:4947  7A                  	ld 		a,d					; destination page
     264.  00:4948  D3 9B               	out 	(0x9B), a			; dy (high-> page 0 or 1)
     265.  00:494A                      	
     266.  00:494A  3E 10               	ld a,16
     267.  00:494C  D3 9B               	out 	(0x9B), a			; x block size
     268.  00:494E  AF                  	xor	a
     269.  00:494F  D3 9B               	out 	(0x9B), a
     270.  00:4951                      
     271.  00:4951  3E B0               	ld		a,11*16
     272.  00:4953  D3 9B               	out 	(0x9B), a			; y block size
     273.  00:4955  AF                  	xor a
     274.  00:4956  D3 9B               	out 	(0x9B), a
     275.  00:4958                      
     276.  00:4958  7D                  	ld		a,l
     277.  00:4959  D3 9B               	out 	(0x9B), a			; color
     278.  00:495B  AF                  	xor a
     279.  00:495C  D3 9B               	out 	(0x9B), a
     280.  00:495E                      
     281.  00:495E  3E C0               	ld		a,11000000B
     282.  00:4960  D3 9B               	out 	(0x9B), a		; command LMMM
     283.  00:4962  C9                  	ret
     284.  00:4963                      
     285.  00:4963                      move_block:
     286.  00:4963                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     287.  00:4963                      ; input
     288.  00:4963                      ; e = sx	from not _displaypage
     289.  00:4963                      ; d = dx	to _displaypage
     290.  00:4963                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     291.  00:4963                      
     292.  00:4963  F3                  	di
     293.  00:4964  3E 20               	ld 		a, 32
     294.  00:4966  D3 99               	out 	(0x99),a
     295.  00:4968  3E 91               	ld 		a, 17+128
     296.  00:496A  D3 99               	out 	(0x99),a
     297.  00:496C  FB                  	ei
     298.  00:496D                      
     299.  00:496D  0E 9B               	ld 		c, 0x9B
     300.  00:496F                      	
     301.  00:496F  CD 38 42            	call _waitvdp;
     302.  00:4972                      	
     303.  00:4972  ED 59               	out		(c), e 		; sx
     304.  00:4974  AF                  	xor a
     305.  00:4975  D3 9B               	out		(0x9B), a 	; sx (high)
     306.  00:4977                      	
     307.  00:4977  D3 9B               	out		(0x9B), a 	; sy
     308.  00:4979  3A 00 D4            	ld 		a,(_displaypage)	; source page
     309.  00:497C  D3 9B               	out 	(0x9B), a 	; sy 	(high-> page 0 or 1)
     310.  00:497E                      
     311.  00:497E  ED 51               	out 	(c), d 		; dx
     312.  00:4980  AF                  	xor a
     313.  00:4981  D3 9B               	out 	(0x9B), a	; dx (high)
     314.  00:4983                      	
     315.  00:4983  D3 9B               	out 	(0x9B), a 		; dy
     316.  00:4985  3A 00 D4            	ld 		a,(_displaypage)	; destination page
     317.  00:4988  EE 01               	xor	1				
     318.  00:498A  D3 9B               	out 	(0x9B), a	; dy 	(high-> page 0 or 1)
     319.  00:498C                      
     320.  00:498C  3E 10               	ld 		a,16 		; block size
     321.  00:498E  D3 9B               	out 	(0x9B), a
     322.  00:4990  AF                  	xor a
     323.  00:4991  D3 9B               	out 	(0x9B), a	
     324.  00:4993  3E B0               	ld		a,11*16
     325.  00:4995  D3 9B               	out 	(0x9B), a
     326.  00:4997  AF                  	xor		a
     327.  00:4998  D3 9B               	out 	(0x9B), a
     328.  00:499A  D3 9B               	out 	(0x9B), a
     329.  00:499C  D3 9B               	out 	(0x9B), a
     330.  00:499E                      
     331.  00:499E  3E D0               	ld		a,11010000B
     332.  00:49A0  D3 9B               	out 	(0x9B), a		; command HMMM
     333.  00:49A2  C9                  	ret
     334.  00:49A3                      	
     356   00:49A3                      	include enemies.asm
       1.  00:49A3                      	
       2.  00:49A3  (00:0000)           ms_fly__right				equ	0
       3.  00:49A3  (00:0001)           ms_spin_face_right			equ	1
       4.  00:49A3  (00:0002)           ms_side_dwn_face_right		equ	2
       5.  00:49A3  (00:0003)           ms_side_up__face_right		equ	3
       6.  00:49A3                      
       7.  00:49A3  (00:0004)           ms_fly__left				equ	4
       8.  00:49A3  (00:0005)           ms_spin_face_left			equ	5
       9.  00:49A3  (00:0006)           ms_side_dwn_face_left		equ	6
      10.  00:49A3  (00:0007)           ms_side_up__face_left		equ	7
      11.  00:49A3                      
      12.  00:49A3  (00:0008)           ms_loop_right2left			equ	8
      13.  00:49A3  (00:0009)           ms_loop_left2right			equ	9
      14.  00:49A3                      
      15.  00:49A3  (00:000A)           ms_explode					equ	10
      16.  00:49A3  (00:000B)           ms_landing					equ	11
      17.  00:49A3  (00:000C)           ms_reset					equ	12
      18.  00:49A3                      
      19.  00:49A3                      
      20.  00:49A3  (00:0010)           maxspeed:					equ 16		; the actual speed is divided by 4
      21.  00:49A3  (00:0008)           max_enem:					equ 8		; max 12
      22.  00:49A3  (00:0003)           max_enem_bullets:			equ 3
      23.  00:49A3  (00:0002)           max_bullets:				equ 2		; max number of enemies*2 + ms_bullets + enem_bullets + 3 for ms	<= 32 sprites
      24.  00:49A3  (00:00B4)           assault_wave_timer_preset:	equ	3*60	; a wave each 3 seconds
      25.  00:49A3  (00:0002)           enemy_bullet_speed:			equ	2	
      26.  00:49A3  (00:0078)           xship_rel:					equ (128-8)
      27.  00:49A3                      
      28.  00:49A3                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      29.  00:49A3                      ms_ani:
      30.  00:49A3                      	include ms_demo_ani.asm
       1:  00:49A3                      ms_demo_ani:
       2:  00:49A3  22                      defb 34 
       3:  00:49A4  0A                      defb 10 
       4:  00:49A5  08                      defb 8 
       5:  00:49A6  07                      defb 7 
       6:  00:49A7  06                      defb 6 
       7:  00:49A8  01                      defb 1 
       8:  00:49A9  05                      defb 5 
       9:  00:49AA  0B                      defb 11 
      10:  00:49AB  27                      defb 39 
      11:  00:49AC  1E                      defb 30 
      12:  00:49AD  17                      defb 23 
      13:  00:49AE  0E                      defb 14 
      14:  00:49AF  10                      defb 16 
      15:  00:49B0  0F                      defb 15 
      16:  00:49B1  1B                      defb 27 
      17:  00:49B2  20                      defb 32 
      18:  00:49B3  26                      defb 38 
      19:  00:49B4  25                      defb 37 
      20:  00:49B5  09                      defb 9 
      21:  00:49B6  03                      defb 3 
      22:  00:49B7  00                      defb 0 
      23:  00:49B8  02                      defb 2 
      24:  00:49B9  04                      defb 4 
      25:  00:49BA  23                      defb 35 
      26:  00:49BB  24                      defb 36 
      27:  00:49BC  1F                      defb 31 
      28:  00:49BD  19                      defb 25 
      29:  00:49BE  14                      defb 20 
      30:  00:49BF  11                      defb 17 
      31:  00:49C0  15                      defb 21 
      32:  00:49C1  1A                      defb 26 
      33:  00:49C2  1D                      defb 29 
      34:  00:49C3  22                      defb 34 
      35:  00:49C4  1D                      defb 29 
      36:  00:49C5  1A                      defb 26 
      37:  00:49C6  15                      defb 21 
      38:  00:49C7  11                      defb 17 
      39:  00:49C8  15                      defb 21 
      40:  00:49C9  1A                      defb 26 
      41:  00:49CA  1D                      defb 29 
      42:  00:49CB  22                      defb 34 
      43:  00:49CC  1C                      defb 28 
      44:  00:49CD  16                      defb 22 
      45:  00:49CE  13                      defb 19 
      46:  00:49CF  0C                      defb 12 
      47:  00:49D0  13                      defb 19 
      48:  00:49D1  16                      defb 22 
      49:  00:49D2  1C                      defb 28 
      50:  00:49D3  26                      defb 38 
      51:  00:49D4  21                      defb 33 
      52:  00:49D5  18                      defb 24 
      53:  00:49D6  12                      defb 18 
      54:  00:49D7  0D                      defb 13 
      55:  00:49D8  12                      defb 18 
      56:  00:49D9  18                      defb 24 
      57:  00:49DA  21                      defb 33 
      58:  00:49DB  26                      defb 38 
      59:  00:49DC  20                      defb 32 
      60:  00:49DD  1B                      defb 27 
      61:  00:49DE  0F                      defb 15 
      62:  00:49DF  10                      defb 16 
      63:  00:49E0  0F                      defb 15 
      64:  00:49E1  1B                      defb 27 
      65:  00:49E2  20                      defb 32 
      66:  00:49E3  28                      defb 40 
      67:  00:49E4  29                      defb 41 
      68:  00:49E5  2A                      defb 42 
      69:  00:49E6  2B                      defb 43 
      70:  00:49E7  2C                      defb 44 
      71:  00:49E8  2D                      defb 45 
      72:  00:49E9  2E                      defb 46 
      73:  00:49EA  2F                      defb 47 
      74:  00:49EB  30                      defb 48 
      75:  00:49EC  31                      defb 49 
      76:  00:49ED  32                      defb 50 
      77:  00:49EE  33                      defb 51 
      78:  00:49EF  34                      defb 52 
      79:  00:49F0  35                      defb 53 
      80:  00:49F1  36                      defb 54 
      81:  00:49F2  37                      defb 55 
      31.  00:49F3                      ms_col_win:
      32.  00:49F3                      	include ms_demo_frm_coll_wind.asm
       1:  00:49F3                      ms_demo_coll_wind:
       2:  00:49F3  07 0D 01 0F             defb 7,13,1,15 
       3:  00:49F7  07 0B 01 0F             defb 7,11,1,15 
       4:  00:49FB  05 09 01 0F             defb 5,9,1,15 
       5:  00:49FF  04 0D 01 0F             defb 4,13,1,15 
       6:  00:4A03  04 0C 01 0F             defb 4,12,1,15 
       7:  00:4A07  04 0C 01 0F             defb 4,12,1,15 
       8:  00:4A0B  03 09 01 0F             defb 3,9,1,15 
       9:  00:4A0F  03 0C 01 0F             defb 3,12,1,15 
      10:  00:4A13  03 0D 01 0F             defb 3,13,1,15 
      11:  00:4A17  03 0D 01 0F             defb 3,13,1,15 
      12:  00:4A1B  03 0F 01 0F             defb 3,15,1,15 
      13:  00:4A1F  03 0F 01 0F             defb 3,15,1,15 
      14:  00:4A23  01 0F 07 0D             defb 1,15,7,13 
      15:  00:4A27  01 0F 04 0A             defb 1,15,4,10 
      16:  00:4A2B  01 0F 07 0C             defb 1,15,7,12 
      17:  00:4A2F  01 0F 06 0C             defb 1,15,6,12 
      18:  00:4A33  01 0F 07 0D             defb 1,15,7,13 
      19:  00:4A37  01 0F 04 0A             defb 1,15,4,10 
      20:  00:4A3B  01 0F 05 0B             defb 1,15,5,11 
      21:  00:4A3F  01 0F 06 0C             defb 1,15,6,12 
      22:  00:4A43  01 0F 05 0A             defb 1,15,5,10 
      23:  00:4A47  01 0F 05 0B             defb 1,15,5,11 
      24:  00:4A4B  01 0F 05 0C             defb 1,15,5,12 
      25:  00:4A4F  01 0F 06 0D             defb 1,15,6,13 
      26:  00:4A53  01 0F 05 0C             defb 1,15,5,12 
      27:  00:4A57  01 0F 04 0B             defb 1,15,4,11 
      28:  00:4A5B  01 0F 05 0C             defb 1,15,5,12 
      29:  00:4A5F  01 0F 05 0C             defb 1,15,5,12 
      30:  00:4A63  01 0F 03 0E             defb 1,15,3,14 
      31:  00:4A67  01 0F 03 0E             defb 1,15,3,14 
      32:  00:4A6B  01 0F 05 0F             defb 1,15,5,15 
      33:  00:4A6F  01 0F 02 0C             defb 1,15,2,12 
      34:  00:4A73  01 0F 03 0E             defb 1,15,3,14 
      35:  00:4A77  01 0F 03 0E             defb 1,15,3,14 
      36:  00:4A7B  01 0F 01 0F             defb 1,15,1,15 
      37:  00:4A7F  01 0D 01 0F             defb 1,13,1,15 
      38:  00:4A83  01 0F 01 0F             defb 1,15,1,15 
      39:  00:4A87  01 0D 01 0F             defb 1,13,1,15 
      40:  00:4A8B  01 0F 01 0F             defb 1,15,1,15 
      41:  00:4A8F  01 0F 01 0F             defb 1,15,1,15 
      42:  00:4A93                      
      33.  00:4A93                      
      34.  00:4A93                      ;--------------------------------------------------------------------
      35.  00:4A93                      set_size:
      36.  00:4A93                      set_size2:
      37.  00:4A93  C9                  	ret
      38.  00:4A94                      ;--------------------------------------------------------------------
      39.  00:4A94                      add_bc_score_bin
      40.  00:4A94  C9                  	ret
      41.  00:4A95                      ;--------------------------------------------------------------------
      42.  00:4A95                      test_collision_msbullets
      43.  00:4A95  C9                  	ret
      44.  00:4A96                      ;--------------------------------------------------------------------
      45.  00:4A96                      CollisionCheck_8b
      46.  00:4A96  C9                  	ret
      47.  00:4A97                      ;--------------------------------------------------------------------
      48.  00:4A97                      CalcCollision
      49.  00:4A97  C9                  	ret
      50.  00:4A98                      ;--------------------------------------------------------------------
      51.  00:4A98                      test_collision_enemy_bullets
      52.  00:4A98  C9                  	ret
      53.  00:4A99                      ; Fast random number generator using the same method
      54.  00:4A99                      ; as the CDMA used in cellular telephones
      55.  00:4A99                      ;--------------------------------------------------------------------
      56.  00:4A99                      ; init random seed 
      57.  00:4A99                      
      58.  00:4A99                      rand8_init:
      59.  00:4A99  2A 9E FC            	LD      HL,(_jiffy)
      60.  00:4A9C  CB C5               	SET		0,L
      61.  00:4A9E  22 05 D4            	LD      (randSeed),HL
      62.  00:4AA1  C9                  	RET
      63.  00:4AA2                      
      64.  00:4AA2                      
      65.  00:4AA2                      ; -------------------------------------------------------------------
      66.  00:4AA2                      ; rand8
      67.  00:4AA2                      ; -------------------------------------------------------------------
      68.  00:4AA2                      ;
      69.  00:4AA2                      ; choose a random number in the set [0,127] with uniform distribution
      70.  00:4AA2                      ; return: A = random value
      71.  00:4AA2                      
      72.  00:4AA2                      rand8:
      73.  00:4AA2  2A 05 D4            	ld      hl,(randSeed)
      74.  00:4AA5  29                  	add     hl,hl
      75.  00:4AA6  9F                  	sbc     a,a
      76.  00:4AA7  E6 83               	and     083h
      77.  00:4AA9  AD                  	xor     l
      78.  00:4AAA  6F                  	ld      l,a
      79.  00:4AAB  22 05 D4            	ld      (randSeed),hl
      80.  00:4AAE  C9                  	ret
      81.  00:4AAF                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
      82.  00:4AAF                      ;	increase the wave counter
      83.  00:4AAF                      ; 	and test for landing permission
      84.  00:4AAF                      	
      85.  00:4AAF                      land_now_test:
      86.  00:4AAF  3A 08 D4            	ld	a,(wave_count)
      87.  00:4AB2  3C                  	inc	a
      88.  00:4AB3  32 08 D4            	ld	(wave_count),a
      89.  00:4AB6  5F                  	ld	e,a
      90.  00:4AB7  3A 07 D4            	ld	a,(cur_level)
      91.  00:4ABA  0F 0F               [2]	rrca
      92.  00:4ABC  E6 0F               	and	15
      93.  00:4ABE  C6 19               	add	a,25
      94.  00:4AC0  BB                  	cp	e				; 'land now' counter after  25+cur_level/4 waves
      95.  00:4AC1  C0                  	ret nz
      96.  00:4AC2                      
      97.  00:4AC2                      	; ld	hl,land_now
      98.  00:4AC2                      	; ld	de,0x1C00+8*3*32
      99.  00:4AC2                      	; call	print_strf
     100.  00:4AC2  3E FF               	ld	a,-1
     101.  00:4AC4  32 09 D4            	ld	(landing_permission),a
     102.  00:4AC7                      	
     103.  00:4AC7  3E 0E               	ld	a,14			; Land Now
     104.  00:4AC9  CD 59 46            	call AFXPLAY
     105.  00:4ACC                      	
     106.  00:4ACC  C9                  	ret
     107.  00:4ACD                      
     108.  00:4ACD                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     109.  00:4ACD                      ;
     110.  00:4ACD                      ; NPC initialization - fake for testing
     111.  00:4ACD                      ;
     112.  00:4ACD                      npc_init:
     113.  00:4ACD  DD 21 16 D4         	ld  ix,enemies
     114.  00:4AD1  06 08               	ld  b,max_enem
     115.  00:4AD3  11 0E 00            	ld	de,enemy_data
     116.  00:4AD6                      
     117.  00:4AD6  DD 36 07 00         1:  ld  (ix+enemy_data.status),0
     118.  00:4ADA  DD 36 09 FF         	ld  (ix+enemy_data.kind),255
     119.  00:4ADE  DD 36 08 00         	ld	(ix+enemy_data.cntr),0
     120.  00:4AE2  DD 36 00 C0         	ld	(ix+enemy_data.y),192
     121.  00:4AE6                      
     122.  00:4AE6  DD 19               	add ix,de
     123.  00:4AE8  10 EC               	djnz    1b
     124.  00:4AEA                      
     125.  00:4AEA  21 B4 00            	ld	hl,assault_wave_timer_preset
     126.  00:4AED  22 0A D4            	ld	(assault_wave_timer),hl
     127.  00:4AF0  AF                  	xor	a
     128.  00:4AF1  32 08 D4            	ld	(wave_count),a
     129.  00:4AF4  32 09 D4            	ld	(landing_permission),a
     130.  00:4AF7                      ; turn off MS and enemy bullets
     131.  00:4AF7                      
     132.  00:4AF7                      bull_init:
     133.  00:4AF7  AF                  	xor a
     134.  00:4AF8  32 0C D4            	ld  (bullet_rate),a
     135.  00:4AFB                      
     136.  00:4AFB  DD 21 86 D4         	ld  ix,ms_bullets
     137.  00:4AFF  11 0E 00            	ld  de,enemy_data
     138.  00:4B02                      	repeat	max_bullets
     139.  00:4B02                    < 	ld  (ix+enemy_data.status),a
     140.  00:4B02                    < 	ld	(ix+enemy_data.color),15
     141.  00:4B02                    < 	add ix,de
     142.  00:4B02                    < 	endrepeat
     142.  00:4B02  DD 77 07 DD 36 0B 0F DD 19 DD 77 07 DD 36 0B 0F 
     142.  00:4B12  DD 19 
     143.  00:4B14                      
     144.  00:4B14                      	; ld	a,(cur_level)
     145.  00:4B14                      	; ld	l,a
     146.  00:4B14                      	; ld	h,0
     147.  00:4B14                      	; ld	bc,clr_enemy_bullts
     148.  00:4B14                      	; add	hl,bc
     149.  00:4B14                      	; ld	b,(hl)
     150.  00:4B14  06 0F               	ld	b,15
     151.  00:4B16                      	
     152.  00:4B16  AF                  	xor	a
     153.  00:4B17  DD 21 A2 D4         	ld  ix,enem_bullets
     154.  00:4B1B                      	repeat	max_enem_bullets
     155.  00:4B1B                    < 	ld  (ix+enemy_data.status),a
     156.  00:4B1B                    < 	ld	(ix+enemy_data.color),b		; colour for enemy bullets
     157.  00:4B1B                    < 	add ix,de
     158.  00:4B1B                    < 	endrepeat
     158.  00:4B1B  DD 77 07 DD 70 0B DD 19 DD 77 07 DD 70 0B DD 19 
     158.  00:4B2B  DD 77 07 DD 70 0B DD 19 
     159.  00:4B33                      
     160.  00:4B33  C9                  	ret
     161.  00:4B34                      
     162.  00:4B34                      
     163.  00:4B34                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     164.  00:4B34                      ;
     165.  00:4B34                      ;	timer for wave assaults
     166.  00:4B34                      ;
     167.  00:4B34                      wave_timer:
     168.  00:4B34  2A 0A D4            	ld	hl,(assault_wave_timer)
     169.  00:4B37  2B                  	dec	hl
     170.  00:4B38  7C                  	ld	a,h
     171.  00:4B39  B5                  	or	l
     172.  00:4B3A  22 0A D4            	ld	(assault_wave_timer),hl
     173.  00:4B3D  C0                  	ret	nz
     174.  00:4B3E                      
     175.  00:4B3E  3E 01               	ld	a,1			; wave incoming
     176.  00:4B40  CD 59 46            	call AFXPLAY
     177.  00:4B43                      	
     178.  00:4B43  21 B4 00            	ld	hl,assault_wave_timer_preset
     179.  00:4B46  3A 07 D4            	ld	a,(cur_level)
     180.  00:4B49  87                  	add	a,a
     181.  00:4B4A  5F                  	ld	e,a
     182.  00:4B4B  16 00               	ld	d,0
     183.  00:4B4D  A7                  	and	a
     184.  00:4B4E  ED 52               	sbc	hl,de	; at level 15 frequency is a wave each 2,5 seconds
     185.  00:4B50  22 0A D4            	ld	(assault_wave_timer),hl	; 180 - 2*cur_level
     186.  00:4B53                      	
     187.  00:4B53                      
     188.  00:4B53  CD AF 4A            	call	land_now_test
     189.  00:4B56                      	
     190.  00:4B56  CD A2 4A            	call	rand8
     191.  00:4B59  E6 07               	and	7
     192.  00:4B5B                      	
     193.  00:4B5B  CA 08 4C            	jp	z,wave0
     194.  00:4B5E  3D                  	dec	a
     195.  00:4B5F  CA 08 4C            	jp	z,wave1
     196.  00:4B62  3D                  	dec	a
     197.  00:4B63  CA 98 4C            	jp	z,wave2
     198.  00:4B66  3D                  	dec	a
     199.  00:4B67  CA 2E 4D            	jp	z,wave3
     200.  00:4B6A  3D                  	dec	a
     201.  00:4B6B  CA B5 4D            	jp	z,wave4
     202.  00:4B6E  3D                  	dec	a
     203.  00:4B6F  CA 4B 4E            	jp	z,wave5
     204.  00:4B72  3D                  	dec	a
     205.  00:4B73  CA C4 4E            	jp	z,wave6
     206.  00:4B76  C3 66 4F            	jp	wave7
     207.  00:4B79                      
     208.  00:4B79                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     209.  00:4B79                      ;
     210.  00:4B79                      ;	enemies coming frontally
     211.  00:4B79                      ;
     212.  00:4B79  (0087)              	align 0x100
     213.  00:4C00                      spritecolors:
     214.  00:4C00  0F 0E 09 07         	db       15,14, 9, 7
     215.  00:4C04  09 03 0E 0F         	db        9, 3,14,15
     216.  00:4C08                      	
     217.  00:4C08                      wave0:
     218.  00:4C08                      wave1:
     219.  00:4C08  CD A2 4A            	call	rand8
     220.  00:4C0B  E6 0F               	and	15
     221.  00:4C0D  4F                  	ld 	c,a		; Y off set
     222.  00:4C0E  D9                  	exx
     223.  00:4C0F                      
     224.  00:4C0F  CD A2 4A            	call	rand8
     225.  00:4C12  E6 07               	and	7
     226.  00:4C14  6F                  	ld	l,a
     227.  00:4C15  26 4C               	ld	h, high spritecolors
     228.  00:4C17  7E                  	ld	a,(hl)	
     229.  00:4C18  FD 6F               	ld	iyl,a	; color
     230.  00:4C1A  7D                  	ld	a,l
     231.  00:4C1B  87                  	add	a,a
     232.  00:4C1C  87                  	add	a,a
     233.  00:4C1D  87                  	add	a,a
     234.  00:4C1E  87                  	add	a,a
     235.  00:4C1F                      
     236.  00:4C1F  C6 40               	add	a,64
     237.  00:4C21  47                  	ld	b,a			; frame
     238.  00:4C22                      	
     239.  00:4C22  3A 0D D4            	ld	a,(dxmap)
     240.  00:4C25  E6 80               	and	0x80
     241.  00:4C27  28 0C               	jr	z,.pos
     242.  00:4C29                      .neg
     243.  00:4C29  11 C0 FF            	ld	de,-64
     244.  00:4C2C  0E 01               	ld	c,+1		; enemies going right
     245.  00:4C2E  D9                  	exx	
     246.  00:4C2F  11 01 00            	ld 	de,1		; enemy speed = 1
     247.  00:4C32  D9                  	exx
     248.  00:4C33  18 0E               	jr	1f
     249.  00:4C35                      .pos
     250.  00:4C35  11 20 01            	ld	de,256+32
     251.  00:4C38  0E 41               	ld	c,1+64	; enemies going left
     252.  00:4C3A  3E 04               	ld	a,4
     253.  00:4C3C  80                  	add	a,b
     254.  00:4C3D  47                  	ld	b,a
     255.  00:4C3E  D9                  	exx	
     256.  00:4C3F  11 FF FF            	ld 	de,-1		; enemy speed = -1
     257.  00:4C42  D9                  	exx
     258.  00:4C43                      1:
     259.  00:4C43  D9                  	exx	
     260.  00:4C44  3E 40               	ld	a,64
     261.  00:4C46  81                  	add	a,c
     262.  00:4C47  D9                  	exx		
     263.  00:4C48                      	
     264.  00:4C48  2A 0E D4            	ld	hl,(xmap)
     265.  00:4C4B  19                  	add	hl,de
     266.  00:4C4C                      
     267.  00:4C4C  DD 21 16 D4         	ld  ix,enemies
     268.  00:4C50  FD 26 08            	ld	iyh,max_enem
     269.  00:4C53  11 0E 00            	ld  de,enemy_data
     270.  00:4C56                      	
     271.  00:4C56                      1:
     272.  00:4C56  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     273.  00:4C5A  20 35               	jr  nz,.next
     274.  00:4C5C                      
     275.  00:4C5C  DD 71 07            	ld  (ix+enemy_data.status),c
     276.  00:4C5F  DD 70 0A            	ld	(ix+enemy_data.frame),b
     277.  00:4C62                      
     278.  00:4C62  DD 36 09 00         	ld  (ix+enemy_data.kind),0
     279.  00:4C66  D9                  	exx
     280.  00:4C67  FD 45               	ld	b,iyl
     281.  00:4C69  DD 70 0B            	ld	(ix+enemy_data.color),b
     282.  00:4C6C  DD 73 0C            	ld	(ix+enemy_data.speed),e
     283.  00:4C6F  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     284.  00:4C72  D9                  	exx
     285.  00:4C73                      
     286.  00:4C73  C5                  	push	bc
     287.  00:4C74  01 10 00            	ld bc,16
     288.  00:4C77  09                  	add hl,bc 
     289.  00:4C78  DD 75 01            	ld  (ix+enemy_data.x),l
     290.  00:4C7B  DD 74 02            	ld  (ix+enemy_data.x+1),h
     291.  00:4C7E  C1                  	pop	bc
     292.  00:4C7F                      	
     293.  00:4C7F  DD 77 00            	ld  (ix+enemy_data.y),a
     294.  00:4C82  C6 20               	add	a,32
     295.  00:4C84                      	
     296.  00:4C84  CD 93 4A            	call	set_size
     297.  00:4C87                      
     298.  00:4C87  DD 19               	add ix,de
     299.  00:4C89  FD 25               	dec	iyh
     300.  00:4C8B  C8                  	ret	z
     301.  00:4C8C  FE AF               	cp	191-16
     302.  00:4C8E  38 C6               	jr	c,1b
     303.  00:4C90  C9                  	ret
     304.  00:4C91                      
     305.  00:4C91                      .next
     306.  00:4C91  DD 19               	add ix,de
     307.  00:4C93  FD 25               	dec	iyh
     308.  00:4C95  C8                  	ret	z
     309.  00:4C96  18 BE               	jr	1b
     310.  00:4C98                      	
     311.  00:4C98                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     312.  00:4C98                      ;
     313.  00:4C98                      ;	enemies coming from back
     314.  00:4C98                      ;
     315.  00:4C98                      wave2:
     316.  00:4C98  CD A2 4A            	call	rand8
     317.  00:4C9B  E6 0F               	and	15
     318.  00:4C9D  4F                  	ld 	c,a		; Y off set
     319.  00:4C9E  D9                  	exx
     320.  00:4C9F                      
     321.  00:4C9F  CD A2 4A            	call	rand8
     322.  00:4CA2  E6 07               	and	7
     323.  00:4CA4  6F                  	ld	l,a
     324.  00:4CA5  26 4C               	ld	h, high spritecolors
     325.  00:4CA7  7E                  	ld	a,(hl)	
     326.  00:4CA8  FD 6F               	ld	iyl,a		; color
     327.  00:4CAA                      	
     328.  00:4CAA  7D                  	ld	a,l
     329.  00:4CAB  87                  	add	a,a
     330.  00:4CAC  87                  	add	a,a
     331.  00:4CAD  87                  	add	a,a
     332.  00:4CAE  87                  	add	a,a
     333.  00:4CAF                      
     334.  00:4CAF  C6 40               	add	a,64
     335.  00:4CB1  47                  	ld	b,a			; frame
     336.  00:4CB2                      
     337.  00:4CB2  D9                  	exx
     338.  00:4CB3  3A 0D D4            	ld	a,(dxmap)
     339.  00:4CB6  F6 02               	or	2
     340.  00:4CB8  CB 2F CB 2F         [2] sra a			; de' = player speed 
     341.  00:4CBC  5F                  	ld	e,a
     342.  00:4CBD  17                  	rla
     343.  00:4CBE  9F                  	sbc a,a
     344.  00:4CBF  57                  	ld	d,a
     345.  00:4CC0  D9                  	exx
     346.  00:4CC1                      
     347.  00:4CC1  28 0E               	jr	z,.pos				
     348.  00:4CC3                      .neg
     349.  00:4CC3  11 20 01            	ld	de,256+32
     350.  00:4CC6  0E 41               	ld	c,1+64		; enemies going left
     351.  00:4CC8  3E 04               	ld	a,4
     352.  00:4CCA  80                  	add	a,b
     353.  00:4CCB  47                  	ld	b,a
     354.  00:4CCC  D9                  	exx	
     355.  00:4CCD  1B                  	dec 	de				; enemy speed = player speed -1
     356.  00:4CCE  D9                  	exx
     357.  00:4CCF  18 08               	jr	1f
     358.  00:4CD1                      .pos
     359.  00:4CD1  11 C0 FF            	ld	de,-64
     360.  00:4CD4  0E 01               	ld	c,+1		; enemies going right
     361.  00:4CD6  D9                  	exx	
     362.  00:4CD7  13                  	inc 	de			; enemy speed = player speed +1
     363.  00:4CD8  D9                  	exx
     364.  00:4CD9                      	
     365.  00:4CD9                      1:
     366.  00:4CD9  2A 0E D4            	ld	hl,(xmap)
     367.  00:4CDC  19                  	add	hl,de
     368.  00:4CDD                      
     369.  00:4CDD  DD 21 16 D4         	ld  ix,enemies
     370.  00:4CE1  3E 40               	ld	a,64
     371.  00:4CE3  D9                  	exx	
     372.  00:4CE4  81                  	add	a,c			; random offset
     373.  00:4CE5  D9                  	exx	
     374.  00:4CE6                      
     375.  00:4CE6  FD 26 08            	ld	iyh,max_enem
     376.  00:4CE9  11 0E 00            	ld  de,enemy_data
     377.  00:4CEC                      
     378.  00:4CEC                      1:
     379.  00:4CEC  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     380.  00:4CF0  20 35               	jr  nz,.next
     381.  00:4CF2                      
     382.  00:4CF2  DD 71 07            	ld  (ix+enemy_data.status),c
     383.  00:4CF5  DD 70 0A            	ld	(ix+enemy_data.frame),b
     384.  00:4CF8                      
     385.  00:4CF8  DD 36 09 02         	ld  (ix+enemy_data.kind),2
     386.  00:4CFC                      
     387.  00:4CFC  D9                  	exx	
     388.  00:4CFD  FD 45               	ld	b,iyl
     389.  00:4CFF  DD 70 0B            	ld	(ix+enemy_data.color),b
     390.  00:4D02  DD 73 0C            	ld	(ix+enemy_data.speed),e
     391.  00:4D05  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     392.  00:4D08  D9                  	exx
     393.  00:4D09                      	
     394.  00:4D09  C5                  	push	bc
     395.  00:4D0A  01 10 00            	ld bc,16
     396.  00:4D0D  09                  	add hl,bc 
     397.  00:4D0E  DD 75 01            	ld  (ix+enemy_data.x),l
     398.  00:4D11  DD 74 02            	ld  (ix+enemy_data.x+1),h
     399.  00:4D14  C1                  	pop		bc
     400.  00:4D15                      	
     401.  00:4D15  DD 77 00            	ld  (ix+enemy_data.y),a
     402.  00:4D18  C6 20               	add	a,32
     403.  00:4D1A                      
     404.  00:4D1A  CD 93 4A            	call	set_size
     405.  00:4D1D                      
     406.  00:4D1D  DD 19               	add ix,de
     407.  00:4D1F  FD 25               	dec	iyh
     408.  00:4D21  C8                  	ret	z
     409.  00:4D22  FE AF               	cp	191-16
     410.  00:4D24  38 C6               	jr	c,1b
     411.  00:4D26  C9                  	ret
     412.  00:4D27                      
     413.  00:4D27                      .next
     414.  00:4D27  DD 19               	add ix,de
     415.  00:4D29  FD 25               	dec	iyh
     416.  00:4D2B  C8                  	ret	z
     417.  00:4D2C  18 BE               	jr	1b
     418.  00:4D2E                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     419.  00:4D2E                      wave3:
     420.  00:4D2E  CD A2 4A            	call	rand8
     421.  00:4D31  E6 0F               	and	15
     422.  00:4D33  C6 07               	add	a,7
     423.  00:4D35  4F                  	ld 	c,a		; Y off set
     424.  00:4D36                      		
     425.  00:4D36  3A 0D D4            	ld	a,(dxmap)
     426.  00:4D39  F6 02               	or	2
     427.  00:4D3B  CB 2F CB 2F         [2] sra a			; de' = player speed 
     428.  00:4D3F  5F                  	ld	e,a
     429.  00:4D40  17                  	rla
     430.  00:4D41  9F                  	sbc a,a
     431.  00:4D42  57                  	ld	d,a
     432.  00:4D43  D9                  	exx
     433.  00:4D44                      
     434.  00:4D44  28 0B               	jr	z,.pos				
     435.  00:4D46                      .neg
     436.  00:4D46  11 20 01            	ld	de,256+32
     437.  00:4D49  01 41 64            	ld	bc,256*100+1+64		; enemies going left
     438.  00:4D4C  D9                  	exx	
     439.  00:4D4D  1B                  	dec 	de				; enemy speed = player speed -1
     440.  00:4D4E  D9                  	exx
     441.  00:4D4F  18 09               	jr	1f
     442.  00:4D51                      .pos
     443.  00:4D51  11 C0 FF            	ld	de,-64
     444.  00:4D54  01 01 60            	ld	bc,256*96+1		; enemies going right
     445.  00:4D57  D9                  	exx	
     446.  00:4D58  13                  	inc 	de			; enemy speed = player speed +1
     447.  00:4D59  D9                  	exx
     448.  00:4D5A                      	
     449.  00:4D5A                      1:
     450.  00:4D5A  2A 0E D4            	ld	hl,(xmap)
     451.  00:4D5D  19                  	add	hl,de
     452.  00:4D5E                      
     453.  00:4D5E  DD 21 16 D4         	ld  ix,enemies
     454.  00:4D62  3E 40               	ld	a,64
     455.  00:4D64  D9                  	exx	
     456.  00:4D65  81                  	add	a,c			; random Y offset
     457.  00:4D66  D9                  	exx	
     458.  00:4D67                      
     459.  00:4D67  FD 26 08            	ld	iyh,max_enem
     460.  00:4D6A  11 0E 00            	ld  de,enemy_data
     461.  00:4D6D                      
     462.  00:4D6D                      1:
     463.  00:4D6D  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     464.  00:4D71  20 3B               	jr  nz,.next
     465.  00:4D73                      
     466.  00:4D73  DD 71 07            	ld  (ix+enemy_data.status),c
     467.  00:4D76  DD 70 0A            	ld	(ix+enemy_data.frame),b
     468.  00:4D79                      
     469.  00:4D79  DD 36 09 05         	ld  (ix+enemy_data.kind),5
     470.  00:4D7D  DD 36 0B 0A         	ld	(ix+enemy_data.color),10
     471.  00:4D81                      
     472.  00:4D81  D9                  	exx	
     473.  00:4D82  DD 73 0C            	ld	(ix+enemy_data.speed),e
     474.  00:4D85  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     475.  00:4D88  D9                  	exx
     476.  00:4D89                      	
     477.  00:4D89  C5                  	push	bc
     478.  00:4D8A  CB 67               	bit	4,a
     479.  00:4D8C  01 10 00            	ld bc,16
     480.  00:4D8F  28 03               	jr	z,2f
     481.  00:4D91  01 F0 FF            	ld	bc,-16
     482.  00:4D94                      2:	
     483.  00:4D94  09                  	add hl,bc 
     484.  00:4D95  DD 75 01            	ld  (ix+enemy_data.x),l
     485.  00:4D98  DD 74 02            	ld  (ix+enemy_data.x+1),h
     486.  00:4D9B  C1                  	pop		bc
     487.  00:4D9C                      	
     488.  00:4D9C  DD 77 00            	ld  (ix+enemy_data.y),a
     489.  00:4D9F  C6 18               	add	a,24
     490.  00:4DA1                      
     491.  00:4DA1  CD 93 4A            	call	set_size
     492.  00:4DA4                      
     493.  00:4DA4  DD 19               	add ix,de
     494.  00:4DA6  FD 25               	dec	iyh
     495.  00:4DA8  C8                  	ret	z
     496.  00:4DA9  FE AF               	cp	191-16
     497.  00:4DAB  38 C0               	jr	c,1b
     498.  00:4DAD  C9                  	ret
     499.  00:4DAE                      
     500.  00:4DAE                      .next
     501.  00:4DAE  DD 19               	add ix,de
     502.  00:4DB0  FD 25               	dec	iyh
     503.  00:4DB2  C8                  	ret	z
     504.  00:4DB3  18 B8               	jr	1b
     505.  00:4DB5                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     506.  00:4DB5                      
     507.  00:4DB5                      ;	enemies coming from back
     508.  00:4DB5                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     509.  00:4DB5                      wave4:
     510.  00:4DB5  CD A2 4A            	call	rand8
     511.  00:4DB8  E6 0F               	and	15
     512.  00:4DBA  4F                  	ld 	c,a		; Y off set
     513.  00:4DBB  D9                  	exx
     514.  00:4DBC                      
     515.  00:4DBC  CD A2 4A            	call	rand8
     516.  00:4DBF  E6 07               	and	7
     517.  00:4DC1  6F                  	ld	l,a
     518.  00:4DC2  26 4C               	ld	h, high spritecolors
     519.  00:4DC4  7E                  	ld	a,(hl)	
     520.  00:4DC5  FD 6F               	ld	iyl,a		; color
     521.  00:4DC7                      	
     522.  00:4DC7  7D                  	ld	a,l
     523.  00:4DC8  87                  	add	a,a
     524.  00:4DC9  87                  	add	a,a
     525.  00:4DCA  87                  	add	a,a
     526.  00:4DCB  87                  	add	a,a
     527.  00:4DCC                      
     528.  00:4DCC  C6 40               	add	a,64
     529.  00:4DCE  47                  	ld	b,a			; frame
     530.  00:4DCF                      	
     531.  00:4DCF  D9                  	exx
     532.  00:4DD0  3A 0D D4            	ld	a,(dxmap)
     533.  00:4DD3  F6 02               	or	2
     534.  00:4DD5  CB 2F CB 2F         [2] sra a			; de' = player speed 
     535.  00:4DD9  5F                  	ld	e,a
     536.  00:4DDA  17                  	rla
     537.  00:4DDB  9F                  	sbc a,a
     538.  00:4DDC  57                  	ld	d,a
     539.  00:4DDD  D9                  	exx
     540.  00:4DDE                      
     541.  00:4DDE  28 0E               	jr	z,.pos				
     542.  00:4DE0                      .neg
     543.  00:4DE0  11 20 01            	ld	de,256+32
     544.  00:4DE3  0E 41               	ld	c,+1+64		; enemies going left
     545.  00:4DE5  3E 04               	ld	a,4
     546.  00:4DE7  80                  	add	a,b
     547.  00:4DE8  47                  	ld	b,a
     548.  00:4DE9  D9                  	exx	
     549.  00:4DEA  1B                  	dec 	de				; enemy speed = player speed -1
     550.  00:4DEB  D9                  	exx
     551.  00:4DEC  18 08               	jr	1f
     552.  00:4DEE                      .pos
     553.  00:4DEE  11 C0 FF            	ld	de,-64
     554.  00:4DF1  0E 01               	ld	c,+1		; enemies going right
     555.  00:4DF3  D9                  	exx	
     556.  00:4DF4  13                  	inc 	de				; enemy speed = player speed +1
     557.  00:4DF5  D9                  	exx
     558.  00:4DF6                      	
     559.  00:4DF6                      1:
     560.  00:4DF6  2A 0E D4            	ld	hl,(xmap)
     561.  00:4DF9  19                  	add	hl,de
     562.  00:4DFA                      
     563.  00:4DFA  DD 21 16 D4         	ld  ix,enemies
     564.  00:4DFE  3E 40               	ld	a,64
     565.  00:4E00  D9                  	exx	
     566.  00:4E01  81                  	add	a,c			; random offset
     567.  00:4E02  D9                  	exx	
     568.  00:4E03                      
     569.  00:4E03  FD 26 08            	ld	iyh,max_enem
     570.  00:4E06  11 0E 00            	ld  de,enemy_data
     571.  00:4E09                      
     572.  00:4E09                      1:
     573.  00:4E09  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     574.  00:4E0D  20 35               	jr  nz,.next
     575.  00:4E0F                      
     576.  00:4E0F  DD 71 07            	ld  (ix+enemy_data.status),c
     577.  00:4E12  DD 70 0A            	ld	(ix+enemy_data.frame),b
     578.  00:4E15                      
     579.  00:4E15  DD 36 09 04         	ld  (ix+enemy_data.kind),4
     580.  00:4E19                      
     581.  00:4E19  D9                  	exx	
     582.  00:4E1A  FD 45               	ld	b,iyl
     583.  00:4E1C  DD 70 0B            	ld	(ix+enemy_data.color),b
     584.  00:4E1F  DD 73 0C            	ld	(ix+enemy_data.speed),e
     585.  00:4E22  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     586.  00:4E25  D9                  	exx
     587.  00:4E26                      	
     588.  00:4E26  C5                  	push	bc
     589.  00:4E27  01 10 00            	ld bc,16
     590.  00:4E2A  09                  	add hl,bc 
     591.  00:4E2B  DD 75 01            	ld  (ix+enemy_data.x),l
     592.  00:4E2E  DD 74 02            	ld  (ix+enemy_data.x+1),h
     593.  00:4E31  C1                  	pop		bc
     594.  00:4E32                      	
     595.  00:4E32  DD 77 00            	ld  (ix+enemy_data.y),a
     596.  00:4E35  C6 20               	add	a,32
     597.  00:4E37                      
     598.  00:4E37  CD 93 4A            	call	set_size
     599.  00:4E3A                      
     600.  00:4E3A  DD 19               	add ix,de
     601.  00:4E3C  FD 25               	dec	iyh
     602.  00:4E3E  C8                  	ret	z
     603.  00:4E3F  FE AF               	cp	191-16
     604.  00:4E41  38 C6               	jr	c,1b
     605.  00:4E43  C9                  	ret
     606.  00:4E44                      
     607.  00:4E44                      .next
     608.  00:4E44  DD 19               	add ix,de
     609.  00:4E46  FD 25               	dec	iyh
     610.  00:4E48  C8                  	ret	z
     611.  00:4E49  18 BE               	jr	1b
     612.  00:4E4B                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     613.  00:4E4B                      ; spinning enemy color 11
     614.  00:4E4B                      wave5:
     615.  00:4E4B  CD A2 4A            	call	rand8
     616.  00:4E4E  E6 0F               	and	15
     617.  00:4E50  4F                  	ld 	c,a		; Y off set
     618.  00:4E51                      	
     619.  00:4E51  3A 0D D4            	ld	a,(dxmap)
     620.  00:4E54  F6 02               	or	2
     621.  00:4E56  CB 2F CB 2F         [2] sra a			; de' = player speed 
     622.  00:4E5A  5F                  	ld	e,a
     623.  00:4E5B  17                  	rla
     624.  00:4E5C  9F                  	sbc a,a
     625.  00:4E5D  57                  	ld	d,a
     626.  00:4E5E  D9                  	exx
     627.  00:4E5F                      
     628.  00:4E5F  28 0A               	jr	z,.pos				
     629.  00:4E61                      .neg
     630.  00:4E61  11 20 01            	ld	de,256+32
     631.  00:4E64  0E 41               	ld	c,+1+64		; enemies going left
     632.  00:4E66  D9                  	exx	
     633.  00:4E67  1B                  	dec 	de				; enemy speed = player speed -1
     634.  00:4E68  D9                  	exx
     635.  00:4E69  18 08               	jr	1f
     636.  00:4E6B                      .pos
     637.  00:4E6B  11 C0 FF            	ld	de,-64
     638.  00:4E6E  0E 01               	ld	c,+1		; enemies going right
     639.  00:4E70  D9                  	exx	
     640.  00:4E71  13                  	inc 	de				; enemy speed = player speed +1
     641.  00:4E72  D9                  	exx
     642.  00:4E73                      	
     643.  00:4E73                      1:
     644.  00:4E73  2A 0E D4            	ld	hl,(xmap)
     645.  00:4E76  19                  	add	hl,de
     646.  00:4E77                      
     647.  00:4E77  DD 21 16 D4         	ld  ix,enemies
     648.  00:4E7B  3E 40               	ld	a,64
     649.  00:4E7D  D9                  	exx	
     650.  00:4E7E  81                  	add	a,c			; random offset
     651.  00:4E7F  D9                  	exx	
     652.  00:4E80                      
     653.  00:4E80  FD 26 08            	ld	iyh,max_enem
     654.  00:4E83  11 0E 00            	ld  de,enemy_data
     655.  00:4E86                      
     656.  00:4E86                      1:
     657.  00:4E86  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     658.  00:4E8A  20 31               	jr  nz,.next
     659.  00:4E8C                      
     660.  00:4E8C  DD 71 07            	ld  (ix+enemy_data.status),c
     661.  00:4E8F                      	; ld	(ix+enemy_data.frame),b
     662.  00:4E8F                      	
     663.  00:4E8F  DD 36 09 06         	ld  (ix+enemy_data.kind),6
     664.  00:4E93                      
     665.  00:4E93  D9                  	exx	
     666.  00:4E94  DD 36 0B 0B         	ld	(ix+enemy_data.color),11
     667.  00:4E98  DD 73 0C            	ld	(ix+enemy_data.speed),e
     668.  00:4E9B  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     669.  00:4E9E  D9                  	exx
     670.  00:4E9F                      	
     671.  00:4E9F  C5                  	push	bc
     672.  00:4EA0  01 10 00            	ld bc,16
     673.  00:4EA3  09                  	add hl,bc 
     674.  00:4EA4  DD 75 01            	ld  (ix+enemy_data.x),l
     675.  00:4EA7  DD 74 02            	ld  (ix+enemy_data.x+1),h
     676.  00:4EAA  C1                  	pop		bc
     677.  00:4EAB                      	
     678.  00:4EAB  DD 77 00            	ld  (ix+enemy_data.y),a
     679.  00:4EAE  C6 20               	add	a,32
     680.  00:4EB0                      
     681.  00:4EB0  CD 93 4A            	call	set_size
     682.  00:4EB3                      
     683.  00:4EB3  DD 19               	add ix,de
     684.  00:4EB5  FD 25               	dec	iyh
     685.  00:4EB7  C8                  	ret	z
     686.  00:4EB8  FE AF               	cp	191-16
     687.  00:4EBA  38 CA               	jr	c,1b
     688.  00:4EBC  C9                  	ret
     689.  00:4EBD                      
     690.  00:4EBD                      .next
     691.  00:4EBD  DD 19               	add ix,de
     692.  00:4EBF  FD 25               	dec	iyh
     693.  00:4EC1  C8                  	ret	z
     694.  00:4EC2  18 C2               	jr	1b
     695.  00:4EC4                      
     696.  00:4EC4                      
     697.  00:4EC4                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     698.  00:4EC4                      ;	enemies coming from back double speed
     699.  00:4EC4                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     700.  00:4EC4                      wave6:
     701.  00:4EC4  CD A2 4A            	call	rand8
     702.  00:4EC7  E6 0F               	and	15
     703.  00:4EC9  4F                  	ld 	c,a		; Y off set
     704.  00:4ECA  D9                  	exx
     705.  00:4ECB                      
     706.  00:4ECB  CD A2 4A            	call	rand8
     707.  00:4ECE  E6 07               	and	7
     708.  00:4ED0  6F                  	ld	l,a
     709.  00:4ED1  26 4C               	ld	h, high spritecolors
     710.  00:4ED3  7E                  	ld	a,(hl)	
     711.  00:4ED4  FD 6F               	ld	iyl,a		; color
     712.  00:4ED6                      	
     713.  00:4ED6  7D                  	ld	a,l
     714.  00:4ED7  87                  	add	a,a
     715.  00:4ED8  87                  	add	a,a
     716.  00:4ED9  87                  	add	a,a
     717.  00:4EDA  87                  	add	a,a
     718.  00:4EDB                      	
     719.  00:4EDB  C6 40               	add	a,64
     720.  00:4EDD  47                  	ld	b,a			; frame
     721.  00:4EDE  D9                  	exx
     722.  00:4EDF                      	
     723.  00:4EDF  3A 0D D4            	ld	a,(dxmap)
     724.  00:4EE2  F6 02               	or	2
     725.  00:4EE4  CB 2F CB 2F         [2] sra a			; de' = player speed 
     726.  00:4EE8  5F                  	ld	e,a
     727.  00:4EE9  17                  	rla
     728.  00:4EEA  9F                  	sbc a,a
     729.  00:4EEB  57                  	ld	d,a
     730.  00:4EEC  D9                  	exx
     731.  00:4EED                      
     732.  00:4EED  28 0F               	jr	z,.pos				
     733.  00:4EEF                      .neg
     734.  00:4EEF  11 20 01            	ld	de,256+32
     735.  00:4EF2  0E 41               	ld	c,+1+64		; enemies going left
     736.  00:4EF4  3E 04               	ld	a,4
     737.  00:4EF6  80                  	add	a,b
     738.  00:4EF7  47                  	ld	b,a
     739.  00:4EF8  D9                  	exx	
     740.  00:4EF9  1B                  	dec 	de				; enemy speed = player speed -2
     741.  00:4EFA  1B                  	dec 	de				
     742.  00:4EFB  D9                  	exx
     743.  00:4EFC  18 09               	jr	1f
     744.  00:4EFE                      .pos
     745.  00:4EFE  11 C0 FF            	ld	de,-64
     746.  00:4F01  0E 01               	ld	c,+1		; enemies going right
     747.  00:4F03  D9                  	exx	
     748.  00:4F04  13                  	inc 	de				; enemy speed = player speed +2
     749.  00:4F05  13                  	inc 	de				
     750.  00:4F06  D9                  	exx
     751.  00:4F07                      	
     752.  00:4F07                      1:
     753.  00:4F07  2A 0E D4            	ld	hl,(xmap)
     754.  00:4F0A  19                  	add	hl,de
     755.  00:4F0B                      
     756.  00:4F0B  DD 21 16 D4         	ld  ix,enemies
     757.  00:4F0F  3E 40               	ld	a,64
     758.  00:4F11  D9                  	exx	
     759.  00:4F12  81                  	add	a,c			; random offset
     760.  00:4F13  CB 41               	bit	0,c
     761.  00:4F15  D9                  	exx	
     762.  00:4F16  28 04               	jr	z,1f		; randomize initial Y direction
     763.  00:4F18  CB F9               	set	7,c
     764.  00:4F1A  18 02               	jr	2f
     765.  00:4F1C  CB B9               1:	res	7,c
     766.  00:4F1E                      2:
     767.  00:4F1E  FD 26 08            	ld	iyh,max_enem
     768.  00:4F21  11 0E 00            	ld  de,enemy_data
     769.  00:4F24                      
     770.  00:4F24                      1:
     771.  00:4F24  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     772.  00:4F28  20 35               	jr  nz,.next
     773.  00:4F2A                      
     774.  00:4F2A  DD 71 07            	ld  (ix+enemy_data.status),c
     775.  00:4F2D  DD 70 0A            	ld	(ix+enemy_data.frame),b
     776.  00:4F30                      
     777.  00:4F30  DD 36 09 04         	ld  (ix+enemy_data.kind),4
     778.  00:4F34                      
     779.  00:4F34  D9                  	exx	
     780.  00:4F35  FD 45               	ld	b,iyl
     781.  00:4F37  DD 70 0B            	ld	(ix+enemy_data.color),b
     782.  00:4F3A  DD 73 0C            	ld	(ix+enemy_data.speed),e
     783.  00:4F3D  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     784.  00:4F40  D9                  	exx
     785.  00:4F41                      	
     786.  00:4F41  C5                  	push	bc
     787.  00:4F42  01 10 00            	ld bc,16
     788.  00:4F45  09                  	add hl,bc 
     789.  00:4F46  DD 75 01            	ld  (ix+enemy_data.x),l
     790.  00:4F49  DD 74 02            	ld  (ix+enemy_data.x+1),h
     791.  00:4F4C  C1                  	pop		bc
     792.  00:4F4D                      	
     793.  00:4F4D  DD 77 00            	ld  (ix+enemy_data.y),a
     794.  00:4F50  C6 20               	add	a,32
     795.  00:4F52                      
     796.  00:4F52  CD 93 4A            	call	set_size
     797.  00:4F55                      
     798.  00:4F55  DD 19               	add ix,de
     799.  00:4F57  FD 25               	dec	iyh
     800.  00:4F59  C8                  	ret	z
     801.  00:4F5A  FE AF               	cp	191-16
     802.  00:4F5C  38 C6               	jr	c,1b
     803.  00:4F5E  C9                  	ret
     804.  00:4F5F                      
     805.  00:4F5F                      .next
     806.  00:4F5F  DD 19               	add ix,de
     807.  00:4F61  FD 25               	dec	iyh
     808.  00:4F63  C8                  	ret	z
     809.  00:4F64  18 BE               	jr	1b
     810.  00:4F66                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     811.  00:4F66                      ;spinning enemy color 7
     812.  00:4F66                      wave7:
     813.  00:4F66  CD A2 4A            	call	rand8
     814.  00:4F69  E6 0F               	and	15
     815.  00:4F6B  4F                  	ld 	c,a		; Y off set
     816.  00:4F6C  3A 0D D4            	ld	a,(dxmap)
     817.  00:4F6F  F6 02               	or	2
     818.  00:4F71  CB 2F CB 2F         [2] sra a			; de' = player speed 
     819.  00:4F75  5F                  	ld	e,a
     820.  00:4F76  17                  	rla
     821.  00:4F77  9F                  	sbc a,a
     822.  00:4F78  57                  	ld	d,a
     823.  00:4F79  D9                  	exx
     824.  00:4F7A                      
     825.  00:4F7A  28 0A               	jr	z,.pos				
     826.  00:4F7C                      .neg
     827.  00:4F7C  11 20 01            	ld	de,256+32
     828.  00:4F7F  0E 41               	ld	c,1+64				; enemies going left
     829.  00:4F81  D9                  	exx	
     830.  00:4F82  1B                  	dec 	de				; enemy speed = player speed -1
     831.  00:4F83  D9                  	exx
     832.  00:4F84  18 08               	jr	1f
     833.  00:4F86                      .pos
     834.  00:4F86  11 C0 FF            	ld	de,-64
     835.  00:4F89  0E 01               	ld	c,+1		; enemies going right
     836.  00:4F8B  D9                  	exx	
     837.  00:4F8C  13                  	inc 	de				; enemy speed = player speed +1
     838.  00:4F8D  D9                  	exx
     839.  00:4F8E                      	
     840.  00:4F8E                      1:
     841.  00:4F8E  2A 0E D4            	ld	hl,(xmap)
     842.  00:4F91  19                  	add	hl,de
     843.  00:4F92                      
     844.  00:4F92  DD 21 16 D4         	ld  ix,enemies
     845.  00:4F96  3E 40               	ld	a,64
     846.  00:4F98  D9                  	exx	
     847.  00:4F99  81                  	add	a,c			; random offset
     848.  00:4F9A  D9                  	exx	
     849.  00:4F9B                      
     850.  00:4F9B  FD 26 08            	ld	iyh,max_enem
     851.  00:4F9E  11 0E 00            	ld  de,enemy_data
     852.  00:4FA1                      
     853.  00:4FA1                      1:
     854.  00:4FA1  DD CB 07 46         	bit	0,(ix+enemy_data.status)
     855.  00:4FA5  20 31               	jr  nz,.next
     856.  00:4FA7                      
     857.  00:4FA7  DD 71 07            	ld  (ix+enemy_data.status),c
     858.  00:4FAA                      	; ld	(ix+enemy_data.frame),b	; dummy
     859.  00:4FAA                      
     860.  00:4FAA  DD 36 09 07         	ld  (ix+enemy_data.kind),7
     861.  00:4FAE                      
     862.  00:4FAE  D9                  	exx	
     863.  00:4FAF  DD 36 0B 07         	ld	(ix+enemy_data.color),7
     864.  00:4FB3  DD 73 0C            	ld	(ix+enemy_data.speed),e
     865.  00:4FB6  DD 72 0D            	ld	(ix+enemy_data.speed+1),d
     866.  00:4FB9  D9                  	exx
     867.  00:4FBA                      	
     868.  00:4FBA  C5                  	push	bc
     869.  00:4FBB  01 10 00            	ld bc,16
     870.  00:4FBE  09                  	add hl,bc 
     871.  00:4FBF  DD 75 01            	ld  (ix+enemy_data.x),l
     872.  00:4FC2  DD 74 02            	ld  (ix+enemy_data.x+1),h
     873.  00:4FC5  C1                  	pop		bc
     874.  00:4FC6                      	
     875.  00:4FC6  DD 77 00            	ld  (ix+enemy_data.y),a
     876.  00:4FC9  C6 20               	add	a,32
     877.  00:4FCB                      
     878.  00:4FCB  CD 93 4A            	call	set_size
     879.  00:4FCE                      
     880.  00:4FCE  DD 19               	add ix,de
     881.  00:4FD0  FD 25               	dec	iyh
     882.  00:4FD2  C8                  	ret	z
     883.  00:4FD3  FE AF               	cp	191-16
     884.  00:4FD5  38 CA               	jr	c,1b
     885.  00:4FD7  C9                  	ret
     886.  00:4FD8                      
     887.  00:4FD8                      .next
     888.  00:4FD8  DD 19               	add ix,de
     889.  00:4FDA  FD 25               	dec	iyh
     890.  00:4FDC  C8                  	ret	z
     891.  00:4FDD  18 C2               	jr	1b
     892.  00:4FDF                      
     893.  00:4FDF                      	
     894.  00:4FDF                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
     895.  00:4FDF                      ;
     896.  00:4FDF                      ;   logic for enemies -  fake for testing
     897.  00:4FDF                      ;
     898.  00:4FDF                      
     899.  00:4FDF                      npc_loop:
     900.  00:4FDF  DD 21 16 D4         	ld  ix,enemies
     901.  00:4FE3  06 08               	ld  b,max_enem
     902.  00:4FE5                      
     903.  00:4FE5  C5                  1:	push	bc
     904.  00:4FE6  DD 7E 07            	ld  a,(ix+enemy_data.status)
     905.  00:4FE9  E6 01               	and 1
     906.  00:4FEB  28 22               	jr  z,next
     907.  00:4FED                      
     908.  00:4FED  DD 7E 09            	ld	a,(ix+enemy_data.kind)
     909.  00:4FF0  A7                  	and	a
     910.  00:4FF1  CA 63 50            	jp	z,enemy0
     911.  00:4FF4  3D                  	dec a	;cp	1
     912.  00:4FF5                      	; jp	z,enemy1
     913.  00:4FF5  3D                  	dec a	;cp	2
     914.  00:4FF6  CA BE 50            	jp 	z,enemy2
     915.  00:4FF9  3D                  	dec a	;cp	3
     916.  00:4FFA                      	; jp 	z,enemy3
     917.  00:4FFA  3D                  	dec a	;cp	4
     918.  00:4FFB  CA 12 51            	jp 	z,enemy4
     919.  00:4FFE  3D                  	dec a	;cp	5
     920.  00:4FFF  CA 40 53            	jp 	z,enemy5
     921.  00:5002  3D                  	dec a	;cp	6
     922.  00:5003  CA A6 53            	jp 	z,enemy6
     923.  00:5006  3D                  	dec a	;cp	7
     924.  00:5007  CA 2D 54            	jp 	z,enemy7
     925.  00:500A                      
     926.  00:500A  FE F8               	cp	255-7
     927.  00:500C  CA 3F 50            	jp z,enemy255
     928.  00:500F                      
     929.  00:500F                      next:
     930.  00:500F  C1                  	pop	bc
     931.  00:5010  11 0E 00            	ld  de,enemy_data
     932.  00:5013  DD 19               	add ix,de
     933.  00:5015  10 CE               	djnz    1b
     934.  00:5017  C9                  	ret
     935.  00:5018                      ;;;;;;;;;;;;;;;;;;;;
     936.  00:5018                      npcdies:
     937.  00:5018  FD 36 07 00         	ld  (iy+enemy_data.status),0	; turn off this bullet
     938.  00:501C                      
     939.  00:501C  DD 36 0B 0A         	ld	(ix+enemy_data.color),10	; start explosion
     940.  00:5020  DD 36 09 FF         	ld	(ix+enemy_data.kind),255
     941.  00:5024  DD 36 08 02         	ld	(ix+enemy_data.cntr),2
     942.  00:5028  DD 36 0A 0C         	ld	(ix+enemy_data.frame),12
     943.  00:502C                      
     944.  00:502C  CD A2 4A            	call	rand8
     945.  00:502F  E6 03               	and	3
     946.  00:5031  C6 02               	add	a,2			; random enemy explosion
     947.  00:5033  CD 59 46            	call AFXPLAY
     948.  00:5036                      
     949.  00:5036  01 64 00            	ld	bc,100		; score for destruction of a flying enemy
     950.  00:5039  CD 94 4A            	call	add_bc_score_bin
     951.  00:503C  C3 0F 50            	jp	next
     952.  00:503F                      	
     953.  00:503F                      ;;;;;;;;;;;;;;;;;;;;
     954.  00:503F                      ; explosion
     955.  00:503F                      ;;;;;;;;;;;;;;;;;;;;
     956.  00:503F                      enemy255:
     957.  00:503F  DD 35 08            	dec	(ix+enemy_data.cntr)
     958.  00:5042  C2 0F 50            	jp	nz,next
     959.  00:5045  DD 36 08 02         	ld	(ix+enemy_data.cntr),2
     960.  00:5049  DD 34 0A            	inc	(ix+enemy_data.frame)
     961.  00:504C  DD 7E 0A            	ld	a,(ix+enemy_data.frame)
     962.  00:504F  FE 10               	cp	16
     963.  00:5051  38 BC               	jr	c,next
     964.  00:5053  DD 36 0B 08         	ld	(ix+enemy_data.color),8		; start explosion
     965.  00:5057  FE 1F               	cp	23+8
     966.  00:5059  C2 0F 50            	jp	nz,next
     967.  00:505C  DD 36 07 00         	ld	(ix+enemy_data.status),0
     968.  00:5060  C3 0F 50            	jp	next
     969.  00:5063                      
     970.  00:5063                      ;;;;;;;;;;;;;;;;;;;;
     971.  00:5063                      
     972.  00:5063                      enemy0:
     973.  00:5063                      enemy1:
     974.  00:5063  DD CB 07 76         	bit 6,(ix+enemy_data.status)
     975.  00:5067  28 23               	jr  z,.go_right
     976.  00:5069                      .go_left:
     977.  00:5069                      
     978.  00:5069  DD 6E 01            	ld	l,(ix+enemy_data.x)
     979.  00:506C  DD 66 02            	ld	h,(ix+enemy_data.x+1)
     980.  00:506F  2B                  	dec	hl
     981.  00:5070  DD 75 01            	ld  (ix+enemy_data.x),l
     982.  00:5073  DD 74 02            	ld  (ix+enemy_data.x+1),h
     983.  00:5076  ED 5B 0E D4         	ld	de,(xmap)
     984.  00:507A  A7                  	and	a
     985.  00:507B  ED 52               	sbc	hl,de
     986.  00:507D  11 E0 FF            	ld	de,-32
     987.  00:5080  A7                  	and	a
     988.  00:5081  ED 52               	sbc	hl,de
     989.  00:5083  F2 AD 50            	jp  p,1f
     990.  00:5086  DD 36 07 00         	ld	(ix+enemy_data.status),0
     991.  00:508A  18 21               	jr  1f
     992.  00:508C                      
     993.  00:508C                      .go_right:
     994.  00:508C                      
     995.  00:508C  DD 6E 01            	ld	l,(ix+enemy_data.x)
     996.  00:508F  DD 66 02            	ld	h,(ix+enemy_data.x+1)
     997.  00:5092  23                  	inc	hl
     998.  00:5093  DD 75 01            	ld  (ix+enemy_data.x),l
     999.  00:5096  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1000.  00:5099  ED 5B 0E D4         	ld	de,(xmap)
    1001.  00:509D  A7                  	and	a
    1002.  00:509E  ED 52               	sbc	hl,de
    1003.  00:50A0  11 20 01            	ld	de,256+32
    1004.  00:50A3  A7                  	and	a
    1005.  00:50A4  ED 52               	sbc	hl,de
    1006.  00:50A6  FA AD 50            	jp  m,1f
    1007.  00:50A9  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1008.  00:50AD                      1:
    1009.  00:50AD                      
    1010.  00:50AD  CD A2 4A            	call	rand8
    1011.  00:50B0  E6 7F               	and 	127
    1012.  00:50B2  CC B4 54            	call	z,book_enemy_shoot
    1013.  00:50B5                      
    1014.  00:50B5  CD 95 4A            	call	test_collision_msbullets
    1015.  00:50B8  D2 0F 50            	jp	nc,next
    1016.  00:50BB  C3 18 50            	jp	npcdies
    1017.  00:50BE                      
    1018.  00:50BE                      ;;;;;;;;;;;;;;;;;;;;
    1019.  00:50BE                      enemy2:
    1020.  00:50BE                      enemy3:
    1021.  00:50BE  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1022.  00:50C1  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1023.  00:50C4  DD 5E 0C            	ld	e,(ix+enemy_data.speed)
    1024.  00:50C7  DD 56 0D            	ld	d,(ix+enemy_data.speed+1)
    1025.  00:50CA  19                  	add	hl,de
    1026.  00:50CB  DD 75 01            	ld  (ix+enemy_data.x),l
    1027.  00:50CE  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1028.  00:50D1                      	
    1029.  00:50D1  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1030.  00:50D5  28 16               	jr  z,.go_right
    1031.  00:50D7                      .go_left:
    1032.  00:50D7                      
    1033.  00:50D7  ED 5B 0E D4         	ld	de,(xmap)
    1034.  00:50DB  A7                  	and	a
    1035.  00:50DC  ED 52               	sbc	hl,de
    1036.  00:50DE  11 E0 FF            	ld	de,-32
    1037.  00:50E1  A7                  	and	a
    1038.  00:50E2  ED 52               	sbc	hl,de
    1039.  00:50E4  F2 01 51            	jp  p,1f
    1040.  00:50E7  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1041.  00:50EB  18 14               	jr  1f
    1042.  00:50ED                      
    1043.  00:50ED                      .go_right:
    1044.  00:50ED                      
    1045.  00:50ED  ED 5B 0E D4         	ld	de,(xmap)
    1046.  00:50F1  A7                  	and	a
    1047.  00:50F2  ED 52               	sbc	hl,de
    1048.  00:50F4  11 20 01            	ld	de,256+32
    1049.  00:50F7  A7                  	and	a
    1050.  00:50F8  ED 52               	sbc	hl,de
    1051.  00:50FA  FA 01 51            	jp  m,1f
    1052.  00:50FD  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1053.  00:5101                      1:
    1054.  00:5101                      
    1055.  00:5101  CD A2 4A            	call	rand8
    1056.  00:5104  E6 7F               	and 	127
    1057.  00:5106  CC B4 54            	call	z,book_enemy_shoot
    1058.  00:5109                      
    1059.  00:5109  CD 95 4A            	call	test_collision_msbullets
    1060.  00:510C  D2 0F 50            	jp	nc,next
    1061.  00:510F  C3 18 50            	jp 	npcdies
    1062.  00:5112                      	
    1063.  00:5112                      	
    1064.  00:5112                      ;;;;;;;;;;;;;;;;;;;;
    1065.  00:5112                      enemy4:
    1066.  00:5112  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1067.  00:5115  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1068.  00:5118  DD 5E 0C            	ld	e,(ix+enemy_data.speed)
    1069.  00:511B  DD 56 0D            	ld	d,(ix+enemy_data.speed+1)
    1070.  00:511E  19                  	add	hl,de
    1071.  00:511F  DD 75 01            	ld  (ix+enemy_data.x),l
    1072.  00:5122  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1073.  00:5125                      	
    1074.  00:5125  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1075.  00:5129  28 16               	jr  z,.go_right
    1076.  00:512B                      .go_left:
    1077.  00:512B                      
    1078.  00:512B  ED 5B 0E D4         	ld	de,(xmap)
    1079.  00:512F  A7                  	and	a
    1080.  00:5130  ED 52               	sbc	hl,de
    1081.  00:5132  11 E0 FF            	ld	de,-32
    1082.  00:5135  A7                  	and	a
    1083.  00:5136  ED 52               	sbc	hl,de
    1084.  00:5138  F2 55 51            	jp  p,1f
    1085.  00:513B  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1086.  00:513F  18 14               	jr  1f
    1087.  00:5141                      
    1088.  00:5141                      .go_right:
    1089.  00:5141                      
    1090.  00:5141  ED 5B 0E D4         	ld	de,(xmap)
    1091.  00:5145  A7                  	and	a
    1092.  00:5146  ED 52               	sbc	hl,de
    1093.  00:5148  11 20 01            	ld	de,256+32
    1094.  00:514B  A7                  	and	a
    1095.  00:514C  ED 52               	sbc	hl,de
    1096.  00:514E  FA 55 51            	jp  m,1f
    1097.  00:5151  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1098.  00:5155                      1:
    1099.  00:5155                      
    1100.  00:5155  DD 7E 00            	ld	a,(ix+enemy_data.y)
    1101.  00:5158                      
    1102.  00:5158  DD CB 07 7E         	bit 7,(ix+enemy_data.status)
    1103.  00:515C  28 0B               	jr  z,.go_dwn
    1104.  00:515E                      .go_up:
    1105.  00:515E  3D                  	dec	a
    1106.  00:515F  FE 40               	cp	64
    1107.  00:5161  20 0F               	jr	nz,1f
    1108.  00:5163  DD CB 07 BE         	res	7,(ix+enemy_data.status)
    1109.  00:5167  18 09               	jr	1f
    1110.  00:5169                      .go_dwn:
    1111.  00:5169  3C                  	inc	a
    1112.  00:516A  FE AF               	cp	191-16
    1113.  00:516C  20 04               	jr	nz,1f
    1114.  00:516E  DD CB 07 FE         	set	7,(ix+enemy_data.status)
    1115.  00:5172                      	; jr	1f
    1116.  00:5172                      1:
    1117.  00:5172  DD 77 00            	ld	(ix+enemy_data.y),a
    1118.  00:5175                      
    1119.  00:5175  CD A2 4A            	call	rand8
    1120.  00:5178  E6 7F               	and 	127
    1121.  00:517A  CC B4 54            	call	z,book_enemy_shoot
    1122.  00:517D                      
    1123.  00:517D  CD 95 4A            	call	test_collision_msbullets
    1124.  00:5180  D2 0F 50            	jp	nc,next
    1125.  00:5183  C3 18 50            	jp 	npcdies
    1126.  00:5186                      	
    1127.  00:5186                      	
    1128.  00:5186                      ;;;;;;;;;;;;;;;;;;;;
    1129.  00:5186  (007A)              	align 0x100
    1130.  00:5200                      rotation:
    1131.  00:5200                      	db 0,16,32,48,48,32,16,0
    1131.  00:5200  00 10 20 30 30 20 10 00 
    1132.  00:5208                      ;;;;;;;;;;
    1133.  00:5208                      rotate:
    1134.  00:5208  DD 7E 08            	ld	a,(ix+enemy_data.cntr)
    1135.  00:520B  3C                  	inc a
    1136.  00:520C  DD 77 08            	ld	(ix+enemy_data.cntr),a
    1137.  00:520F  D9                  	exx
    1138.  00:5210  26 52               	ld h, high rotation
    1139.  00:5212  0F 0F               [2]	rrca
    1140.  00:5214  E6 07               	and 7
    1141.  00:5216  6F                  	ld	l,a
    1142.  00:5217  7E                  	ld a,(hl)
    1143.  00:5218  D9                  	exx
    1144.  00:5219  C9                  	ret
    1145.  00:521A                      	
    1146.  00:521A                      
    1147.  00:521A  (00E6)              	align 0x100
    1148.  00:5300                      sinewave:
    1149.  00:5300                      	db 2,1,2,1,2,1,1,1,1,1,1,1,0,1,0,0,0,0,-1,0,-1,-1,-1,-1,-1,-1,-1,-2,-1,-2,-1,-2,-2,-1,-2,-1,-2,-1,-1,-1,-1,-1,-1,-1,0,-1,0,0,0,0,1,0,1,1,1,1,1,1,1,2,1,2,1,2
    1149.  00:5300  02 01 02 01 02 01 01 01 01 01 01 01 00 01 00 00 
    1149.  00:5310  00 00 FF 00 FF FF FF FF FF FF FF FE FF FE FF FE 
    1149.  00:5320  FE FF FE FF FE FF FF FF FF FF FF FF 00 FF 00 00 
    1149.  00:5330  00 00 01 00 01 01 01 01 01 01 01 02 01 02 01 02 
    1150.  00:5340                      
    1151.  00:5340                      	
    1152.  00:5340                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1153.  00:5340                      enemy5:
    1154.  00:5340  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1155.  00:5343  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1156.  00:5346  DD 5E 0C            	ld	e,(ix+enemy_data.speed)
    1157.  00:5349  DD 56 0D            	ld	d,(ix+enemy_data.speed+1)
    1158.  00:534C  19                  	add	hl,de
    1159.  00:534D  DD 75 01            	ld  (ix+enemy_data.x),l
    1160.  00:5350  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1161.  00:5353                      	
    1162.  00:5353  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1163.  00:5357  28 16               	jr  z,.go_right
    1164.  00:5359                      .go_left:
    1165.  00:5359                      
    1166.  00:5359  ED 5B 0E D4         	ld	de,(xmap)
    1167.  00:535D  A7                  	and	a
    1168.  00:535E  ED 52               	sbc	hl,de
    1169.  00:5360  11 E0 FF            	ld	de,-32
    1170.  00:5363  A7                  	and	a
    1171.  00:5364  ED 52               	sbc	hl,de
    1172.  00:5366  F2 83 53            	jp  p,1f
    1173.  00:5369  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1174.  00:536D  18 14               	jr  1f
    1175.  00:536F                      
    1176.  00:536F                      .go_right:
    1177.  00:536F                      
    1178.  00:536F  ED 5B 0E D4         	ld	de,(xmap)
    1179.  00:5373  A7                  	and	a
    1180.  00:5374  ED 52               	sbc	hl,de
    1181.  00:5376  11 20 01            	ld	de,256+32
    1182.  00:5379  A7                  	and	a
    1183.  00:537A  ED 52               	sbc	hl,de
    1184.  00:537C  FA 83 53            	jp  m,1f
    1185.  00:537F  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1186.  00:5383                      1:
    1187.  00:5383                      
    1188.  00:5383  DD 7E 08            	ld	a,(ix+enemy_data.cntr)
    1189.  00:5386  3C                  	inc	a
    1190.  00:5387  DD 77 08            	ld	(ix+enemy_data.cntr),a
    1191.  00:538A  E6 3F               	and	63
    1192.  00:538C  6F                  	ld	l,a
    1193.  00:538D  26 53               	ld	h,high sinewave
    1194.  00:538F  7E                  	ld	a,(hl)
    1195.  00:5390  DD 86 00            	add	a,(ix+enemy_data.y)
    1196.  00:5393  DD 77 00            	ld	(ix+enemy_data.y),a
    1197.  00:5396                      	
    1198.  00:5396  CD A2 4A            	call	rand8
    1199.  00:5399  A7                  	and		a
    1200.  00:539A  CC B4 54            	call	z,book_enemy_shoot
    1201.  00:539D                      
    1202.  00:539D  CD 95 4A            	call	test_collision_msbullets
    1203.  00:53A0  D2 0F 50            	jp	nc,next
    1204.  00:53A3  C3 18 50            	jp 	npcdies
    1205.  00:53A6                      
    1206.  00:53A6                      
    1207.  00:53A6                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1208.  00:53A6                      enemy6:
    1209.  00:53A6  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1210.  00:53A9  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1211.  00:53AC  DD 5E 0C            	ld	e,(ix+enemy_data.speed)
    1212.  00:53AF  DD 56 0D            	ld	d,(ix+enemy_data.speed+1)
    1213.  00:53B2  19                  	add	hl,de
    1214.  00:53B3  DD 75 01            	ld  (ix+enemy_data.x),l
    1215.  00:53B6  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1216.  00:53B9                      	
    1217.  00:53B9  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1218.  00:53BD  28 1E               	jr  z,.go_right
    1219.  00:53BF                      .go_left:
    1220.  00:53BF  CD 08 52            	call	rotate
    1221.  00:53C2  C6 C4               	add	a,192+4
    1222.  00:53C4  DD 77 0A            	ld	(ix+enemy_data.frame),a
    1223.  00:53C7  ED 5B 0E D4         	ld	de,(xmap)
    1224.  00:53CB  A7                  	and	a
    1225.  00:53CC  ED 52               	sbc	hl,de
    1226.  00:53CE  11 E0 FF            	ld	de,-32
    1227.  00:53D1  A7                  	and	a
    1228.  00:53D2  ED 52               	sbc	hl,de
    1229.  00:53D4  F2 F9 53            	jp  p,1f
    1230.  00:53D7  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1231.  00:53DB  18 1C               	jr  1f
    1232.  00:53DD                      
    1233.  00:53DD                      .go_right:
    1234.  00:53DD  CD 08 52            	call	rotate
    1235.  00:53E0  C6 C0               	add	a,192
    1236.  00:53E2  DD 77 0A            	ld	(ix+enemy_data.frame),a
    1237.  00:53E5                      
    1238.  00:53E5  ED 5B 0E D4         	ld	de,(xmap)
    1239.  00:53E9  A7                  	and	a
    1240.  00:53EA  ED 52               	sbc	hl,de
    1241.  00:53EC  11 20 01            	ld	de,256+32
    1242.  00:53EF  A7                  	and	a
    1243.  00:53F0  ED 52               	sbc	hl,de
    1244.  00:53F2  FA F9 53            	jp  m,1f
    1245.  00:53F5  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1246.  00:53F9                      1:
    1247.  00:53F9  CD 93 4A            	call	set_size	; size varies with frame
    1248.  00:53FC                      		
    1249.  00:53FC  DD 7E 00            	ld	a,(ix+enemy_data.y)
    1250.  00:53FF                      
    1251.  00:53FF  DD CB 07 7E         	bit 7,(ix+enemy_data.status)
    1252.  00:5403  28 0B               	jr  z,.go_dwn
    1253.  00:5405                      .go_up:
    1254.  00:5405  3D                  	dec	a
    1255.  00:5406  FE 40               	cp	64
    1256.  00:5408  20 0F               	jr	nz,1f
    1257.  00:540A  DD CB 07 BE         	res	7,(ix+enemy_data.status)
    1258.  00:540E  18 09               	jr	1f
    1259.  00:5410                      .go_dwn:
    1260.  00:5410  3C                  	inc	a
    1261.  00:5411  FE AF               	cp	191-16
    1262.  00:5413  20 04               	jr	nz,1f
    1263.  00:5415  DD CB 07 FE         	set	7,(ix+enemy_data.status)
    1264.  00:5419                      	; jr	1f
    1265.  00:5419                      1:
    1266.  00:5419  DD 77 00            	ld	(ix+enemy_data.y),a
    1267.  00:541C                      
    1268.  00:541C  CD A2 4A            	call	rand8
    1269.  00:541F  E6 7F               	and 	127
    1270.  00:5421  CC B4 54            	call	z,book_enemy_shoot
    1271.  00:5424                      
    1272.  00:5424  CD 95 4A            	call	test_collision_msbullets
    1273.  00:5427  D2 0F 50            	jp	nc,next
    1274.  00:542A  C3 18 50            	jp	npcdies
    1275.  00:542D                      	
    1276.  00:542D                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1277.  00:542D                      enemy7:	
    1278.  00:542D  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1279.  00:5430  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1280.  00:5433  DD 5E 0C            	ld	e,(ix+enemy_data.speed)
    1281.  00:5436  DD 56 0D            	ld	d,(ix+enemy_data.speed+1)
    1282.  00:5439  19                  	add	hl,de
    1283.  00:543A  DD 75 01            	ld  (ix+enemy_data.x),l
    1284.  00:543D  DD 74 02            	ld  (ix+enemy_data.x+1),h
    1285.  00:5440                      	
    1286.  00:5440  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1287.  00:5444  28 1E               	jr  z,.go_right
    1288.  00:5446                      .go_left:
    1289.  00:5446  CD 08 52            	call	rotate
    1290.  00:5449  C6 C4               	add	a,192+4
    1291.  00:544B  DD 77 0A            	ld	(ix+enemy_data.frame),a
    1292.  00:544E                      
    1293.  00:544E  ED 5B 0E D4         	ld	de,(xmap)
    1294.  00:5452  A7                  	and	a
    1295.  00:5453  ED 52               	sbc	hl,de
    1296.  00:5455  11 E0 FF            	ld	de,-32
    1297.  00:5458  A7                  	and	a
    1298.  00:5459  ED 52               	sbc	hl,de
    1299.  00:545B  F2 80 54            	jp  p,1f
    1300.  00:545E  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1301.  00:5462  18 1C               	jr  1f
    1302.  00:5464                      
    1303.  00:5464                      .go_right:
    1304.  00:5464  CD 08 52            	call	rotate
    1305.  00:5467  C6 C0               	add	a,192
    1306.  00:5469  DD 77 0A            	ld	(ix+enemy_data.frame),a
    1307.  00:546C                      	
    1308.  00:546C  ED 5B 0E D4         	ld	de,(xmap)
    1309.  00:5470  A7                  	and	a
    1310.  00:5471  ED 52               	sbc	hl,de
    1311.  00:5473  11 20 01            	ld	de,256+32
    1312.  00:5476  A7                  	and	a
    1313.  00:5477  ED 52               	sbc	hl,de
    1314.  00:5479  FA 80 54            	jp  m,1f
    1315.  00:547C  DD 36 07 00         	ld	(ix+enemy_data.status),0
    1316.  00:5480                      1:
    1317.  00:5480  CD 93 4A            	call	set_size	; size varies with frame
    1318.  00:5483                      
    1319.  00:5483  DD 7E 00            	ld	a,(ix+enemy_data.y)
    1320.  00:5486                      
    1321.  00:5486  DD CB 07 7E         	bit 7,(ix+enemy_data.status)
    1322.  00:548A  28 0B               	jr  z,.go_dwn
    1323.  00:548C                      .go_up:
    1324.  00:548C  3D                  	dec	a
    1325.  00:548D  FE 40               	cp	64
    1326.  00:548F  20 0F               	jr	nz,1f
    1327.  00:5491  DD CB 07 BE         	res	7,(ix+enemy_data.status)
    1328.  00:5495  18 09               	jr	1f
    1329.  00:5497                      .go_dwn:
    1330.  00:5497  3C                  	inc	a
    1331.  00:5498  FE AF               	cp	191-16
    1332.  00:549A  20 04               	jr	nz,1f
    1333.  00:549C  DD CB 07 FE         	set	7,(ix+enemy_data.status)
    1334.  00:54A0                      	; jr	1f
    1335.  00:54A0                      1:
    1336.  00:54A0  DD 77 00            	ld	(ix+enemy_data.y),a
    1337.  00:54A3                      
    1338.  00:54A3  CD A2 4A            	call	rand8
    1339.  00:54A6  E6 7F               	and 	127
    1340.  00:54A8  CC B4 54            	call	z,book_enemy_shoot
    1341.  00:54AB                      
    1342.  00:54AB  CD 95 4A            	call	test_collision_msbullets
    1343.  00:54AE  D2 0F 50            	jp	nc,next
    1344.  00:54B1  C3 18 50            	jp 	npcdies
    1345.  00:54B4                      	
    1346.  00:54B4                      
    1347.  00:54B4                      
    1348.  00:54B4                      ; enemy3:
    1349.  00:54B4                      	; bit 6,(ix+enemy_data.status)
    1350.  00:54B4                      	; jr  z,.go_right
    1351.  00:54B4                      ; .go_left:
    1352.  00:54B4                      	; call	rotate
    1353.  00:54B4                      	; add	a,224
    1354.  00:54B4                      	; ld	(ix+enemy_data.frame),a
    1355.  00:54B4                      	; dec (ix+enemy_data.x)
    1356.  00:54B4                      	; ld  a,64-1
    1357.  00:54B4                      	; cp  (ix+enemy_data.x)
    1358.  00:54B4                      	; jr  nz,1f
    1359.  00:54B4                      	; res 6,(ix+enemy_data.status)
    1360.  00:54B4                      	; jr  1f
    1361.  00:54B4                      ; .go_right:
    1362.  00:54B4                      	; call	rotate
    1363.  00:54B4                      	; add	a,240
    1364.  00:54B4                      	; ld	(ix+enemy_data.frame),a
    1365.  00:54B4                      	; inc (ix+enemy_data.x)
    1366.  00:54B4                      	; ld  a,192-16
    1367.  00:54B4                      	; cp  (ix+enemy_data.x)
    1368.  00:54B4                      	; jr  nz,1f
    1369.  00:54B4                      	; set 6,(ix+enemy_data.status)
    1370.  00:54B4                      ; 1:
    1371.  00:54B4                      	; ld	(ix+enemy_data.color),14
    1372.  00:54B4                      	; jp	next
    1373.  00:54B4                      
    1374.  00:54B4                      
    1375.  00:54B4                      
    1376.  00:54B4                      
    1377.  00:54B4                      ; in
    1378.  00:54B4                      ;	IX -> enemy ship
    1379.  00:54B4                      ; out
    1380.  00:54B4                      ;	active bullet in list enem_bullets
    1381.  00:54B4                      
    1382.  00:54B4                      book_enemy_shoot:
    1383.  00:54B4                      	; aim to the manta
    1384.  00:54B4  0E 20               	ld	c,32
    1385.  00:54B6  59                  	ld	e,c
    1386.  00:54B7  3A 10 D4            	ld	a,(yship)
    1387.  00:54BA  47                  	ld	b,a
    1388.  00:54BB  DD 56 00            	ld	d,(ix+enemy_data.y)
    1389.  00:54BE  CD 96 4A            	call	CollisionCheck_8b
    1390.  00:54C1  D0                  	ret		nc
    1391.  00:54C2                      
    1392.  00:54C2                      	; avoid shooting from outside the screen	
    1393.  00:54C2  06 00               	ld	b,0
    1394.  00:54C4  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1395.  00:54C7  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1396.  00:54CA  DD 4E 03            	ld 	c,(ix+enemy_data.xoff)
    1397.  00:54CD  09                  	add hl,bc
    1398.  00:54CE  DD 46 05            	ld 	b,(ix+enemy_data.xsize)
    1399.  00:54D1                      	
    1400.  00:54D1  ED 5B 0E D4         	ld	de,(xmap)
    1401.  00:54D5  0E FF               	ld 	c,255
    1402.  00:54D7  CD 97 4A            	call	CalcCollision
    1403.  00:54DA  D0                  	ret		nc
    1404.  00:54DB                      	
    1405.  00:54DB                      
    1406.  00:54DB  FD 21 A2 D4         	ld  iy,enem_bullets
    1407.  00:54DF  11 0E 00            	ld  de,enemy_data
    1408.  00:54E2                      	
    1409.  00:54E2                      	repeat	max_enem_bullets
    1410.  00:54E2                    < 
    1411.  00:54E2                    < 	bit	0,(iy+enemy_data.status)
    1412.  00:54E2                    < 	jr  z,.activate_this
    1413.  00:54E2                    < 	add iy,de
    1414.  00:54E2                    < 
    1415.  00:54E2                    < 	endrepeat
    1415.  00:54E2  FD CB 07 46 28 13 FD 19 FD CB 07 46 28 0B FD 19 
    1415.  00:54F2  FD CB 07 46 28 03 FD 19 
    1416.  00:54FA  C9                  	ret
    1417.  00:54FB                      
    1418.  00:54FB                      .activate_this:
    1419.  00:54FB  DD CB 07 76         	bit 6,(ix+enemy_data.status)
    1420.  00:54FF  20 0F               	jr  nz,.shootsx
    1421.  00:5501                      .shootdx
    1422.  00:5501  FD 36 07 01         	ld  (iy+enemy_data.status),1
    1423.  00:5505                      	; ld  hl,enemy_bullet_speed
    1424.  00:5505                      	; ld	e,(ix+enemy_data.speed)
    1425.  00:5505                      	; ld	d,(ix+enemy_data.speed+1)
    1426.  00:5505                      	; add	hl,de
    1427.  00:5505  DD 6E 0C            	ld	l,(ix+enemy_data.speed)
    1428.  00:5508  DD 66 0D            	ld	h,(ix+enemy_data.speed+1)
    1429.  00:550B  23 23               [enemy_bullet_speed]	inc hl
    1430.  00:550D  C3 1C 55            	jp  1f
    1431.  00:5510                      
    1432.  00:5510                      .shootsx
    1433.  00:5510  FD 36 07 41         	ld  (iy+enemy_data.status),1 + 64
    1434.  00:5514                      	; ld  hl,-enemy_bullet_speed
    1435.  00:5514                      	; ld	e,(ix+enemy_data.speed)
    1436.  00:5514                      	; ld	d,(ix+enemy_data.speed+1)
    1437.  00:5514                      	; add	hl,de
    1438.  00:5514  DD 6E 0C            	ld	l,(ix+enemy_data.speed)
    1439.  00:5517  DD 66 0D            	ld	h,(ix+enemy_data.speed+1)
    1440.  00:551A  2B 2B               [enemy_bullet_speed]	dec hl
    1441.  00:551C                      	
    1442.  00:551C                      1:
    1443.  00:551C  FD 75 0C            	ld  (iy+enemy_data.speed),l
    1444.  00:551F  FD 74 0D            	ld  (iy+enemy_data.speed+1),h
    1445.  00:5522                      
    1446.  00:5522  3E 30               	ld  a,12*4			; it could depend on enemy ship
    1447.  00:5524  FD 77 0A            	ld  (iy+enemy_data.frame),a
    1448.  00:5527                      
    1449.  00:5527  CD 93 4A            	call	set_size2	; set  xoff,yoff,xsize,ysize for sprite collision
    1450.  00:552A                      
    1451.  00:552A  DD 6E 01            	ld	l,(ix+enemy_data.x)
    1452.  00:552D  DD 66 02            	ld	h,(ix+enemy_data.x+1)
    1453.  00:5530  FD 75 01            	ld  (iy+enemy_data.x),l
    1454.  00:5533  FD 74 02            	ld  (iy+enemy_data.x+1),h
    1455.  00:5536                      
    1456.  00:5536  DD 7E 00            	ld  a,(ix+enemy_data.y)
    1457.  00:5539  FD 77 00            	ld  (iy+enemy_data.y),a
    1458.  00:553C  FD 36 08 9C         	ld  (iy+enemy_data.cntr),(256+32+24)/enemy_bullet_speed
    1459.  00:5540                      
    1460.  00:5540                      	; ld  (iy+enemy_data.color),11
    1461.  00:5540                      	
    1462.  00:5540  3E 08               	ld a,8			; enemy shoot
    1463.  00:5542  CD 59 46            	call AFXPLAY
    1464.  00:5545  C9                  	ret
    1465.  00:5546                      
    1466.  00:5546                      ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    1467.  00:5546                      ;
    1468.  00:5546                      ; manage active enemy bullets
    1469.  00:5546                      ;
    1470.  00:5546                      
    1471.  00:5546                      enemy_bullet_loop:
    1472.  00:5546                      
    1473.  00:5546  21 A3 49            	ld	hl,ms_ani
    1474.  00:5549  3A 13 D4            	ld  a,(aniframe)
    1475.  00:554C  4F                  	ld	c,a
    1476.  00:554D  06 00               	ld	b,0
    1477.  00:554F  09                  	add	hl,bc
    1478.  00:5550  7E                  	ld	a,(hl)
    1479.  00:5551  87                  	add	a,a
    1480.  00:5552  87                  	add	a,a
    1481.  00:5553  FD 21 F3 49         	ld	iy,ms_col_win
    1482.  00:5557  4F                  	ld	c,a
    1483.  00:5558  06 00               	ld	b,0
    1484.  00:555A  FD 09               	add	iy,bc	; iy aims to MS size for current frame
    1485.  00:555C                      
    1486.  00:555C                      	;iy -> [minx(h) maxx(h) miny(h) maxy(h)]
    1487.  00:555C                      
    1488.  00:555C  DD 21 A2 D4         	ld  ix,enem_bullets
    1489.  00:5560  11 0E 00            	ld  de,enemy_data
    1490.  00:5563                      	repeat	max_enem_bullets
    1491.  00:5563                    < 2:
    1492.  00:5563                    < 	exx
    1493.  00:5563                    < 	bit  0,(ix+enemy_data.status)
    1494.  00:5563                    < 	jp  z,1f
    1495.  00:5563                    < 
    1496.  00:5563                    < 	ld  l,(ix+enemy_data.x)
    1497.  00:5563                    < 	ld  h,(ix+enemy_data.x+1)
    1498.  00:5563                    < 	ld  e,(ix+enemy_data.speed)
    1499.  00:5563                    < 	ld  d,(ix+enemy_data.speed+1)
    1500.  00:5563                    < 	add hl,de						; move right or  left
    1501.  00:5563                    < 	ld  (ix+enemy_data.x),l
    1502.  00:5563                    < 	ld  (ix+enemy_data.x+1),h
    1503.  00:5563                    < 
    1504.  00:5563                    < 	ld	a,(ms_state)				; MS is immune to bullets while looping
    1505.  00:5563                    < 	cp	ms_loop_right2left
    1506.  00:5563                    < 	jr	z,3f
    1507.  00:5563                    < 	cp	ms_loop_left2right
    1508.  00:5563                    < 	jr	z,3f
    1509.  00:5563                    < 
    1510.  00:5563                    < 	ld	a,(god_mode)
    1511.  00:5563                    < 	and 	a						
    1512.  00:5563                    < 	call	z,test_collision_enemy_bullets
    1513.  00:5563                    < 	jp	nc,3f
    1514.  00:5563                    < 	res 0,(ix+enemy_data.status)	; turn off this bullet
    1515.  00:5563                    < 	jp	test_obstacles.found		; start ms explosion
    1516.  00:5563                    < 3:
    1517.  00:5563                    < 	dec	(ix+enemy_data.cntr)
    1518.  00:5563                    < 	jp  nz,1f
    1519.  00:5563                    < 	res 0,(ix+enemy_data.status)
    1520.  00:5563                    < 1:
    1521.  00:5563                    < 	exx
    1522.  00:5563                    < 	add ix,de
    1523.  00:5563                    < 	endrepeat
    1523.  00:5563  D9 DD CB 07 46 CA A4 55 DD 6E 01 DD 66 02 DD 5E 
    1523.  00:5573  0C DD 56 0D 19 DD 75 01 DD 74 02 3A 14 D4 FE 08 
    1523.  00:5583  28 15 FE 09 28 11 3A 15 D4 A7 CC 98 4A D2 9A 55 
    1523.  00:5593  DD CB 07 86 C3 30 56 DD 35 08 C2 A4 55 DD CB 07 
    1523.  00:55A3  86 D9 DD 19 D9 DD CB 07 46 CA E8 55 DD 6E 01 DD 
    1523.  00:55B3  66 02 DD 5E 0C DD 56 0D 19 DD 75 01 DD 74 02 3A 
    1523.  00:55C3  14 D4 FE 08 28 15 FE 09 28 11 3A 15 D4 A7 CC 98 
    1523.  00:55D3  4A D2 DE 55 DD CB 07 86 C3 30 56 DD 35 08 C2 E8 
    1523.  00:55E3  55 DD CB 07 86 D9 DD 19 D9 DD CB 07 46 CA 2C 56 
    1523.  00:55F3  DD 6E 01 DD 66 02 DD 5E 0C DD 56 0D 19 DD 75 01 
    1523.  00:5603  DD 74 02 3A 14 D4 FE 08 28 15 FE 09 28 11 3A 15 
    1523.  00:5613  D4 A7 CC 98 4A D2 22 56 DD CB 07 86 C3 30 56 DD 
    1523.  00:5623  35 08 C2 2C 56 DD CB 07 86 D9 DD 19 
    1524.  00:562F  C9                  	ret
    1525.  00:5630                      
    1526.  00:5630                      
    1527.  00:5630                      test_obstacles.found
    1528.  00:5630  C9                  	ret
     357   00:5631                      	
     358   00:5631                      ;-------------------------------------
     359   00:5631                      	
     360   00:5631                      	; page 0,1	
     361   00:5631                      ; _metatable:
     362   00:5631                      	; incbin 	metatable.bin
     363   00:5631                      	
     364   00:5631                      	; page 1
     365   00:5631                      ; _backmap:
     366   00:5631                      	; incbin	backmap.bin
     367   00:5631                      
     368   00:5631                      	; include hwsprites.asm
     369   00:5631                      	
     370   00:5631                      	; include mainhero_LMMM.asm
     371   00:5631                      	; include probe_level.asm
     372   00:5631                      
     373   00:5631                      	page 2,3
     374   02:8000                      _scorebar:	
     375   02:8000  (1800)              	incbin scorebar.bin
     376   02:9800                      	
     377   02:9800  (04)                	page 4
     378   04:A000                      _tiles0:
     379   04:A000  (2000)              	incbin "tiles.bin",0x0000,0x2000
     380   04:C000  (05)                	page 5
     381   05:A000  (2000)              	incbin "tiles.bin",0x2000,0x2000
     382   05:C000  (06)                	page 6
     383   06:A000  (2000)              	incbin "tiles.bin",0x4000,0x2000
     384   06:C000  (07)                	page 7
     385   07:A000  (2000)              	incbin "tiles.bin",0x6000,0x2000
     386   07:C000  (08)                	page 8
     387   08:A000  (2000)              	incbin "tiles.bin",0x8000,0x2000
     388   08:C000  (09)                	page 9
     389   09:A000  (2000)              	incbin "tiles.bin",0xA000,0x2000
     390   09:C000  (0A)                	page 10
     391   0A:A000  (2000)              	incbin "tiles.bin",0xC000,0x2000
     392   0A:C000  (0B)                	page 11
     393   0B:A000  (1900)              	incbin "tiles.bin",0xE000;,0x2000
     394   0B:B900                      	
     395   0B:B900                      	
     396   0B:B900  (0F)                	page 15
     397   0F:A000                      _level:
     398   0F:A000  (0B00)              	incbin "datamap.bin"
     399   0F:AB00  (0F)                	page 15
     400   0F:AB00                      sprtdata:
     401   0F:AB00  (0800)              	incbin 	uridium_rev7.bin
     402   0F:B300                      	
     403   0F:B300                      	page 14,15
     404   0E:8000                      demo_song:
     405   0E:8000                      	org 0x0040
     406   0E:0040                      	include	"demosong.asm"
       1.  0E:0040                      ; Compiled using tt_compile.exe V0.2.1 [30-03-2015]
       2.  0E:0040                      ; Copyright 2015 Richard Cornelisse
       3.  0E:0040                      
       4.  0E:0040                      ; Song: Andorogynus Stage1 Test         
       5.  0E:0040                      ; By:   Arr. by Gryzor87     january2013
       6.  0E:0040                      
       7.  0E:0040                      ;	org $c000
       8.  0E:0040                      
       9.  0E:0040                      ; [ Song start data ]
      10.  0E:0040  0A                  	db $0A				; Initial song speed.
      11.  0E:0041  09 01               	dw .waveform_start 		; Start of the waveform data.
      12.  0E:0043  29 03               	dw .instrument_start 		; Start of the instrument data.
      13.  0E:0045                      
      14.  0E:0045                      ; [ Song order pointer list ]
      15.  0E:0045                      .restart:
      16.  0E:0045                      		dw .track_0,.track_1,.track_2,.track_3,.track_3,.track_3,.track_3,.track_3		; Sequence step 0 /pattern 0
      16.  0E:0045  F7 04 5A 05 9E 05 DD 05 DD 05 DD 05 DD 05 DD 05 
      17.  0E:0055                      		dw .track_4,.track_5,.track_6,.track_3,.track_3,.track_3,.track_3,.track_3		; Sequence step 1 /pattern 1
      17.  0E:0055  DF 05 41 06 85 06 DD 05 DD 05 DD 05 DD 05 DD 05 
      18.  0E:0065                      		dw .track_7,.track_8,.track_9,.track_10,.track_10,.track_10,.track_10,.track_10		; Sequence step 2 /pattern 2
      18.  0E:0065  C2 06 F4 06 16 07 35 07 35 07 35 07 35 07 35 07 
      19.  0E:0075                      		dw .track_0,.track_1,.track_2,.track_3,.track_3,.track_3,.track_3,.track_3		; Sequence step 3 /pattern 0
      19.  0E:0075  F7 04 5A 05 9E 05 DD 05 DD 05 DD 05 DD 05 DD 05 
      20.  0E:0085                      		dw .track_4,.track_5,.track_6,.track_3,.track_3,.track_3,.track_3,.track_3		; Sequence step 4 /pattern 1
      20.  0E:0085  DF 05 41 06 85 06 DD 05 DD 05 DD 05 DD 05 DD 05 
      21.  0E:0095                      		dw .track_7,.track_8,.track_9,.track_10,.track_10,.track_10,.track_10,.track_10		; Sequence step 5 /pattern 2
      21.  0E:0095  C2 06 F4 06 16 07 35 07 35 07 35 07 35 07 35 07 
      22.  0E:00A5                      		dw .track_11,.track_12,.track_13,.track_14,.track_15,.track_16,.track_3,.track_3		; Sequence step 6 /pattern 3
      22.  0E:00A5  37 07 68 07 AD 07 F0 07 00 08 10 08 DD 05 DD 05 
      23.  0E:00B5                      		dw .track_0,.track_1,.track_17,.track_18,.track_19,.track_20,.track_21,.track_3		; Sequence step 7 /pattern 4
      23.  0E:00B5  F7 04 5A 05 1A 08 55 08 A5 08 EC 08 30 09 DD 05 
      24.  0E:00C5                      		dw .track_4,.track_5,.track_22,.track_23,.track_24,.track_25,.track_26,.track_27		; Sequence step 8 /pattern 5
      24.  0E:00C5  DF 05 41 06 3C 09 77 09 CB 09 09 0A 52 0A 71 0A 
      25.  0E:00D5                      		dw .track_7,.track_8,.track_28,.track_29,.track_30,.track_31,.track_32,.track_33		; Sequence step 9 /pattern 6
      25.  0E:00D5  C2 06 F4 06 8C 0A B1 0A DA 0A FD 0A 28 0B 4C 0B 
      26.  0E:00E5                      		dw .track_34,.track_35,.track_36,.track_37,.track_38,.track_39,.track_40,.track_41		; Sequence step 10 /pattern 7
      26.  0E:00E5  60 0B 8F 0B B8 0B FB 0B 24 0C 53 0C 6A 0C AE 0C 
      27.  0E:00F5                      
      28.  0E:00F5                      		dw .track_43,.track_43,.track_43,.track_43,.track_43,.track_43,.track_43,.track_43		; Sequence step 11 /pattern 8
      28.  0E:00F5  DB 0C DB 0C DB 0C DB 0C DB 0C DB 0C DB 0C DB 0C 
      29.  0E:0105  00 00 45 00         		dw 0x0000, .restart			; End of sequence delimiter + restart address.
      30.  0E:0109                      
      31.  0E:0109                      .waveform_start:
      32.  0E:0109                      	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00	; Waveform 0
      32.  0E:0109  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      32.  0E:0119  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      33.  0E:0129                      	db $80,$B0,$C0,$10,$1A,$2A,$2C,$1A,$00,$E0,$D0,$E0,$22,$53,$70,$75,$70,$31,$EA,$80,$88,$8A,$8C,$8E,$00,$7F,$75,$73,$62,$00,$C0,$90	; Waveform 1
      33.  0E:0129  80 B0 C0 10 1A 2A 2C 1A 00 E0 D0 E0 22 53 70 75 
      33.  0E:0139  70 31 EA 80 88 8A 8C 8E 00 7F 75 73 62 00 C0 90 
      34.  0E:0149                      	db $30,$50,$50,$30,$00,$00,$10,$40,$60,$70,$60,$30,$F0,$E0,$E0,$00,$20,$20,$10,$C0,$A0,$90,$A0,$C0,$00,$00,$D0,$B0,$B0,$D0,$00,$00	; Waveform 2
      34.  0E:0149  30 50 50 30 00 00 10 40 60 70 60 30 F0 E0 E0 00 
      34.  0E:0159  20 20 10 C0 A0 90 A0 C0 00 00 D0 B0 B0 D0 00 00 
      35.  0E:0169                      	db $78,$70,$68,$60,$58,$50,$48,$40,$38,$30,$28,$20,$18,$10,$08,$00,$78,$70,$68,$60,$58,$50,$48,$40,$38,$30,$28,$20,$18,$10,$08,$00	; Waveform 3
      35.  0E:0169  78 70 68 60 58 50 48 40 38 30 28 20 18 10 08 00 
      35.  0E:0179  78 70 68 60 58 50 48 40 38 30 28 20 18 10 08 00 
      36.  0E:0189                      	db $50,$7F,$7F,$50,$B0,$80,$80,$B0,$50,$7F,$7F,$50,$B0,$80,$80,$B0,$50,$7F,$7F,$50,$B0,$80,$80,$B0,$50,$7F,$7F,$50,$B0,$80,$80,$B0	; Waveform 4
      36.  0E:0189  50 7F 7F 50 B0 80 80 B0 50 7F 7F 50 B0 80 80 B0 
      36.  0E:0199  50 7F 7F 50 B0 80 80 B0 50 7F 7F 50 B0 80 80 B0 
      37.  0E:01A9                      	db $00,$40,$7F,$40,$01,$C0,$81,$C0,$01,$40,$7F,$40,$01,$C0,$01,$40,$01,$E0,$01,$20,$01,$F0,$01,$10,$01,$FF,$FF,$FF,$FF,$40,$40,$40	; Waveform 5
      37.  0E:01A9  00 40 7F 40 01 C0 81 C0 01 40 7F 40 01 C0 01 40 
      37.  0E:01B9  01 E0 01 20 01 F0 01 10 01 FF FF FF FF 40 40 40 
      38.  0E:01C9                      	db $00,$19,$31,$47,$5A,$6A,$75,$7D,$7F,$7D,$75,$6A,$5A,$47,$31,$19,$00,$E0,$C0,$A0,$80,$A0,$C0,$E0,$00,$20,$40,$60,$7F,$60,$40,$20	; Waveform 6
      38.  0E:01C9  00 19 31 47 5A 6A 75 7D 7F 7D 75 6A 5A 47 31 19 
      38.  0E:01D9  00 E0 C0 A0 80 A0 C0 E0 00 20 40 60 7F 60 40 20 
      39.  0E:01E9                      	db $00,$4E,$62,$6D,$75,$7A,$7D,$7E,$7F,$7E,$7D,$7A,$75,$6D,$62,$4E,$00,$B1,$9D,$92,$8A,$85,$82,$81,$80,$81,$82,$85,$8A,$92,$9D,$B1	; Waveform 7
      39.  0E:01E9  00 4E 62 6D 75 7A 7D 7E 7F 7E 7D 7A 75 6D 62 4E 
      39.  0E:01F9  00 B1 9D 92 8A 85 82 81 80 81 82 85 8A 92 9D B1 
      40.  0E:0209                      	db $00,$68,$48,$18,$48,$68,$28,$00,$48,$77,$58,$08,$28,$38,$00,$B8,$08,$58,$00,$E8,$F8,$00,$B8,$98,$C8,$08,$E8,$A8,$C8,$F8,$C8,$A8	; Waveform 8
      40.  0E:0209  00 68 48 18 48 68 28 00 48 77 58 08 28 38 00 B8 
      40.  0E:0219  08 58 00 E8 F8 00 B8 98 C8 08 E8 A8 C8 F8 C8 A8 
      41.  0E:0229                      	db $00,$F8,$F0,$E8,$E0,$D8,$D0,$C8,$C0,$B8,$B0,$A8,$A0,$98,$90,$88,$80,$7F,$70,$68,$60,$58,$50,$48,$40,$38,$30,$28,$20,$18,$10,$08	; Waveform 9
      41.  0E:0229  00 F8 F0 E8 E0 D8 D0 C8 C0 B8 B0 A8 A0 98 90 88 
      41.  0E:0239  80 7F 70 68 60 58 50 48 40 38 30 28 20 18 10 08 
      42.  0E:0249                      	db $00,$F0,$E0,$D0,$C0,$B0,$A0,$90,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$80,$7F,$70,$60,$50,$40,$30,$20,$10	; Waveform 10
      42.  0E:0249  00 F0 E0 D0 C0 B0 A0 90 80 80 80 80 80 80 80 80 
      42.  0E:0259  80 80 80 80 80 80 80 80 7F 70 60 50 40 30 20 10 
      43.  0E:0269                      	db $01,$2A,$40,$50,$5C,$68,$70,$78,$7F,$78,$70,$68,$5C,$50,$40,$2A,$FF,$D6,$C0,$B0,$A4,$98,$90,$88,$81,$88,$90,$98,$A4,$B0,$C0,$D6	; Waveform 11
      43.  0E:0269  01 2A 40 50 5C 68 70 78 7F 78 70 68 5C 50 40 2A 
      43.  0E:0279  FF D6 C0 B0 A4 98 90 88 81 88 90 98 A4 B0 C0 D6 
      44.  0E:0289                      	db $00,$19,$31,$47,$5A,$6A,$75,$7D,$7F,$7D,$75,$6A,$5A,$47,$31,$19,$00,$E7,$CF,$B9,$A6,$96,$8B,$83,$80,$83,$8B,$96,$A6,$B9,$CF,$E7	; Waveform 12
      44.  0E:0289  00 19 31 47 5A 6A 75 7D 7F 7D 75 6A 5A 47 31 19 
      44.  0E:0299  00 E7 CF B9 A6 96 8B 83 80 83 8B 96 A6 B9 CF E7 
      45.  0E:02A9                      	db $00,$19,$31,$47,$5A,$6A,$75,$7D,$7F,$7D,$75,$6A,$5A,$47,$31,$19,$80,$90,$A0,$B0,$C0,$D0,$E0,$F0,$00,$10,$20,$30,$40,$50,$60,$70	; Waveform 13
      45.  0E:02A9  00 19 31 47 5A 6A 75 7D 7F 7D 75 6A 5A 47 31 19 
      45.  0E:02B9  80 90 A0 B0 C0 D0 E0 F0 00 10 20 30 40 50 60 70 
      46.  0E:02C9                      	db $00,$00,$00,$00,$00,$78,$78,$00,$00,$80,$80,$80,$00,$00,$00,$00,$78,$78,$78,$00,$80,$80,$00,$00,$00,$00,$78,$78,$00,$00,$80,$80	; Waveform 14
      46.  0E:02C9  00 00 00 00 00 78 78 00 00 80 80 80 00 00 00 00 
      46.  0E:02D9  78 78 78 00 80 80 00 00 00 00 78 78 00 00 80 80 
      47.  0E:02E9                      	db $00,$20,$30,$40,$30,$20,$E0,$C0,$B0,$C0,$E0,$20,$40,$60,$70,$70,$60,$40,$20,$E0,$B0,$90,$80,$80,$80,$80,$90,$A0,$C0,$D0,$E0,$F0	; Waveform 15
      47.  0E:02E9  00 20 30 40 30 20 E0 C0 B0 C0 E0 20 40 60 70 70 
      47.  0E:02F9  60 40 20 E0 B0 90 80 80 80 80 90 A0 C0 D0 E0 F0 
      48.  0E:0309                      	db $00,$E0,$C0,$A0,$80,$A0,$C0,$E0,$00,$20,$40,$60,$7F,$60,$40,$20,$00,$E0,$C0,$A0,$80,$A0,$C0,$E0,$00,$20,$40,$60,$7F,$60,$40,$20	; Waveform 16
      48.  0E:0309  00 E0 C0 A0 80 A0 C0 E0 00 20 40 60 7F 60 40 20 
      48.  0E:0319  00 E0 C0 A0 80 A0 C0 E0 00 20 40 60 7F 60 40 20 
      49.  0E:0329                      
      50.  0E:0329                      .instrument_start:
      51.  0E:0329                      	dw .ins_1,.ins_2,.ins_3,.ins_4,.ins_5,.ins_6,.ins_7,.ins_8,.ins_9,.ins_10,.ins_11,.ins_12,.ins_13,.ins_14,.ins_15,.ins_16,.ins_17,.ins_18,.ins_19,.ins_20,.ins_21,.ins_22,.ins_23,.ins_24,.ins_25
      51.  0E:0329  5B 03 70 03 9B 03 A3 03 A3 03 A3 03 B4 03 BC 03 
      51.  0E:0339  D0 03 D0 03 FA 03 FA 03 FA 03 16 04 2A 04 54 04 
      51.  0E:0349  68 04 68 04 7E 04 92 04 92 04 A3 04 CD 04 CD 04 
      51.  0E:0359  CD 04 
      52.  0E:035B                      .ins_1:						; BD POW          
      53.  0E:035B  00                  		db 0					; Waveform
      54.  0E:035C  0E                  		db .rst_i1-(.ins_1 +2)		; Restart
      55.  0E:035D  15 0E 28 01         		db $15,$0E,$28,$01
      56.  0E:0361  55 0D E1 00 03      		db $55,$0D,$E1,$00,$03
      57.  0E:0366  55 0A E1 30 03      		db $55,$0A,$E1,$30,$03
      58.  0E:036B                      .rst_i1:
      59.  0E:036B  5D 00 E1 00 03      		db $5D,$00,$E1,$00,$03
      60.  0E:0370                      .ins_2:						; SD POW          
      61.  0E:0370  00                  		db 0					; Waveform
      62.  0E:0371  27                  		db .rst_i2-(.ins_2 +2)		; Restart
      63.  0E:0372  31 0F 1F            		db $31,$0F,$1F
      64.  0E:0375  85 0F FF FF         		db $85,$0F,$FF,$FF
      65.  0E:0379  85 0E FF FF         		db $85,$0E,$FF,$FF
      66.  0E:037D  A5 0D 05 FF FF      		db $A5,$0D,$05,$FF,$FF
      67.  0E:0382  85 0C FF FF         		db $85,$0C,$FF,$FF
      68.  0E:0386  A5 0B 03 FF FF      		db $A5,$0B,$03,$FF,$FF
      69.  0E:038B  85 0A FF FF         		db $85,$0A,$FF,$FF
      70.  0E:038F  85 07 07 00         		db $85,$07,$07,$00
      71.  0E:0393  81 07               		db $81,$07
      72.  0E:0395  81 06               		db $81,$06
      73.  0E:0397  81 05               		db $81,$05
      74.  0E:0399                      .rst_i2:
      75.  0E:0399  89 03               		db $89,$03
      76.  0E:039B                      .ins_3:						; HH close        
      77.  0E:039B  00                  		db 0					; Waveform
      78.  0E:039C  04                  		db .rst_i3-(.ins_3 +2)		; Restart
      79.  0E:039D  81 0E               		db $81,$0E
      80.  0E:039F  81 06               		db $81,$06
      81.  0E:03A1                      .rst_i3:
      82.  0E:03A1  89 00               		db $89,$00
      83.  0E:03A3                      .ins_4:						; HH open         
      84.  0E:03A3                      .ins_5:						; Ride Cymbal     
      85.  0E:03A3                      .ins_6:						; Tom             
      86.  0E:03A3  00                  		db 0					; Waveform
      87.  0E:03A4  08                  		db .rst_i6-(.ins_6 +2)		; Restart
      88.  0E:03A5  15 0F 2F 00         		db $15,$0F,$2F,$00
      89.  0E:03A9  15 0E 2F 00         		db $15,$0E,$2F,$00
      90.  0E:03AD                      .rst_i6:
      91.  0E:03AD  14 2F 00            		db $14,$2F,$00
      92.  0E:03B0  1F FF 2F 00         		db $1F,$FF,$2F,$00
      93.  0E:03B4                      .ins_7:						; PSG Attack      
      94.  0E:03B4  00                  		db 0					; Waveform
      95.  0E:03B5  04                  		db .rst_i7-(.ins_7 +2)		; Restart
      96.  0E:03B6  11 0F               		db $11,$0F
      97.  0E:03B8  11 0B               		db $11,$0B
      98.  0E:03BA                      .rst_i7:
      99.  0E:03BA  19 0A               		db $19,$0A
     100.  0E:03BC                      .ins_8:						; PSG Lead        
     101.  0E:03BC  00                  		db 0					; Waveform
     102.  0E:03BD  10                  		db .rst_i8-(.ins_8 +2)		; Restart
     103.  0E:03BE  11 09               		db $11,$09
     104.  0E:03C0  11 0A               		db $11,$0A
     105.  0E:03C2  11 0B               		db $11,$0B
     106.  0E:03C4  11 0C               		db $11,$0C
     107.  0E:03C6  11 0E               		db $11,$0E
     108.  0E:03C8  11 0F               		db $11,$0F
     109.  0E:03CA  11 0F               		db $11,$0F
     110.  0E:03CC  11 0F               		db $11,$0F
     111.  0E:03CE                      .rst_i8:
     112.  0E:03CE  19 0F               		db $19,$0F
     113.  0E:03D0                      .ins_9:						;                 
     114.  0E:03D0                      .ins_10:						; SC Bass         
     115.  0E:03D0  01                  		db 1					; Waveform
     116.  0E:03D1  26                  		db .rst_i10-(.ins_10 +2)		; Restart
     117.  0E:03D2  11 0F               		db $11,$0F
     118.  0E:03D4  11 0A               		db $11,$0A
     119.  0E:03D6  11 0A               		db $11,$0A
     120.  0E:03D8  11 0A               		db $11,$0A
     121.  0E:03DA  11 0A               		db $11,$0A
     122.  0E:03DC  11 0A               		db $11,$0A
     123.  0E:03DE  11 0A               		db $11,$0A
     124.  0E:03E0  11 0A               		db $11,$0A
     125.  0E:03E2  11 0A               		db $11,$0A
     126.  0E:03E4  11 0A               		db $11,$0A
     127.  0E:03E6  11 0A               		db $11,$0A
     128.  0E:03E8  11 07               		db $11,$07
     129.  0E:03EA  11 07               		db $11,$07
     130.  0E:03EC  11 07               		db $11,$07
     131.  0E:03EE  11 07               		db $11,$07
     132.  0E:03F0  11 06               		db $11,$06
     133.  0E:03F2  11 05               		db $11,$05
     134.  0E:03F4  11 04               		db $11,$04
     135.  0E:03F6  11 03               		db $11,$03
     136.  0E:03F8                      .rst_i10:
     137.  0E:03F8  19 02               		db $19,$02
     138.  0E:03FA                      .ins_11:						; SC Piano        
     139.  0E:03FA                      .ins_12:						; SC Lead         
     140.  0E:03FA                      .ins_13:						; SC Bell         
     141.  0E:03FA  04                  		db 4					; Waveform
     142.  0E:03FB  18                  		db .rst_i13-(.ins_13 +2)		; Restart
     143.  0E:03FC  11 0F               		db $11,$0F
     144.  0E:03FE  11 09               		db $11,$09
     145.  0E:0400  11 09               		db $11,$09
     146.  0E:0402  11 09               		db $11,$09
     147.  0E:0404  11 09               		db $11,$09
     148.  0E:0406  11 09               		db $11,$09
     149.  0E:0408  11 09               		db $11,$09
     150.  0E:040A  11 08               		db $11,$08
     151.  0E:040C  11 07               		db $11,$07
     152.  0E:040E  11 06               		db $11,$06
     153.  0E:0410  11 05               		db $11,$05
     154.  0E:0412  11 04               		db $11,$04
     155.  0E:0414                      .rst_i13:
     156.  0E:0414  19 03               		db $19,$03
     157.  0E:0416                      .ins_14:						; SC Pad LOW      
     158.  0E:0416  05                  		db 5					; Waveform
     159.  0E:0417  10                  		db .rst_i14-(.ins_14 +2)		; Restart
     160.  0E:0418  11 03               		db $11,$03
     161.  0E:041A  11 05               		db $11,$05
     162.  0E:041C  11 08               		db $11,$08
     163.  0E:041E  11 0A               		db $11,$0A
     164.  0E:0420  11 0A               		db $11,$0A
     165.  0E:0422  11 0B               		db $11,$0B
     166.  0E:0424  11 0B               		db $11,$0B
     167.  0E:0426  11 0B               		db $11,$0B
     168.  0E:0428                      .rst_i14:
     169.  0E:0428  19 0B               		db $19,$0B
     170.  0E:042A                      .ins_15:						; SC PianoBell    
     171.  0E:042A  06                  		db 6					; Waveform
     172.  0E:042B  26                  		db .rst_i15-(.ins_15 +2)		; Restart
     173.  0E:042C  11 0F               		db $11,$0F
     174.  0E:042E  11 09               		db $11,$09
     175.  0E:0430  11 09               		db $11,$09
     176.  0E:0432  11 09               		db $11,$09
     177.  0E:0434  11 09               		db $11,$09
     178.  0E:0436  11 09               		db $11,$09
     179.  0E:0438  11 09               		db $11,$09
     180.  0E:043A  11 09               		db $11,$09
     181.  0E:043C  11 09               		db $11,$09
     182.  0E:043E  11 09               		db $11,$09
     183.  0E:0440  11 09               		db $11,$09
     184.  0E:0442  11 09               		db $11,$09
     185.  0E:0444  11 09               		db $11,$09
     186.  0E:0446  11 08               		db $11,$08
     187.  0E:0448  11 07               		db $11,$07
     188.  0E:044A  11 06               		db $11,$06
     189.  0E:044C  11 05               		db $11,$05
     190.  0E:044E  11 04               		db $11,$04
     191.  0E:0450  11 03               		db $11,$03
     192.  0E:0452                      .rst_i15:
     193.  0E:0452  19 02               		db $19,$02
     194.  0E:0454                      .ins_16:						; SC Flute        
     195.  0E:0454  06                  		db 6					; Waveform
     196.  0E:0455  10                  		db .rst_i16-(.ins_16 +2)		; Restart
     197.  0E:0456  11 04               		db $11,$04
     198.  0E:0458  11 06               		db $11,$06
     199.  0E:045A  11 08               		db $11,$08
     200.  0E:045C  11 0A               		db $11,$0A
     201.  0E:045E  11 0A               		db $11,$0A
     202.  0E:0460  11 0B               		db $11,$0B
     203.  0E:0462  11 0B               		db $11,$0B
     204.  0E:0464  11 0C               		db $11,$0C
     205.  0E:0466                      .rst_i16:
     206.  0E:0466  19 0D               		db $19,$0D
     207.  0E:0468                      .ins_17:						; SC Flute2       
     208.  0E:0468                      .ins_18:						; SC Organ        
     209.  0E:0468  08                  		db 8					; Waveform
     210.  0E:0469  12                  		db .rst_i18-(.ins_18 +2)		; Restart
     211.  0E:046A  11 07               		db $11,$07
     212.  0E:046C  11 0A               		db $11,$0A
     213.  0E:046E  11 0D               		db $11,$0D
     214.  0E:0470  11 0D               		db $11,$0D
     215.  0E:0472  11 0C               		db $11,$0C
     216.  0E:0474  11 0B               		db $11,$0B
     217.  0E:0476  11 0A               		db $11,$0A
     218.  0E:0478  11 07               		db $11,$07
     219.  0E:047A  11 06               		db $11,$06
     220.  0E:047C                      .rst_i18:
     221.  0E:047C  19 05               		db $19,$05
     222.  0E:047E                      .ins_19:						; SC Sawlead      
     223.  0E:047E  09                  		db 9					; Waveform
     224.  0E:047F  10                  		db .rst_i19-(.ins_19 +2)		; Restart
     225.  0E:0480  11 09               		db $11,$09
     226.  0E:0482  11 0A               		db $11,$0A
     227.  0E:0484  11 0B               		db $11,$0B
     228.  0E:0486  11 0C               		db $11,$0C
     229.  0E:0488  11 0E               		db $11,$0E
     230.  0E:048A  11 0F               		db $11,$0F
     231.  0E:048C  11 0F               		db $11,$0F
     232.  0E:048E  11 0F               		db $11,$0F
     233.  0E:0490                      .rst_i19:
     234.  0E:0490  19 0F               		db $19,$0F
     235.  0E:0492                      .ins_20:						; SC Brass        
     236.  0E:0492                      .ins_21:						; SD Tom          
     237.  0E:0492  0B                  		db 11					; Waveform
     238.  0E:0493  08                  		db .rst_i21-(.ins_21 +2)		; Restart
     239.  0E:0494  15 0F 4F 00         		db $15,$0F,$4F,$00
     240.  0E:0498  15 0C 4F 00         		db $15,$0C,$4F,$00
     241.  0E:049C                      .rst_i21:
     242.  0E:049C  14 4F 00            		db $14,$4F,$00
     243.  0E:049F  1F FF 4F 00         		db $1F,$FF,$4F,$00
     244.  0E:04A3                      .ins_22:						; SC Bass         
     245.  0E:04A3  0C                  		db 12					; Waveform
     246.  0E:04A4  26                  		db .rst_i22-(.ins_22 +2)		; Restart
     247.  0E:04A5  11 0F               		db $11,$0F
     248.  0E:04A7  11 0E               		db $11,$0E
     249.  0E:04A9  11 0D               		db $11,$0D
     250.  0E:04AB  11 0D               		db $11,$0D
     251.  0E:04AD  11 0D               		db $11,$0D
     252.  0E:04AF  11 0D               		db $11,$0D
     253.  0E:04B1  11 0D               		db $11,$0D
     254.  0E:04B3  11 0C               		db $11,$0C
     255.  0E:04B5  11 0C               		db $11,$0C
     256.  0E:04B7  11 0B               		db $11,$0B
     257.  0E:04B9  11 0B               		db $11,$0B
     258.  0E:04BB  11 0A               		db $11,$0A
     259.  0E:04BD  11 09               		db $11,$09
     260.  0E:04BF  11 08               		db $11,$08
     261.  0E:04C1  11 07               		db $11,$07
     262.  0E:04C3  11 06               		db $11,$06
     263.  0E:04C5  11 05               		db $11,$05
     264.  0E:04C7  11 04               		db $11,$04
     265.  0E:04C9  11 03               		db $11,$03
     266.  0E:04CB                      .rst_i22:
     267.  0E:04CB  19 02               		db $19,$02
     268.  0E:04CD                      .ins_23:						; SC DoubleLead   
     269.  0E:04CD                      .ins_24:						; SC Clavi        
     270.  0E:04CD                      .ins_25:						; SC Bass2        
     271.  0E:04CD  0F                  		db 15					; Waveform
     272.  0E:04CE  26                  		db .rst_i25-(.ins_25 +2)		; Restart
     273.  0E:04CF  11 0F               		db $11,$0F
     274.  0E:04D1  11 0E               		db $11,$0E
     275.  0E:04D3  11 0D               		db $11,$0D
     276.  0E:04D5  11 0D               		db $11,$0D
     277.  0E:04D7  11 0D               		db $11,$0D
     278.  0E:04D9  11 0D               		db $11,$0D
     279.  0E:04DB  11 0D               		db $11,$0D
     280.  0E:04DD  11 0C               		db $11,$0C
     281.  0E:04DF  11 0C               		db $11,$0C
     282.  0E:04E1  11 0B               		db $11,$0B
     283.  0E:04E3  11 0B               		db $11,$0B
     284.  0E:04E5  11 0A               		db $11,$0A
     285.  0E:04E7  11 09               		db $11,$09
     286.  0E:04E9  11 08               		db $11,$08
     287.  0E:04EB  11 07               		db $11,$07
     288.  0E:04ED  11 06               		db $11,$06
     289.  0E:04EF  11 05               		db $11,$05
     290.  0E:04F1  11 04               		db $11,$04
     291.  0E:04F3  11 03               		db $11,$03
     292.  0E:04F5                      .rst_i25:
     293.  0E:04F5  19 02               		db $19,$02
     294.  0E:04F7                      
     295.  0E:04F7                      ; [ Song track data ]
     296.  0E:04F7                      .track_0:
     297.  0E:04F7  1F                  	db $1F		;[Note] 32
     298.  0E:04F8  6F                  	db $6F		;[Volume] 15
     299.  0E:04F9  70                  	db $70		;[Instrument] 1
     300.  0E:04FA  C1                  	db $C1		;[Wait] 2
     301.  0E:04FB  21                  	db $21		;[Note] 34
     302.  0E:04FC  72                  	db $72		;[Instrument] 3
     303.  0E:04FD  C0                  	db $C0		;[Wait] 1
     304.  0E:04FE  21                  	db $21		;[Note] 34
     305.  0E:04FF                      				;[Skip delay] 1
     306.  0E:04FF  21                  	db $21		;[Note] 34
     307.  0E:0500  71                  	db $71		;[Instrument] 2
     308.  0E:0501  C1                  	db $C1		;[Wait] 2
     309.  0E:0502  21                  	db $21		;[Note] 34
     310.  0E:0503  72                  	db $72		;[Instrument] 3
     311.  0E:0504  C0                  	db $C0		;[Wait] 1
     312.  0E:0505  21                  	db $21		;[Note] 34
     313.  0E:0506                      				;[Skip delay] 1
     314.  0E:0506  1F                  	db $1F		;[Note] 32
     315.  0E:0507  70                  	db $70		;[Instrument] 1
     316.  0E:0508  C1                  	db $C1		;[Wait] 2
     317.  0E:0509  21                  	db $21		;[Note] 34
     318.  0E:050A                      				;[Skip delay] 2
     319.  0E:050A  21                  	db $21		;[Note] 34
     320.  0E:050B  71                  	db $71		;[Instrument] 2
     321.  0E:050C                      				;[Skip delay] 2
     322.  0E:050C  1F                  	db $1F		;[Note] 32
     323.  0E:050D  70                  	db $70		;[Instrument] 1
     324.  0E:050E  C0                  	db $C0		;[Wait] 1
     325.  0E:050F  21                  	db $21		;[Note] 34
     326.  0E:0510  72                  	db $72		;[Instrument] 3
     327.  0E:0511                      				;[Skip delay] 1
     328.  0E:0511  1F                  	db $1F		;[Note] 32
     329.  0E:0512  70                  	db $70		;[Instrument] 1
     330.  0E:0513  C1                  	db $C1		;[Wait] 2
     331.  0E:0514  21                  	db $21		;[Note] 34
     332.  0E:0515  72                  	db $72		;[Instrument] 3
     333.  0E:0516  C0                  	db $C0		;[Wait] 1
     334.  0E:0517  21                  	db $21		;[Note] 34
     335.  0E:0518                      				;[Skip delay] 1
     336.  0E:0518  21                  	db $21		;[Note] 34
     337.  0E:0519  71                  	db $71		;[Instrument] 2
     338.  0E:051A  C1                  	db $C1		;[Wait] 2
     339.  0E:051B  21                  	db $21		;[Note] 34
     340.  0E:051C  72                  	db $72		;[Instrument] 3
     341.  0E:051D  C0                  	db $C0		;[Wait] 1
     342.  0E:051E  21                  	db $21		;[Note] 34
     343.  0E:051F                      				;[Skip delay] 1
     344.  0E:051F  1F                  	db $1F		;[Note] 32
     345.  0E:0520  70                  	db $70		;[Instrument] 1
     346.  0E:0521  C1                  	db $C1		;[Wait] 2
     347.  0E:0522  1F                  	db $1F		;[Note] 32
     348.  0E:0523                      				;[Skip delay] 2
     349.  0E:0523  21                  	db $21		;[Note] 34
     350.  0E:0524  71                  	db $71		;[Instrument] 2
     351.  0E:0525                      				;[Skip delay] 2
     352.  0E:0525  21                  	db $21		;[Note] 34
     353.  0E:0526  72                  	db $72		;[Instrument] 3
     354.  0E:0527  C0                  	db $C0		;[Wait] 1
     355.  0E:0528  21                  	db $21		;[Note] 34
     356.  0E:0529                      				;[Skip delay] 1
     357.  0E:0529  1F                  	db $1F		;[Note] 32
     358.  0E:052A  70                  	db $70		;[Instrument] 1
     359.  0E:052B  C1                  	db $C1		;[Wait] 2
     360.  0E:052C  21                  	db $21		;[Note] 34
     361.  0E:052D  72                  	db $72		;[Instrument] 3
     362.  0E:052E  C0                  	db $C0		;[Wait] 1
     363.  0E:052F  21                  	db $21		;[Note] 34
     364.  0E:0530                      				;[Skip delay] 1
     365.  0E:0530  21                  	db $21		;[Note] 34
     366.  0E:0531  71                  	db $71		;[Instrument] 2
     367.  0E:0532  C1                  	db $C1		;[Wait] 2
     368.  0E:0533  21                  	db $21		;[Note] 34
     369.  0E:0534  72                  	db $72		;[Instrument] 3
     370.  0E:0535  C0                  	db $C0		;[Wait] 1
     371.  0E:0536  21                  	db $21		;[Note] 34
     372.  0E:0537                      				;[Skip delay] 1
     373.  0E:0537  1F                  	db $1F		;[Note] 32
     374.  0E:0538  70                  	db $70		;[Instrument] 1
     375.  0E:0539  C1                  	db $C1		;[Wait] 2
     376.  0E:053A  21                  	db $21		;[Note] 34
     377.  0E:053B                      				;[Skip delay] 2
     378.  0E:053B  21                  	db $21		;[Note] 34
     379.  0E:053C  71                  	db $71		;[Instrument] 2
     380.  0E:053D                      				;[Skip delay] 2
     381.  0E:053D  21                  	db $21		;[Note] 34
     382.  0E:053E  72                  	db $72		;[Instrument] 3
     383.  0E:053F  C0                  	db $C0		;[Wait] 1
     384.  0E:0540  21                  	db $21		;[Note] 34
     385.  0E:0541                      				;[Skip delay] 1
     386.  0E:0541  1F                  	db $1F		;[Note] 32
     387.  0E:0542  70                  	db $70		;[Instrument] 1
     388.  0E:0543  C1                  	db $C1		;[Wait] 2
     389.  0E:0544  21                  	db $21		;[Note] 34
     390.  0E:0545  72                  	db $72		;[Instrument] 3
     391.  0E:0546  C0                  	db $C0		;[Wait] 1
     392.  0E:0547  21                  	db $21		;[Note] 34
     393.  0E:0548                      				;[Skip delay] 1
     394.  0E:0548  21                  	db $21		;[Note] 34
     395.  0E:0549  71                  	db $71		;[Instrument] 2
     396.  0E:054A  C1                  	db $C1		;[Wait] 2
     397.  0E:054B  21                  	db $21		;[Note] 34
     398.  0E:054C  72                  	db $72		;[Instrument] 3
     399.  0E:054D  C0                  	db $C0		;[Wait] 1
     400.  0E:054E  21                  	db $21		;[Note] 34
     401.  0E:054F                      				;[Skip delay] 1
     402.  0E:054F  1F                  	db $1F		;[Note] 32
     403.  0E:0550  70                  	db $70		;[Instrument] 1
     404.  0E:0551  C1                  	db $C1		;[Wait] 2
     405.  0E:0552  21                  	db $21		;[Note] 34
     406.  0E:0553  71                  	db $71		;[Instrument] 2
     407.  0E:0554                      				;[Skip delay] 2
     408.  0E:0554  21                  	db $21		;[Note] 34
     409.  0E:0555                      				;[Skip delay] 2
     410.  0E:0555  21                  	db $21		;[Note] 34
     411.  0E:0556  C0                  	db $C0		;[Wait] 1
     412.  0E:0557  21                  	db $21		;[Note] 34
     413.  0E:0558  72                  	db $72		;[Instrument] 3
     414.  0E:0559                      				;[Skip delay] 1
     415.  0E:0559  BF                  	db $BF		;[End-Of-Track]
     416.  0E:055A                      .track_1:
     417.  0E:055A  13                  	db $13		;[Note] 20
     418.  0E:055B  6F                  	db $6F		;[Volume] 15
     419.  0E:055C  76                  	db $76		;[Instrument] 7
     420.  0E:055D  C0                  	db $C0		;[Wait] 1
     421.  0E:055E  13                  	db $13		;[Note] 20
     422.  0E:055F                      				;[Skip delay] 1
     423.  0E:055F  1F                  	db $1F		;[Note] 32
     424.  0E:0560                      				;[Skip delay] 1
     425.  0E:0560  1F                  	db $1F		;[Note] 32
     426.  0E:0561                      				;[Skip delay] 1
     427.  0E:0561  13                  	db $13		;[Note] 20
     428.  0E:0562                      				;[Skip delay] 1
     429.  0E:0562  13                  	db $13		;[Note] 20
     430.  0E:0563                      				;[Skip delay] 1
     431.  0E:0563  1F                  	db $1F		;[Note] 32
     432.  0E:0564                      				;[Skip delay] 1
     433.  0E:0564  1F                  	db $1F		;[Note] 32
     434.  0E:0565                      				;[Skip delay] 1
     435.  0E:0565  13                  	db $13		;[Note] 20
     436.  0E:0566                      				;[Skip delay] 1
     437.  0E:0566  13                  	db $13		;[Note] 20
     438.  0E:0567                      				;[Skip delay] 1
     439.  0E:0567  1F                  	db $1F		;[Note] 32
     440.  0E:0568                      				;[Skip delay] 1
     441.  0E:0568  1F                  	db $1F		;[Note] 32
     442.  0E:0569                      				;[Skip delay] 1
     443.  0E:0569  13                  	db $13		;[Note] 20
     444.  0E:056A                      				;[Skip delay] 1
     445.  0E:056A  13                  	db $13		;[Note] 20
     446.  0E:056B                      				;[Skip delay] 1
     447.  0E:056B  1F                  	db $1F		;[Note] 32
     448.  0E:056C                      				;[Skip delay] 1
     449.  0E:056C  1F                  	db $1F		;[Note] 32
     450.  0E:056D                      				;[Skip delay] 1
     451.  0E:056D  13                  	db $13		;[Note] 20
     452.  0E:056E                      				;[Skip delay] 1
     453.  0E:056E  13                  	db $13		;[Note] 20
     454.  0E:056F                      				;[Skip delay] 1
     455.  0E:056F  1F                  	db $1F		;[Note] 32
     456.  0E:0570                      				;[Skip delay] 1
     457.  0E:0570  1F                  	db $1F		;[Note] 32
     458.  0E:0571                      				;[Skip delay] 1
     459.  0E:0571  13                  	db $13		;[Note] 20
     460.  0E:0572                      				;[Skip delay] 1
     461.  0E:0572  13                  	db $13		;[Note] 20
     462.  0E:0573                      				;[Skip delay] 1
     463.  0E:0573  1F                  	db $1F		;[Note] 32
     464.  0E:0574                      				;[Skip delay] 1
     465.  0E:0574  1F                  	db $1F		;[Note] 32
     466.  0E:0575                      				;[Skip delay] 1
     467.  0E:0575  13                  	db $13		;[Note] 20
     468.  0E:0576                      				;[Skip delay] 1
     469.  0E:0576  13                  	db $13		;[Note] 20
     470.  0E:0577                      				;[Skip delay] 1
     471.  0E:0577  1F                  	db $1F		;[Note] 32
     472.  0E:0578                      				;[Skip delay] 1
     473.  0E:0578  1F                  	db $1F		;[Note] 32
     474.  0E:0579                      				;[Skip delay] 1
     475.  0E:0579  13                  	db $13		;[Note] 20
     476.  0E:057A                      				;[Skip delay] 1
     477.  0E:057A  13                  	db $13		;[Note] 20
     478.  0E:057B                      				;[Skip delay] 1
     479.  0E:057B  1F                  	db $1F		;[Note] 32
     480.  0E:057C                      				;[Skip delay] 1
     481.  0E:057C  1F                  	db $1F		;[Note] 32
     482.  0E:057D                      				;[Skip delay] 1
     483.  0E:057D  12                  	db $12		;[Note] 19
     484.  0E:057E                      				;[Skip delay] 1
     485.  0E:057E  12                  	db $12		;[Note] 19
     486.  0E:057F                      				;[Skip delay] 1
     487.  0E:057F  1E                  	db $1E		;[Note] 31
     488.  0E:0580                      				;[Skip delay] 1
     489.  0E:0580  1E                  	db $1E		;[Note] 31
     490.  0E:0581                      				;[Skip delay] 1
     491.  0E:0581  12                  	db $12		;[Note] 19
     492.  0E:0582                      				;[Skip delay] 1
     493.  0E:0582  12                  	db $12		;[Note] 19
     494.  0E:0583                      				;[Skip delay] 1
     495.  0E:0583  1E                  	db $1E		;[Note] 31
     496.  0E:0584                      				;[Skip delay] 1
     497.  0E:0584  1E                  	db $1E		;[Note] 31
     498.  0E:0585                      				;[Skip delay] 1
     499.  0E:0585  12                  	db $12		;[Note] 19
     500.  0E:0586                      				;[Skip delay] 1
     501.  0E:0586  12                  	db $12		;[Note] 19
     502.  0E:0587                      				;[Skip delay] 1
     503.  0E:0587  1E                  	db $1E		;[Note] 31
     504.  0E:0588                      				;[Skip delay] 1
     505.  0E:0588  1E                  	db $1E		;[Note] 31
     506.  0E:0589                      				;[Skip delay] 1
     507.  0E:0589  12                  	db $12		;[Note] 19
     508.  0E:058A                      				;[Skip delay] 1
     509.  0E:058A  12                  	db $12		;[Note] 19
     510.  0E:058B                      				;[Skip delay] 1
     511.  0E:058B  1E                  	db $1E		;[Note] 31
     512.  0E:058C                      				;[Skip delay] 1
     513.  0E:058C  1E                  	db $1E		;[Note] 31
     514.  0E:058D                      				;[Skip delay] 1
     515.  0E:058D  12                  	db $12		;[Note] 19
     516.  0E:058E                      				;[Skip delay] 1
     517.  0E:058E  12                  	db $12		;[Note] 19
     518.  0E:058F                      				;[Skip delay] 1
     519.  0E:058F  1E                  	db $1E		;[Note] 31
     520.  0E:0590                      				;[Skip delay] 1
     521.  0E:0590  1E                  	db $1E		;[Note] 31
     522.  0E:0591                      				;[Skip delay] 1
     523.  0E:0591  12                  	db $12		;[Note] 19
     524.  0E:0592                      				;[Skip delay] 1
     525.  0E:0592  12                  	db $12		;[Note] 19
     526.  0E:0593                      				;[Skip delay] 1
     527.  0E:0593  1E                  	db $1E		;[Note] 31
     528.  0E:0594                      				;[Skip delay] 1
     529.  0E:0594  1E                  	db $1E		;[Note] 31
     530.  0E:0595                      				;[Skip delay] 1
     531.  0E:0595  12                  	db $12		;[Note] 19
     532.  0E:0596                      				;[Skip delay] 1
     533.  0E:0596  12                  	db $12		;[Note] 19
     534.  0E:0597                      				;[Skip delay] 1
     535.  0E:0597  1E                  	db $1E		;[Note] 31
     536.  0E:0598                      				;[Skip delay] 1
     537.  0E:0598  1E                  	db $1E		;[Note] 31
     538.  0E:0599                      				;[Skip delay] 1
     539.  0E:0599  12                  	db $12		;[Note] 19
     540.  0E:059A                      				;[Skip delay] 1
     541.  0E:059A  12                  	db $12		;[Note] 19
     542.  0E:059B                      				;[Skip delay] 1
     543.  0E:059B  1E                  	db $1E		;[Note] 31
     544.  0E:059C                      				;[Skip delay] 1
     545.  0E:059C  1E                  	db $1E		;[Note] 31
     546.  0E:059D                      				;[Skip delay] 1
     547.  0E:059D  BF                  	db $BF		;[End-Of-Track]
     548.  0E:059E                      .track_2:
     549.  0E:059E  2B                  	db $2B		;[Note] 44
     550.  0E:059F  6D                  	db $6D		;[Volume] 13
     551.  0E:05A0  77                  	db $77		;[Instrument] 8
     552.  0E:05A1  C3                  	db $C3		;[Wait] 4
     553.  0E:05A2  2D                  	db $2D		;[Note] 46
     554.  0E:05A3  C1                  	db $C1		;[Wait] 2
     555.  0E:05A4  2E                  	db $2E		;[Note] 47
     556.  0E:05A5  C3                  	db $C3		;[Wait] 4
     557.  0E:05A6  2B                  	db $2B		;[Note] 44
     558.  0E:05A7                      				;[Skip delay] 4
     559.  0E:05A7  32                  	db $32		;[Note] 51
     560.  0E:05A8  94 01               	db $94, $01	; vibrato control
     561.  0E:05AA                      				;[Skip delay] 4
     562.  0E:05AA  A7 65               	db $A7, $65	;[CMD vibrato]
     563.  0E:05AC  C0                  	db $C0		;[Wait] 1
     564.  0E:05AD  B1 06               	db $B1, $06	;[CMD vibrato] rep
     565.  0E:05AF  C5                  	db $C5		;[Wait] 6
     566.  0E:05B0  A5 06               	db $A5, $06; slide-down
     567.  0E:05B2  C0                  	db $C0		;[Wait] 1
     568.  0E:05B3  AF 02               	db $AF, $02; slide-down rep
     569.  0E:05B5  C1                  	db $C1		;[Wait] 2
     570.  0E:05B6  32                  	db $32		;[Note] 51
     571.  0E:05B7  6E                  	db $6E		;[Volume] 14
     572.  0E:05B8  AB 04               	db $AB, $04; macro offset
     573.  0E:05BA  C0                  	db $C0		;[Wait] 1
     574.  0E:05BB  30                  	db $30		;[Note] 49
     575.  0E:05BC                      				;[Skip delay] 1
     576.  0E:05BC  2E                  	db $2E		;[Note] 47
     577.  0E:05BD                      				;[Skip delay] 1
     578.  0E:05BD  2D                  	db $2D		;[Note] 46
     579.  0E:05BE                      				;[Skip delay] 1
     580.  0E:05BE  2B                  	db $2B		;[Note] 44
     581.  0E:05BF  6D                  	db $6D		;[Volume] 13
     582.  0E:05C0  C3                  	db $C3		;[Wait] 4
     583.  0E:05C1  2D                  	db $2D		;[Note] 46
     584.  0E:05C2  C1                  	db $C1		;[Wait] 2
     585.  0E:05C3  2E                  	db $2E		;[Note] 47
     586.  0E:05C4  C3                  	db $C3		;[Wait] 4
     587.  0E:05C5  2B                  	db $2B		;[Note] 44
     588.  0E:05C6                      				;[Skip delay] 4
     589.  0E:05C6  32                  	db $32		;[Note] 51
     590.  0E:05C7  94 01               	db $94, $01	; vibrato control
     591.  0E:05C9                      				;[Skip delay] 4
     592.  0E:05C9  A7 65               	db $A7, $65	;[CMD vibrato]
     593.  0E:05CB  C0                  	db $C0		;[Wait] 1
     594.  0E:05CC  B1 06               	db $B1, $06	;[CMD vibrato] rep
     595.  0E:05CE  C5                  	db $C5		;[Wait] 6
     596.  0E:05CF  A7 64               	db $A7, $64	;[CMD vibrato]
     597.  0E:05D1  C0                  	db $C0		;[Wait] 1
     598.  0E:05D2  B1 01               	db $B1, $01	;[CMD vibrato] rep
     599.  0E:05D4                      				;[Skip delay] 1
     600.  0E:05D4  60                  	db $60		;[Note] 97
     601.  0E:05D5                      				;[Skip delay] 1
     602.  0E:05D5  32                  	db $32		;[Note] 51
     603.  0E:05D6  6E                  	db $6E		;[Volume] 14
     604.  0E:05D7  AB 04               	db $AB, $04; macro offset
     605.  0E:05D9                      				;[Skip delay] 1
     606.  0E:05D9  30                  	db $30		;[Note] 49
     607.  0E:05DA                      				;[Skip delay] 1
     608.  0E:05DA  2E                  	db $2E		;[Note] 47
     609.  0E:05DB                      				;[Skip delay] 1
     610.  0E:05DB  2D                  	db $2D		;[Note] 46
     611.  0E:05DC                      				;[Skip delay] 1
     612.  0E:05DC  BF                  	db $BF		;[End-Of-Track]
     613.  0E:05DD                      .track_3:
     614.  0E:05DD  FF                  	db $FF		;[Wait] 64
     615.  0E:05DE  BF                  	db $BF		;[End-Of-Track]
     616.  0E:05DF                      .track_4:
     617.  0E:05DF  1F                  	db $1F		;[Note] 32
     618.  0E:05E0  70                  	db $70		;[Instrument] 1
     619.  0E:05E1  C1                  	db $C1		;[Wait] 2
     620.  0E:05E2  21                  	db $21		;[Note] 34
     621.  0E:05E3  72                  	db $72		;[Instrument] 3
     622.  0E:05E4  C0                  	db $C0		;[Wait] 1
     623.  0E:05E5  21                  	db $21		;[Note] 34
     624.  0E:05E6                      				;[Skip delay] 1
     625.  0E:05E6  21                  	db $21		;[Note] 34
     626.  0E:05E7  71                  	db $71		;[Instrument] 2
     627.  0E:05E8  C1                  	db $C1		;[Wait] 2
     628.  0E:05E9  21                  	db $21		;[Note] 34
     629.  0E:05EA  72                  	db $72		;[Instrument] 3
     630.  0E:05EB  C0                  	db $C0		;[Wait] 1
     631.  0E:05EC  21                  	db $21		;[Note] 34
     632.  0E:05ED                      				;[Skip delay] 1
     633.  0E:05ED  1F                  	db $1F		;[Note] 32
     634.  0E:05EE  70                  	db $70		;[Instrument] 1
     635.  0E:05EF  C1                  	db $C1		;[Wait] 2
     636.  0E:05F0  21                  	db $21		;[Note] 34
     637.  0E:05F1                      				;[Skip delay] 2
     638.  0E:05F1  21                  	db $21		;[Note] 34
     639.  0E:05F2  71                  	db $71		;[Instrument] 2
     640.  0E:05F3                      				;[Skip delay] 2
     641.  0E:05F3  1F                  	db $1F		;[Note] 32
     642.  0E:05F4  70                  	db $70		;[Instrument] 1
     643.  0E:05F5  C0                  	db $C0		;[Wait] 1
     644.  0E:05F6  21                  	db $21		;[Note] 34
     645.  0E:05F7  72                  	db $72		;[Instrument] 3
     646.  0E:05F8                      				;[Skip delay] 1
     647.  0E:05F8  1F                  	db $1F		;[Note] 32
     648.  0E:05F9  70                  	db $70		;[Instrument] 1
     649.  0E:05FA  C1                  	db $C1		;[Wait] 2
     650.  0E:05FB  21                  	db $21		;[Note] 34
     651.  0E:05FC  72                  	db $72		;[Instrument] 3
     652.  0E:05FD  C0                  	db $C0		;[Wait] 1
     653.  0E:05FE  21                  	db $21		;[Note] 34
     654.  0E:05FF                      				;[Skip delay] 1
     655.  0E:05FF  21                  	db $21		;[Note] 34
     656.  0E:0600  71                  	db $71		;[Instrument] 2
     657.  0E:0601  C1                  	db $C1		;[Wait] 2
     658.  0E:0602  21                  	db $21		;[Note] 34
     659.  0E:0603  72                  	db $72		;[Instrument] 3
     660.  0E:0604  C0                  	db $C0		;[Wait] 1
     661.  0E:0605  21                  	db $21		;[Note] 34
     662.  0E:0606                      				;[Skip delay] 1
     663.  0E:0606  1F                  	db $1F		;[Note] 32
     664.  0E:0607  70                  	db $70		;[Instrument] 1
     665.  0E:0608  C1                  	db $C1		;[Wait] 2
     666.  0E:0609  1F                  	db $1F		;[Note] 32
     667.  0E:060A                      				;[Skip delay] 2
     668.  0E:060A  21                  	db $21		;[Note] 34
     669.  0E:060B  71                  	db $71		;[Instrument] 2
     670.  0E:060C                      				;[Skip delay] 2
     671.  0E:060C  21                  	db $21		;[Note] 34
     672.  0E:060D  72                  	db $72		;[Instrument] 3
     673.  0E:060E  C0                  	db $C0		;[Wait] 1
     674.  0E:060F  21                  	db $21		;[Note] 34
     675.  0E:0610                      				;[Skip delay] 1
     676.  0E:0610  1F                  	db $1F		;[Note] 32
     677.  0E:0611  70                  	db $70		;[Instrument] 1
     678.  0E:0612  C1                  	db $C1		;[Wait] 2
     679.  0E:0613  21                  	db $21		;[Note] 34
     680.  0E:0614  72                  	db $72		;[Instrument] 3
     681.  0E:0615  C0                  	db $C0		;[Wait] 1
     682.  0E:0616  21                  	db $21		;[Note] 34
     683.  0E:0617                      				;[Skip delay] 1
     684.  0E:0617  21                  	db $21		;[Note] 34
     685.  0E:0618  71                  	db $71		;[Instrument] 2
     686.  0E:0619  C1                  	db $C1		;[Wait] 2
     687.  0E:061A  21                  	db $21		;[Note] 34
     688.  0E:061B  72                  	db $72		;[Instrument] 3
     689.  0E:061C  C0                  	db $C0		;[Wait] 1
     690.  0E:061D  21                  	db $21		;[Note] 34
     691.  0E:061E                      				;[Skip delay] 1
     692.  0E:061E  1F                  	db $1F		;[Note] 32
     693.  0E:061F  70                  	db $70		;[Instrument] 1
     694.  0E:0620  C1                  	db $C1		;[Wait] 2
     695.  0E:0621  21                  	db $21		;[Note] 34
     696.  0E:0622                      				;[Skip delay] 2
     697.  0E:0622  21                  	db $21		;[Note] 34
     698.  0E:0623  71                  	db $71		;[Instrument] 2
     699.  0E:0624                      				;[Skip delay] 2
     700.  0E:0624  21                  	db $21		;[Note] 34
     701.  0E:0625  72                  	db $72		;[Instrument] 3
     702.  0E:0626  C0                  	db $C0		;[Wait] 1
     703.  0E:0627  21                  	db $21		;[Note] 34
     704.  0E:0628                      				;[Skip delay] 1
     705.  0E:0628  1F                  	db $1F		;[Note] 32
     706.  0E:0629  70                  	db $70		;[Instrument] 1
     707.  0E:062A  C1                  	db $C1		;[Wait] 2
     708.  0E:062B  21                  	db $21		;[Note] 34
     709.  0E:062C  72                  	db $72		;[Instrument] 3
     710.  0E:062D  C0                  	db $C0		;[Wait] 1
     711.  0E:062E  21                  	db $21		;[Note] 34
     712.  0E:062F                      				;[Skip delay] 1
     713.  0E:062F  21                  	db $21		;[Note] 34
     714.  0E:0630  71                  	db $71		;[Instrument] 2
     715.  0E:0631  C1                  	db $C1		;[Wait] 2
     716.  0E:0632  21                  	db $21		;[Note] 34
     717.  0E:0633  72                  	db $72		;[Instrument] 3
     718.  0E:0634  C0                  	db $C0		;[Wait] 1
     719.  0E:0635  21                  	db $21		;[Note] 34
     720.  0E:0636                      				;[Skip delay] 1
     721.  0E:0636  1F                  	db $1F		;[Note] 32
     722.  0E:0637  70                  	db $70		;[Instrument] 1
     723.  0E:0638  C1                  	db $C1		;[Wait] 2
     724.  0E:0639  21                  	db $21		;[Note] 34
     725.  0E:063A  71                  	db $71		;[Instrument] 2
     726.  0E:063B                      				;[Skip delay] 2
     727.  0E:063B  21                  	db $21		;[Note] 34
     728.  0E:063C                      				;[Skip delay] 2
     729.  0E:063C  21                  	db $21		;[Note] 34
     730.  0E:063D  C0                  	db $C0		;[Wait] 1
     731.  0E:063E  21                  	db $21		;[Note] 34
     732.  0E:063F  72                  	db $72		;[Instrument] 3
     733.  0E:0640                      				;[Skip delay] 1
     734.  0E:0640  BF                  	db $BF		;[End-Of-Track]
     735.  0E:0641                      .track_5:
     736.  0E:0641  11                  	db $11		;[Note] 18
     737.  0E:0642  6F                  	db $6F		;[Volume] 15
     738.  0E:0643  76                  	db $76		;[Instrument] 7
     739.  0E:0644  C0                  	db $C0		;[Wait] 1
     740.  0E:0645  11                  	db $11		;[Note] 18
     741.  0E:0646                      				;[Skip delay] 1
     742.  0E:0646  1D                  	db $1D		;[Note] 30
     743.  0E:0647                      				;[Skip delay] 1
     744.  0E:0647  1D                  	db $1D		;[Note] 30
     745.  0E:0648                      				;[Skip delay] 1
     746.  0E:0648  11                  	db $11		;[Note] 18
     747.  0E:0649                      				;[Skip delay] 1
     748.  0E:0649  11                  	db $11		;[Note] 18
     749.  0E:064A                      				;[Skip delay] 1
     750.  0E:064A  1D                  	db $1D		;[Note] 30
     751.  0E:064B                      				;[Skip delay] 1
     752.  0E:064B  1D                  	db $1D		;[Note] 30
     753.  0E:064C                      				;[Skip delay] 1
     754.  0E:064C  11                  	db $11		;[Note] 18
     755.  0E:064D                      				;[Skip delay] 1
     756.  0E:064D  11                  	db $11		;[Note] 18
     757.  0E:064E                      				;[Skip delay] 1
     758.  0E:064E  1D                  	db $1D		;[Note] 30
     759.  0E:064F                      				;[Skip delay] 1
     760.  0E:064F  1D                  	db $1D		;[Note] 30
     761.  0E:0650                      				;[Skip delay] 1
     762.  0E:0650  11                  	db $11		;[Note] 18
     763.  0E:0651                      				;[Skip delay] 1
     764.  0E:0651  11                  	db $11		;[Note] 18
     765.  0E:0652                      				;[Skip delay] 1
     766.  0E:0652  1D                  	db $1D		;[Note] 30
     767.  0E:0653                      				;[Skip delay] 1
     768.  0E:0653  1D                  	db $1D		;[Note] 30
     769.  0E:0654                      				;[Skip delay] 1
     770.  0E:0654  11                  	db $11		;[Note] 18
     771.  0E:0655                      				;[Skip delay] 1
     772.  0E:0655  11                  	db $11		;[Note] 18
     773.  0E:0656                      				;[Skip delay] 1
     774.  0E:0656  1D                  	db $1D		;[Note] 30
     775.  0E:0657                      				;[Skip delay] 1
     776.  0E:0657  1D                  	db $1D		;[Note] 30
     777.  0E:0658                      				;[Skip delay] 1
     778.  0E:0658  11                  	db $11		;[Note] 18
     779.  0E:0659                      				;[Skip delay] 1
     780.  0E:0659  11                  	db $11		;[Note] 18
     781.  0E:065A                      				;[Skip delay] 1
     782.  0E:065A  1D                  	db $1D		;[Note] 30
     783.  0E:065B                      				;[Skip delay] 1
     784.  0E:065B  1D                  	db $1D		;[Note] 30
     785.  0E:065C                      				;[Skip delay] 1
     786.  0E:065C  11                  	db $11		;[Note] 18
     787.  0E:065D                      				;[Skip delay] 1
     788.  0E:065D  11                  	db $11		;[Note] 18
     789.  0E:065E                      				;[Skip delay] 1
     790.  0E:065E  1D                  	db $1D		;[Note] 30
     791.  0E:065F                      				;[Skip delay] 1
     792.  0E:065F  1D                  	db $1D		;[Note] 30
     793.  0E:0660                      				;[Skip delay] 1
     794.  0E:0660  11                  	db $11		;[Note] 18
     795.  0E:0661                      				;[Skip delay] 1
     796.  0E:0661  11                  	db $11		;[Note] 18
     797.  0E:0662                      				;[Skip delay] 1
     798.  0E:0662  1D                  	db $1D		;[Note] 30
     799.  0E:0663                      				;[Skip delay] 1
     800.  0E:0663  1D                  	db $1D		;[Note] 30
     801.  0E:0664                      				;[Skip delay] 1
     802.  0E:0664  0C                  	db $0C		;[Note] 13
     803.  0E:0665                      				;[Skip delay] 1
     804.  0E:0665  0C                  	db $0C		;[Note] 13
     805.  0E:0666                      				;[Skip delay] 1
     806.  0E:0666  18                  	db $18		;[Note] 25
     807.  0E:0667                      				;[Skip delay] 1
     808.  0E:0667  18                  	db $18		;[Note] 25
     809.  0E:0668                      				;[Skip delay] 1
     810.  0E:0668  0C                  	db $0C		;[Note] 13
     811.  0E:0669                      				;[Skip delay] 1
     812.  0E:0669  0C                  	db $0C		;[Note] 13
     813.  0E:066A                      				;[Skip delay] 1
     814.  0E:066A  18                  	db $18		;[Note] 25
     815.  0E:066B                      				;[Skip delay] 1
     816.  0E:066B  18                  	db $18		;[Note] 25
     817.  0E:066C                      				;[Skip delay] 1
     818.  0E:066C  0C                  	db $0C		;[Note] 13
     819.  0E:066D                      				;[Skip delay] 1
     820.  0E:066D  0C                  	db $0C		;[Note] 13
     821.  0E:066E                      				;[Skip delay] 1
     822.  0E:066E  18                  	db $18		;[Note] 25
     823.  0E:066F                      				;[Skip delay] 1
     824.  0E:066F  18                  	db $18		;[Note] 25
     825.  0E:0670                      				;[Skip delay] 1
     826.  0E:0670  0C                  	db $0C		;[Note] 13
     827.  0E:0671                      				;[Skip delay] 1
     828.  0E:0671  0C                  	db $0C		;[Note] 13
     829.  0E:0672                      				;[Skip delay] 1
     830.  0E:0672  18                  	db $18		;[Note] 25
     831.  0E:0673                      				;[Skip delay] 1
     832.  0E:0673  18                  	db $18		;[Note] 25
     833.  0E:0674                      				;[Skip delay] 1
     834.  0E:0674  0C                  	db $0C		;[Note] 13
     835.  0E:0675                      				;[Skip delay] 1
     836.  0E:0675  0C                  	db $0C		;[Note] 13
     837.  0E:0676                      				;[Skip delay] 1
     838.  0E:0676  18                  	db $18		;[Note] 25
     839.  0E:0677                      				;[Skip delay] 1
     840.  0E:0677  18                  	db $18		;[Note] 25
     841.  0E:0678                      				;[Skip delay] 1
     842.  0E:0678  0C                  	db $0C		;[Note] 13
     843.  0E:0679                      				;[Skip delay] 1
     844.  0E:0679  0C                  	db $0C		;[Note] 13
     845.  0E:067A                      				;[Skip delay] 1
     846.  0E:067A  18                  	db $18		;[Note] 25
     847.  0E:067B                      				;[Skip delay] 1
     848.  0E:067B  18                  	db $18		;[Note] 25
     849.  0E:067C                      				;[Skip delay] 1
     850.  0E:067C  0C                  	db $0C		;[Note] 13
     851.  0E:067D                      				;[Skip delay] 1
     852.  0E:067D  0C                  	db $0C		;[Note] 13
     853.  0E:067E                      				;[Skip delay] 1
     854.  0E:067E  18                  	db $18		;[Note] 25
     855.  0E:067F                      				;[Skip delay] 1
     856.  0E:067F  18                  	db $18		;[Note] 25
     857.  0E:0680                      				;[Skip delay] 1
     858.  0E:0680  0C                  	db $0C		;[Note] 13
     859.  0E:0681                      				;[Skip delay] 1
     860.  0E:0681  0C                  	db $0C		;[Note] 13
     861.  0E:0682                      				;[Skip delay] 1
     862.  0E:0682  18                  	db $18		;[Note] 25
     863.  0E:0683                      				;[Skip delay] 1
     864.  0E:0683  18                  	db $18		;[Note] 25
     865.  0E:0684                      				;[Skip delay] 1
     866.  0E:0684  BF                  	db $BF		;[End-Of-Track]
     867.  0E:0685                      .track_6:
     868.  0E:0685  2B                  	db $2B		;[Note] 44
     869.  0E:0686  6D                  	db $6D		;[Volume] 13
     870.  0E:0687  77                  	db $77		;[Instrument] 8
     871.  0E:0688  C3                  	db $C3		;[Wait] 4
     872.  0E:0689  2D                  	db $2D		;[Note] 46
     873.  0E:068A  C1                  	db $C1		;[Wait] 2
     874.  0E:068B  2E                  	db $2E		;[Note] 47
     875.  0E:068C  C3                  	db $C3		;[Wait] 4
     876.  0E:068D  2B                  	db $2B		;[Note] 44
     877.  0E:068E                      				;[Skip delay] 4
     878.  0E:068E  32                  	db $32		;[Note] 51
     879.  0E:068F  94 01               	db $94, $01	; vibrato control
     880.  0E:0691                      				;[Skip delay] 4
     881.  0E:0691  A7 65               	db $A7, $65	;[CMD vibrato]
     882.  0E:0693  C0                  	db $C0		;[Wait] 1
     883.  0E:0694  B1 06               	db $B1, $06	;[CMD vibrato] rep
     884.  0E:0696  C5                  	db $C5		;[Wait] 6
     885.  0E:0697  A5 06               	db $A5, $06; slide-down
     886.  0E:0699  C0                  	db $C0		;[Wait] 1
     887.  0E:069A  AF 02               	db $AF, $02; slide-down rep
     888.  0E:069C  C1                  	db $C1		;[Wait] 2
     889.  0E:069D  32                  	db $32		;[Note] 51
     890.  0E:069E  6E                  	db $6E		;[Volume] 14
     891.  0E:069F  AB 04               	db $AB, $04; macro offset
     892.  0E:06A1  C0                  	db $C0		;[Wait] 1
     893.  0E:06A2  33                  	db $33		;[Note] 52
     894.  0E:06A3                      				;[Skip delay] 1
     895.  0E:06A3  35                  	db $35		;[Note] 54
     896.  0E:06A4                      				;[Skip delay] 1
     897.  0E:06A4  37                  	db $37		;[Note] 56
     898.  0E:06A5                      				;[Skip delay] 1
     899.  0E:06A5  33                  	db $33		;[Note] 52
     900.  0E:06A6  6D                  	db $6D		;[Volume] 13
     901.  0E:06A7  C2                  	db $C2		;[Wait] 3
     902.  0E:06A8  A7 66               	db $A7, $66	;[CMD vibrato]
     903.  0E:06AA  C0                  	db $C0		;[Wait] 1
     904.  0E:06AB  B1 02               	db $B1, $02	;[CMD vibrato] rep
     905.  0E:06AD  C1                  	db $C1		;[Wait] 2
     906.  0E:06AE  30                  	db $30		;[Note] 49
     907.  0E:06AF                      				;[Skip delay] 2
     908.  0E:06AF  30                  	db $30		;[Note] 49
     909.  0E:06B0  C1                  	db $C1		;[Wait..] 2
     910.  0E:06B1  A7 65               	db $A7, $65	;[CMD vibrato]
     911.  0E:06B3  C0                  	db $C0		;[Wait] 1
     912.  0E:06B4  B1 0B               	db $B1, $0B	;[CMD vibrato] rep
     913.  0E:06B6  CA                  	db $CA		;[Wait] 11
     914.  0E:06B7  A5 03               	db $A5, $03; slide-down
     915.  0E:06B9  C0                  	db $C0		;[Wait] 1
     916.  0E:06BA  AF 03               	db $AF, $03; slide-down rep
     917.  0E:06BC  C2                  	db $C2		;[Wait] 3
     918.  0E:06BD  33                  	db $33		;[Note] 52
     919.  0E:06BE  C1                  	db $C1		;[Wait] 2
     920.  0E:06BF  35                  	db $35		;[Note] 54
     921.  0E:06C0                      				;[Skip delay] 2
     922.  0E:06C0  37                  	db $37		;[Note] 56
     923.  0E:06C1                      				;[Skip delay] 2
     924.  0E:06C1  BF                  	db $BF		;[End-Of-Track]
     925.  0E:06C2                      .track_7:
     926.  0E:06C2  1F                  	db $1F		;[Note] 32
     927.  0E:06C3  70                  	db $70		;[Instrument] 1
     928.  0E:06C4  C1                  	db $C1		;[Wait] 2
     929.  0E:06C5  21                  	db $21		;[Note] 34
     930.  0E:06C6  72                  	db $72		;[Instrument] 3
     931.  0E:06C7  C0                  	db $C0		;[Wait] 1
     932.  0E:06C8  21                  	db $21		;[Note] 34
     933.  0E:06C9                      				;[Skip delay] 1
     934.  0E:06C9  21                  	db $21		;[Note] 34
     935.  0E:06CA  71                  	db $71		;[Instrument] 2
     936.  0E:06CB  C1                  	db $C1		;[Wait] 2
     937.  0E:06CC  21                  	db $21		;[Note] 34
     938.  0E:06CD  72                  	db $72		;[Instrument] 3
     939.  0E:06CE  C0                  	db $C0		;[Wait] 1
     940.  0E:06CF  21                  	db $21		;[Note] 34
     941.  0E:06D0                      				;[Skip delay] 1
     942.  0E:06D0  1F                  	db $1F		;[Note] 32
     943.  0E:06D1  70                  	db $70		;[Instrument] 1
     944.  0E:06D2  C1                  	db $C1		;[Wait] 2
     945.  0E:06D3  21                  	db $21		;[Note] 34
     946.  0E:06D4                      				;[Skip delay] 2
     947.  0E:06D4  21                  	db $21		;[Note] 34
     948.  0E:06D5  71                  	db $71		;[Instrument] 2
     949.  0E:06D6                      				;[Skip delay] 2
     950.  0E:06D6  1F                  	db $1F		;[Note] 32
     951.  0E:06D7  70                  	db $70		;[Instrument] 1
     952.  0E:06D8  C0                  	db $C0		;[Wait] 1
     953.  0E:06D9  21                  	db $21		;[Note] 34
     954.  0E:06DA  72                  	db $72		;[Instrument] 3
     955.  0E:06DB                      				;[Skip delay] 1
     956.  0E:06DB  1F                  	db $1F		;[Note] 32
     957.  0E:06DC  70                  	db $70		;[Instrument] 1
     958.  0E:06DD  C1                  	db $C1		;[Wait] 2
     959.  0E:06DE  21                  	db $21		;[Note] 34
     960.  0E:06DF  72                  	db $72		;[Instrument] 3
     961.  0E:06E0  C0                  	db $C0		;[Wait] 1
     962.  0E:06E1  21                  	db $21		;[Note] 34
     963.  0E:06E2                      				;[Skip delay] 1
     964.  0E:06E2  21                  	db $21		;[Note] 34
     965.  0E:06E3  71                  	db $71		;[Instrument] 2
     966.  0E:06E4  C1                  	db $C1		;[Wait] 2
     967.  0E:06E5  23                  	db $23		;[Note] 36
     968.  0E:06E6  6E                  	db $6E		;[Volume] 14
     969.  0E:06E7  75                  	db $75		;[Instrument] 6
     970.  0E:06E8  C0                  	db $C0		;[Wait] 1
     971.  0E:06E9  1F                  	db $1F		;[Note] 32
     972.  0E:06EA                      				;[Skip delay] 1
     973.  0E:06EA  2B                  	db $2B		;[Note] 44
     974.  0E:06EB  6F                  	db $6F		;[Volume] 15
     975.  0E:06EC                      				;[Skip delay] 1
     976.  0E:06EC  2B                  	db $2B		;[Note] 44
     977.  0E:06ED                      				;[Skip delay] 1
     978.  0E:06ED  28                  	db $28		;[Note] 41
     979.  0E:06EE                      				;[Skip delay] 1
     980.  0E:06EE  28                  	db $28		;[Note] 41
     981.  0E:06EF                      				;[Skip delay] 1
     982.  0E:06EF  26                  	db $26		;[Note] 39
     983.  0E:06F0                      				;[Skip delay] 1
     984.  0E:06F0  26                  	db $26		;[Note] 39
     985.  0E:06F1                      				;[Skip delay] 1
     986.  0E:06F1  21                  	db $21		;[Note] 34
     987.  0E:06F2                      				;[Skip delay] 1
     988.  0E:06F2  1C                  	db $1C		;[Note] 29
     989.  0E:06F3                      				;[Skip delay] 1
     990.  0E:06F3  BF                  	db $BF		;[End-Of-Track]
     991.  0E:06F4                      .track_8:
     992.  0E:06F4  0E                  	db $0E		;[Note] 15
     993.  0E:06F5  C0                  	db $C0		;[Wait] 1
     994.  0E:06F6  0E                  	db $0E		;[Note] 15
     995.  0E:06F7                      				;[Skip delay] 1
     996.  0E:06F7  1A                  	db $1A		;[Note] 27
     997.  0E:06F8                      				;[Skip delay] 1
     998.  0E:06F8  1A                  	db $1A		;[Note] 27
     999.  0E:06F9                      				;[Skip delay] 1
    1000.  0E:06F9  0E                  	db $0E		;[Note] 15
    1001.  0E:06FA                      				;[Skip delay] 1
    1002.  0E:06FA  0E                  	db $0E		;[Note] 15
    1003.  0E:06FB                      				;[Skip delay] 1
    1004.  0E:06FB  1A                  	db $1A		;[Note] 27
    1005.  0E:06FC                      				;[Skip delay] 1
    1006.  0E:06FC  1A                  	db $1A		;[Note] 27
    1007.  0E:06FD                      				;[Skip delay] 1
    1008.  0E:06FD  0E                  	db $0E		;[Note] 15
    1009.  0E:06FE                      				;[Skip delay] 1
    1010.  0E:06FE  0E                  	db $0E		;[Note] 15
    1011.  0E:06FF                      				;[Skip delay] 1
    1012.  0E:06FF  1A                  	db $1A		;[Note] 27
    1013.  0E:0700                      				;[Skip delay] 1
    1014.  0E:0700  1A                  	db $1A		;[Note] 27
    1015.  0E:0701                      				;[Skip delay] 1
    1016.  0E:0701  0E                  	db $0E		;[Note] 15
    1017.  0E:0702                      				;[Skip delay] 1
    1018.  0E:0702  0E                  	db $0E		;[Note] 15
    1019.  0E:0703                      				;[Skip delay] 1
    1020.  0E:0703  1A                  	db $1A		;[Note] 27
    1021.  0E:0704                      				;[Skip delay] 1
    1022.  0E:0704  1A                  	db $1A		;[Note] 27
    1023.  0E:0705                      				;[Skip delay] 1
    1024.  0E:0705  0E                  	db $0E		;[Note] 15
    1025.  0E:0706                      				;[Skip delay] 1
    1026.  0E:0706  0E                  	db $0E		;[Note] 15
    1027.  0E:0707                      				;[Skip delay] 1
    1028.  0E:0707  1A                  	db $1A		;[Note] 27
    1029.  0E:0708                      				;[Skip delay] 1
    1030.  0E:0708  1A                  	db $1A		;[Note] 27
    1031.  0E:0709                      				;[Skip delay] 1
    1032.  0E:0709  0E                  	db $0E		;[Note] 15
    1033.  0E:070A                      				;[Skip delay] 1
    1034.  0E:070A  0E                  	db $0E		;[Note] 15
    1035.  0E:070B                      				;[Skip delay] 1
    1036.  0E:070B  1A                  	db $1A		;[Note] 27
    1037.  0E:070C                      				;[Skip delay] 1
    1038.  0E:070C  1A                  	db $1A		;[Note] 27
    1039.  0E:070D                      				;[Skip delay] 1
    1040.  0E:070D  0E                  	db $0E		;[Note] 15
    1041.  0E:070E                      				;[Skip delay] 1
    1042.  0E:070E  0E                  	db $0E		;[Note] 15
    1043.  0E:070F                      				;[Skip delay] 1
    1044.  0E:070F  1A                  	db $1A		;[Note] 27
    1045.  0E:0710                      				;[Skip delay] 1
    1046.  0E:0710  1A                  	db $1A		;[Note] 27
    1047.  0E:0711                      				;[Skip delay] 1
    1048.  0E:0711  0E                  	db $0E		;[Note] 15
    1049.  0E:0712                      				;[Skip delay] 1
    1050.  0E:0712  0E                  	db $0E		;[Note] 15
    1051.  0E:0713                      				;[Skip delay] 1
    1052.  0E:0713  1A                  	db $1A		;[Note] 27
    1053.  0E:0714                      				;[Skip delay] 1
    1054.  0E:0714  1A                  	db $1A		;[Note] 27
    1055.  0E:0715                      				;[Skip delay] 1
    1056.  0E:0715  BF                  	db $BF		;[End-Of-Track]
    1057.  0E:0716                      .track_9:
    1058.  0E:0716  39                  	db $39		;[Note] 58
    1059.  0E:0717  C2                  	db $C2		;[Wait] 3
    1060.  0E:0718  A7 56               	db $A7, $56	;[CMD vibrato]
    1061.  0E:071A  C0                  	db $C0		;[Wait] 1
    1062.  0E:071B  B1 04               	db $B1, $04	;[CMD vibrato] rep
    1063.  0E:071D  C3                  	db $C3		;[Wait] 4
    1064.  0E:071E  A7 55               	db $A7, $55	;[CMD vibrato]
    1065.  0E:0720  C0                  	db $C0		;[Wait] 1
    1066.  0E:0721  B1 03               	db $B1, $03	;[CMD vibrato] rep
    1067.  0E:0723  C2                  	db $C2		;[Wait] 3
    1068.  0E:0724  37                  	db $37		;[Note] 56
    1069.  0E:0725  C3                  	db $C3		;[Wait] 4
    1070.  0E:0726  36                  	db $36		;[Note] 55
    1071.  0E:0727  C3                  	db $C3		;[Wait..] 4
    1072.  0E:0728  A7 36               	db $A7, $36	;[CMD vibrato]
    1073.  0E:072A  C0                  	db $C0		;[Wait] 1
    1074.  0E:072B  B1 01               	db $B1, $01	;[CMD vibrato] rep
    1075.  0E:072D                      				;[Skip delay] 1
    1076.  0E:072D  A5 05               	db $A5, $05; slide-down
    1077.  0E:072F                      				;[Skip delay] 1
    1078.  0E:072F  AF 01               	db $AF, $01; slide-down rep
    1079.  0E:0731                      				;[Skip delay] 1
    1080.  0E:0731  3A                  	db $3A		;[Note] 59
    1081.  0E:0732  C3                  	db $C3		;[Wait] 4
    1082.  0E:0733  39                  	db $39		;[Note] 58
    1083.  0E:0734                      				;[Skip delay] 4
    1084.  0E:0734  BF                  	db $BF		;[End-Of-Track]
    1085.  0E:0735                      .track_10:
    1086.  0E:0735  DF                  	db $DF		;[Wait] 32
    1087.  0E:0736  BF                  	db $BF		;[End-Of-Track]
    1088.  0E:0737                      .track_11:
    1089.  0E:0737  1F                  	db $1F		;[Note] 32
    1090.  0E:0738  70                  	db $70		;[Instrument] 1
    1091.  0E:0739  C3                  	db $C3		;[Wait] 4
    1092.  0E:073A  21                  	db $21		;[Note] 34
    1093.  0E:073B  71                  	db $71		;[Instrument] 2
    1094.  0E:073C                      				;[Skip delay] 4
    1095.  0E:073C  1F                  	db $1F		;[Note] 32
    1096.  0E:073D  70                  	db $70		;[Instrument] 1
    1097.  0E:073E  C1                  	db $C1		;[Wait] 2
    1098.  0E:073F  21                  	db $21		;[Note] 34
    1099.  0E:0740                      				;[Skip delay] 2
    1100.  0E:0740  21                  	db $21		;[Note] 34
    1101.  0E:0741  71                  	db $71		;[Instrument] 2
    1102.  0E:0742                      				;[Skip delay] 2
    1103.  0E:0742  1F                  	db $1F		;[Note] 32
    1104.  0E:0743  70                  	db $70		;[Instrument] 1
    1105.  0E:0744                      				;[Skip delay] 2
    1106.  0E:0744  1F                  	db $1F		;[Note] 32
    1107.  0E:0745  C3                  	db $C3		;[Wait] 4
    1108.  0E:0746  21                  	db $21		;[Note] 34
    1109.  0E:0747  71                  	db $71		;[Instrument] 2
    1110.  0E:0748                      				;[Skip delay] 4
    1111.  0E:0748  1F                  	db $1F		;[Note] 32
    1112.  0E:0749  70                  	db $70		;[Instrument] 1
    1113.  0E:074A  C1                  	db $C1		;[Wait] 2
    1114.  0E:074B  1F                  	db $1F		;[Note] 32
    1115.  0E:074C                      				;[Skip delay] 2
    1116.  0E:074C  21                  	db $21		;[Note] 34
    1117.  0E:074D  71                  	db $71		;[Instrument] 2
    1118.  0E:074E  C3                  	db $C3		;[Wait] 4
    1119.  0E:074F  1F                  	db $1F		;[Note] 32
    1120.  0E:0750  70                  	db $70		;[Instrument] 1
    1121.  0E:0751                      				;[Skip delay] 4
    1122.  0E:0751  21                  	db $21		;[Note] 34
    1123.  0E:0752  71                  	db $71		;[Instrument] 2
    1124.  0E:0753                      				;[Skip delay] 4
    1125.  0E:0753  1F                  	db $1F		;[Note] 32
    1126.  0E:0754  70                  	db $70		;[Instrument] 1
    1127.  0E:0755  C1                  	db $C1		;[Wait] 2
    1128.  0E:0756  21                  	db $21		;[Note] 34
    1129.  0E:0757                      				;[Skip delay] 2
    1130.  0E:0757  21                  	db $21		;[Note] 34
    1131.  0E:0758  71                  	db $71		;[Instrument] 2
    1132.  0E:0759  C3                  	db $C3		;[Wait] 4
    1133.  0E:075A  1F                  	db $1F		;[Note] 32
    1134.  0E:075B  70                  	db $70		;[Instrument] 1
    1135.  0E:075C                      				;[Skip delay] 4
    1136.  0E:075C  21                  	db $21		;[Note] 34
    1137.  0E:075D  71                  	db $71		;[Instrument] 2
    1138.  0E:075E                      				;[Skip delay] 4
    1139.  0E:075E  1F                  	db $1F		;[Note] 32
    1140.  0E:075F  70                  	db $70		;[Instrument] 1
    1141.  0E:0760  C1                  	db $C1		;[Wait] 2
    1142.  0E:0761  21                  	db $21		;[Note] 34
    1143.  0E:0762  71                  	db $71		;[Instrument] 2
    1144.  0E:0763                      				;[Skip delay] 2
    1145.  0E:0763  21                  	db $21		;[Note] 34
    1146.  0E:0764                      				;[Skip delay] 2
    1147.  0E:0764  21                  	db $21		;[Note] 34
    1148.  0E:0765  C0                  	db $C0		;[Wait] 1
    1149.  0E:0766  21                  	db $21		;[Note] 34
    1150.  0E:0767                      				;[Skip delay] 1
    1151.  0E:0767  BF                  	db $BF		;[End-Of-Track]
    1152.  0E:0768                      .track_12:
    1153.  0E:0768  C0                  	db $C0		;[Wait] 1
    1154.  0E:0769  3A                  	db $3A		;[Note] 59
    1155.  0E:076A  6E                  	db $6E		;[Volume] 14
    1156.  0E:076B  76                  	db $76		;[Instrument] 7
    1157.  0E:076C                      				;[Skip delay] 1
    1158.  0E:076C  39                  	db $39		;[Note] 58
    1159.  0E:076D  A5 04               	db $A5, $04; slide-down
    1160.  0E:076F                      				;[Skip delay] 1
    1161.  0E:076F  33                  	db $33		;[Note] 52
    1162.  0E:0770                      				;[Skip delay] 1
    1163.  0E:0770  32                  	db $32		;[Note] 51
    1164.  0E:0771                      				;[Skip delay] 1
    1165.  0E:0771  3A                  	db $3A		;[Note] 59
    1166.  0E:0772                      				;[Skip delay] 1
    1167.  0E:0772  39                  	db $39		;[Note] 58
    1168.  0E:0773                      				;[Skip delay] 1
    1169.  0E:0773  33                  	db $33		;[Note] 52
    1170.  0E:0774                      				;[Skip delay] 1
    1171.  0E:0774  32                  	db $32		;[Note] 51
    1172.  0E:0775                      				;[Skip delay] 1
    1173.  0E:0775  3A                  	db $3A		;[Note] 59
    1174.  0E:0776                      				;[Skip delay] 1
    1175.  0E:0776  39                  	db $39		;[Note] 58
    1176.  0E:0777                      				;[Skip delay] 1
    1177.  0E:0777  33                  	db $33		;[Note] 52
    1178.  0E:0778                      				;[Skip delay] 1
    1179.  0E:0778  32                  	db $32		;[Note] 51
    1180.  0E:0779                      				;[Skip delay] 1
    1181.  0E:0779  3A                  	db $3A		;[Note] 59
    1182.  0E:077A                      				;[Skip delay] 1
    1183.  0E:077A  39                  	db $39		;[Note] 58
    1184.  0E:077B                      				;[Skip delay] 1
    1185.  0E:077B  33                  	db $33		;[Note] 52
    1186.  0E:077C                      				;[Skip delay] 1
    1187.  0E:077C  32                  	db $32		;[Note] 51
    1188.  0E:077D                      				;[Skip delay] 1
    1189.  0E:077D  3E                  	db $3E		;[Note] 63
    1190.  0E:077E                      				;[Skip delay] 1
    1191.  0E:077E  3C                  	db $3C		;[Note] 61
    1192.  0E:077F                      				;[Skip delay] 1
    1193.  0E:077F  37                  	db $37		;[Note] 56
    1194.  0E:0780                      				;[Skip delay] 1
    1195.  0E:0780  35                  	db $35		;[Note] 54
    1196.  0E:0781                      				;[Skip delay] 1
    1197.  0E:0781  3E                  	db $3E		;[Note] 63
    1198.  0E:0782                      				;[Skip delay] 1
    1199.  0E:0782  3C                  	db $3C		;[Note] 61
    1200.  0E:0783                      				;[Skip delay] 1
    1201.  0E:0783  37                  	db $37		;[Note] 56
    1202.  0E:0784                      				;[Skip delay] 1
    1203.  0E:0784  35                  	db $35		;[Note] 54
    1204.  0E:0785                      				;[Skip delay] 1
    1205.  0E:0785  3E                  	db $3E		;[Note] 63
    1206.  0E:0786                      				;[Skip delay] 1
    1207.  0E:0786  3C                  	db $3C		;[Note] 61
    1208.  0E:0787                      				;[Skip delay] 1
    1209.  0E:0787  37                  	db $37		;[Note] 56
    1210.  0E:0788                      				;[Skip delay] 1
    1211.  0E:0788  35                  	db $35		;[Note] 54
    1212.  0E:0789                      				;[Skip delay] 1
    1213.  0E:0789  3E                  	db $3E		;[Note] 63
    1214.  0E:078A                      				;[Skip delay] 1
    1215.  0E:078A  3C                  	db $3C		;[Note] 61
    1216.  0E:078B                      				;[Skip delay] 1
    1217.  0E:078B  37                  	db $37		;[Note] 56
    1218.  0E:078C                      				;[Skip delay] 1
    1219.  0E:078C  35                  	db $35		;[Note] 54
    1220.  0E:078D                      				;[Skip delay] 1
    1221.  0E:078D  3F                  	db $3F		;[Note] 64
    1222.  0E:078E                      				;[Skip delay] 1
    1223.  0E:078E  3E                  	db $3E		;[Note] 63
    1224.  0E:078F                      				;[Skip delay] 1
    1225.  0E:078F  37                  	db $37		;[Note] 56
    1226.  0E:0790                      				;[Skip delay] 1
    1227.  0E:0790  35                  	db $35		;[Note] 54
    1228.  0E:0791                      				;[Skip delay] 1
    1229.  0E:0791  3F                  	db $3F		;[Note] 64
    1230.  0E:0792                      				;[Skip delay] 1
    1231.  0E:0792  3E                  	db $3E		;[Note] 63
    1232.  0E:0793                      				;[Skip delay] 1
    1233.  0E:0793  37                  	db $37		;[Note] 56
    1234.  0E:0794                      				;[Skip delay] 1
    1235.  0E:0794  35                  	db $35		;[Note] 54
    1236.  0E:0795                      				;[Skip delay] 1
    1237.  0E:0795  3F                  	db $3F		;[Note] 64
    1238.  0E:0796                      				;[Skip delay] 1
    1239.  0E:0796  3E                  	db $3E		;[Note] 63
    1240.  0E:0797                      				;[Skip delay] 1
    1241.  0E:0797  37                  	db $37		;[Note] 56
    1242.  0E:0798                      				;[Skip delay] 1
    1243.  0E:0798  35                  	db $35		;[Note] 54
    1244.  0E:0799                      				;[Skip delay] 1
    1245.  0E:0799  3F                  	db $3F		;[Note] 64
    1246.  0E:079A                      				;[Skip delay] 1
    1247.  0E:079A  3E                  	db $3E		;[Note] 63
    1248.  0E:079B                      				;[Skip delay] 1
    1249.  0E:079B  37                  	db $37		;[Note] 56
    1250.  0E:079C                      				;[Skip delay] 1
    1251.  0E:079C  35                  	db $35		;[Note] 54
    1252.  0E:079D                      				;[Skip delay] 1
    1253.  0E:079D  43                  	db $43		;[Note] 68
    1254.  0E:079E                      				;[Skip delay] 1
    1255.  0E:079E  42                  	db $42		;[Note] 67
    1256.  0E:079F                      				;[Skip delay] 1
    1257.  0E:079F  3F                  	db $3F		;[Note] 64
    1258.  0E:07A0                      				;[Skip delay] 1
    1259.  0E:07A0  3E                  	db $3E		;[Note] 63
    1260.  0E:07A1                      				;[Skip delay] 1
    1261.  0E:07A1  43                  	db $43		;[Note] 68
    1262.  0E:07A2                      				;[Skip delay] 1
    1263.  0E:07A2  42                  	db $42		;[Note] 67
    1264.  0E:07A3                      				;[Skip delay] 1
    1265.  0E:07A3  3F                  	db $3F		;[Note] 64
    1266.  0E:07A4                      				;[Skip delay] 1
    1267.  0E:07A4  3E                  	db $3E		;[Note] 63
    1268.  0E:07A5                      				;[Skip delay] 1
    1269.  0E:07A5  43                  	db $43		;[Note] 68
    1270.  0E:07A6                      				;[Skip delay] 1
    1271.  0E:07A6  42                  	db $42		;[Note] 67
    1272.  0E:07A7                      				;[Skip delay] 1
    1273.  0E:07A7  3F                  	db $3F		;[Note] 64
    1274.  0E:07A8                      				;[Skip delay] 1
    1275.  0E:07A8  3E                  	db $3E		;[Note] 63
    1276.  0E:07A9                      				;[Skip delay] 1
    1277.  0E:07A9  43                  	db $43		;[Note] 68
    1278.  0E:07AA                      				;[Skip delay] 1
    1279.  0E:07AA  42                  	db $42		;[Note] 67
    1280.  0E:07AB                      				;[Skip delay] 1
    1281.  0E:07AB  3F                  	db $3F		;[Note] 64
    1282.  0E:07AC                      				;[Skip delay] 1
    1283.  0E:07AC  BF                  	db $BF		;[End-Of-Track]
    1284.  0E:07AD                      .track_13:
    1285.  0E:07AD  3A                  	db $3A		;[Note] 59
    1286.  0E:07AE  6E                  	db $6E		;[Volume] 14
    1287.  0E:07AF  C0                  	db $C0		;[Wait] 1
    1288.  0E:07B0  39                  	db $39		;[Note] 58
    1289.  0E:07B1                      				;[Skip delay] 1
    1290.  0E:07B1  33                  	db $33		;[Note] 52
    1291.  0E:07B2                      				;[Skip delay] 1
    1292.  0E:07B2  32                  	db $32		;[Note] 51
    1293.  0E:07B3                      				;[Skip delay] 1
    1294.  0E:07B3  3A                  	db $3A		;[Note] 59
    1295.  0E:07B4                      				;[Skip delay] 1
    1296.  0E:07B4  39                  	db $39		;[Note] 58
    1297.  0E:07B5                      				;[Skip delay] 1
    1298.  0E:07B5  33                  	db $33		;[Note] 52
    1299.  0E:07B6                      				;[Skip delay] 1
    1300.  0E:07B6  32                  	db $32		;[Note] 51
    1301.  0E:07B7                      				;[Skip delay] 1
    1302.  0E:07B7  3A                  	db $3A		;[Note] 59
    1303.  0E:07B8                      				;[Skip delay] 1
    1304.  0E:07B8  39                  	db $39		;[Note] 58
    1305.  0E:07B9                      				;[Skip delay] 1
    1306.  0E:07B9  33                  	db $33		;[Note] 52
    1307.  0E:07BA                      				;[Skip delay] 1
    1308.  0E:07BA  32                  	db $32		;[Note] 51
    1309.  0E:07BB                      				;[Skip delay] 1
    1310.  0E:07BB  3A                  	db $3A		;[Note] 59
    1311.  0E:07BC                      				;[Skip delay] 1
    1312.  0E:07BC  39                  	db $39		;[Note] 58
    1313.  0E:07BD                      				;[Skip delay] 1
    1314.  0E:07BD  33                  	db $33		;[Note] 52
    1315.  0E:07BE                      				;[Skip delay] 1
    1316.  0E:07BE  32                  	db $32		;[Note] 51
    1317.  0E:07BF                      				;[Skip delay] 1
    1318.  0E:07BF  3E                  	db $3E		;[Note] 63
    1319.  0E:07C0                      				;[Skip delay] 1
    1320.  0E:07C0  3C                  	db $3C		;[Note] 61
    1321.  0E:07C1                      				;[Skip delay] 1
    1322.  0E:07C1  37                  	db $37		;[Note] 56
    1323.  0E:07C2                      				;[Skip delay] 1
    1324.  0E:07C2  35                  	db $35		;[Note] 54
    1325.  0E:07C3                      				;[Skip delay] 1
    1326.  0E:07C3  3E                  	db $3E		;[Note] 63
    1327.  0E:07C4                      				;[Skip delay] 1
    1328.  0E:07C4  3C                  	db $3C		;[Note] 61
    1329.  0E:07C5                      				;[Skip delay] 1
    1330.  0E:07C5  37                  	db $37		;[Note] 56
    1331.  0E:07C6                      				;[Skip delay] 1
    1332.  0E:07C6  35                  	db $35		;[Note] 54
    1333.  0E:07C7                      				;[Skip delay] 1
    1334.  0E:07C7  3E                  	db $3E		;[Note] 63
    1335.  0E:07C8                      				;[Skip delay] 1
    1336.  0E:07C8  3C                  	db $3C		;[Note] 61
    1337.  0E:07C9                      				;[Skip delay] 1
    1338.  0E:07C9  37                  	db $37		;[Note] 56
    1339.  0E:07CA                      				;[Skip delay] 1
    1340.  0E:07CA  35                  	db $35		;[Note] 54
    1341.  0E:07CB                      				;[Skip delay] 1
    1342.  0E:07CB  3E                  	db $3E		;[Note] 63
    1343.  0E:07CC                      				;[Skip delay] 1
    1344.  0E:07CC  3C                  	db $3C		;[Note] 61
    1345.  0E:07CD                      				;[Skip delay] 1
    1346.  0E:07CD  37                  	db $37		;[Note] 56
    1347.  0E:07CE                      				;[Skip delay] 1
    1348.  0E:07CE  35                  	db $35		;[Note] 54
    1349.  0E:07CF                      				;[Skip delay] 1
    1350.  0E:07CF  3F                  	db $3F		;[Note] 64
    1351.  0E:07D0                      				;[Skip delay] 1
    1352.  0E:07D0  3E                  	db $3E		;[Note] 63
    1353.  0E:07D1                      				;[Skip delay] 1
    1354.  0E:07D1  37                  	db $37		;[Note] 56
    1355.  0E:07D2                      				;[Skip delay] 1
    1356.  0E:07D2  35                  	db $35		;[Note] 54
    1357.  0E:07D3                      				;[Skip delay] 1
    1358.  0E:07D3  3F                  	db $3F		;[Note] 64
    1359.  0E:07D4                      				;[Skip delay] 1
    1360.  0E:07D4  3E                  	db $3E		;[Note] 63
    1361.  0E:07D5                      				;[Skip delay] 1
    1362.  0E:07D5  37                  	db $37		;[Note] 56
    1363.  0E:07D6                      				;[Skip delay] 1
    1364.  0E:07D6  35                  	db $35		;[Note] 54
    1365.  0E:07D7                      				;[Skip delay] 1
    1366.  0E:07D7  3F                  	db $3F		;[Note] 64
    1367.  0E:07D8                      				;[Skip delay] 1
    1368.  0E:07D8  3E                  	db $3E		;[Note] 63
    1369.  0E:07D9                      				;[Skip delay] 1
    1370.  0E:07D9  37                  	db $37		;[Note] 56
    1371.  0E:07DA                      				;[Skip delay] 1
    1372.  0E:07DA  35                  	db $35		;[Note] 54
    1373.  0E:07DB                      				;[Skip delay] 1
    1374.  0E:07DB  3F                  	db $3F		;[Note] 64
    1375.  0E:07DC                      				;[Skip delay] 1
    1376.  0E:07DC  3E                  	db $3E		;[Note] 63
    1377.  0E:07DD                      				;[Skip delay] 1
    1378.  0E:07DD  37                  	db $37		;[Note] 56
    1379.  0E:07DE                      				;[Skip delay] 1
    1380.  0E:07DE  35                  	db $35		;[Note] 54
    1381.  0E:07DF                      				;[Skip delay] 1
    1382.  0E:07DF  43                  	db $43		;[Note] 68
    1383.  0E:07E0                      				;[Skip delay] 1
    1384.  0E:07E0  42                  	db $42		;[Note] 67
    1385.  0E:07E1                      				;[Skip delay] 1
    1386.  0E:07E1  3F                  	db $3F		;[Note] 64
    1387.  0E:07E2                      				;[Skip delay] 1
    1388.  0E:07E2  3E                  	db $3E		;[Note] 63
    1389.  0E:07E3                      				;[Skip delay] 1
    1390.  0E:07E3  43                  	db $43		;[Note] 68
    1391.  0E:07E4                      				;[Skip delay] 1
    1392.  0E:07E4  42                  	db $42		;[Note] 67
    1393.  0E:07E5                      				;[Skip delay] 1
    1394.  0E:07E5  3F                  	db $3F		;[Note] 64
    1395.  0E:07E6                      				;[Skip delay] 1
    1396.  0E:07E6  3E                  	db $3E		;[Note] 63
    1397.  0E:07E7                      				;[Skip delay] 1
    1398.  0E:07E7  43                  	db $43		;[Note] 68
    1399.  0E:07E8                      				;[Skip delay] 1
    1400.  0E:07E8  42                  	db $42		;[Note] 67
    1401.  0E:07E9                      				;[Skip delay] 1
    1402.  0E:07E9  3F                  	db $3F		;[Note] 64
    1403.  0E:07EA                      				;[Skip delay] 1
    1404.  0E:07EA  3E                  	db $3E		;[Note] 63
    1405.  0E:07EB                      				;[Skip delay] 1
    1406.  0E:07EB  43                  	db $43		;[Note] 68
    1407.  0E:07EC                      				;[Skip delay] 1
    1408.  0E:07EC  42                  	db $42		;[Note] 67
    1409.  0E:07ED                      				;[Skip delay] 1
    1410.  0E:07ED  3F                  	db $3F		;[Note] 64
    1411.  0E:07EE                      				;[Skip delay] 1
    1412.  0E:07EE  3E                  	db $3E		;[Note] 63
    1413.  0E:07EF                      				;[Skip delay] 1
    1414.  0E:07EF  BF                  	db $BF		;[End-Of-Track]
    1415.  0E:07F0                      .track_14:
    1416.  0E:07F0  F7                  	db $F7		;[Wait] 56
    1417.  0E:07F1  02                  	db $02		;[Note] 3
    1418.  0E:07F2  6F                  	db $6F		;[Volume] 15
    1419.  0E:07F3  79                  	db $79		;[Instrument] 10
    1420.  0E:07F4  C0                  	db $C0		;[Wait] 1
    1421.  0E:07F5  60                  	db $60		;[Note] 97
    1422.  0E:07F6                      				;[Skip delay] 1
    1423.  0E:07F6  02                  	db $02		;[Note] 3
    1424.  0E:07F7                      				;[Skip delay] 1
    1425.  0E:07F7  60                  	db $60		;[Note] 97
    1426.  0E:07F8                      				;[Skip delay] 1
    1427.  0E:07F8  0E                  	db $0E		;[Note] 15
    1428.  0E:07F9  C0                  	db $C0		;[Wait..] 1
    1429.  0E:07FA  A5 50               	db $A5, $50; slide-down
    1430.  0E:07FC                      				;[Skip delay] 1
    1431.  0E:07FC  AF 02               	db $AF, $02; slide-down rep
    1432.  0E:07FE  C1                  	db $C1		;[Wait] 2
    1433.  0E:07FF  BF                  	db $BF		;[End-Of-Track]
    1434.  0E:0800                      .track_15:
    1435.  0E:0800  F7                  	db $F7		;[Wait] 56
    1436.  0E:0801  02                  	db $02		;[Note] 3
    1437.  0E:0802  6F                  	db $6F		;[Volume] 15
    1438.  0E:0803  88                  	db $88		;[Instrument] 25
    1439.  0E:0804  C0                  	db $C0		;[Wait] 1
    1440.  0E:0805  60                  	db $60		;[Note] 97
    1441.  0E:0806                      				;[Skip delay] 1
    1442.  0E:0806  02                  	db $02		;[Note] 3
    1443.  0E:0807                      				;[Skip delay] 1
    1444.  0E:0807  60                  	db $60		;[Note] 97
    1445.  0E:0808                      				;[Skip delay] 1
    1446.  0E:0808  0E                  	db $0E		;[Note] 15
    1447.  0E:0809  C0                  	db $C0		;[Wait..] 1
    1448.  0E:080A  A5 50               	db $A5, $50; slide-down
    1449.  0E:080C                      				;[Skip delay] 1
    1450.  0E:080C  AF 02               	db $AF, $02; slide-down rep
    1451.  0E:080E  C1                  	db $C1		;[Wait] 2
    1452.  0E:080F  BF                  	db $BF		;[End-Of-Track]
    1453.  0E:0810                      .track_16:
    1454.  0E:0810  F9                  	db $F9		;[Wait] 58
    1455.  0E:0811  32                  	db $32		;[Note] 51
    1456.  0E:0812  6F                  	db $6F		;[Volume] 15
    1457.  0E:0813  84                  	db $84		;[Instrument] 21
    1458.  0E:0814  C1                  	db $C1		;[Wait] 2
    1459.  0E:0815  28                  	db $28		;[Note] 41
    1460.  0E:0816                      				;[Skip delay] 2
    1461.  0E:0816  1A                  	db $1A		;[Note] 27
    1462.  0E:0817  C0                  	db $C0		;[Wait] 1
    1463.  0E:0818  1A                  	db $1A		;[Note] 27
    1464.  0E:0819                      				;[Skip delay] 1
    1465.  0E:0819  BF                  	db $BF		;[End-Of-Track]
    1466.  0E:081A                      .track_17:
    1467.  0E:081A  C1                  	db $C1		;[Wait] 2
    1468.  0E:081B  2B                  	db $2B		;[Note] 44
    1469.  0E:081C  69                  	db $69		;[Volume] 9
    1470.  0E:081D  77                  	db $77		;[Instrument] 8
    1471.  0E:081E  C3                  	db $C3		;[Wait] 4
    1472.  0E:081F  2D                  	db $2D		;[Note] 46
    1473.  0E:0820  C1                  	db $C1		;[Wait] 2
    1474.  0E:0821  2E                  	db $2E		;[Note] 47
    1475.  0E:0822  C3                  	db $C3		;[Wait] 4
    1476.  0E:0823  2B                  	db $2B		;[Note] 44
    1477.  0E:0824                      				;[Skip delay] 4
    1478.  0E:0824  32                  	db $32		;[Note] 51
    1479.  0E:0825  94 01               	db $94, $01	; vibrato control
    1480.  0E:0827                      				;[Skip delay] 4
    1481.  0E:0827  A7 65               	db $A7, $65	;[CMD vibrato]
    1482.  0E:0829  C0                  	db $C0		;[Wait] 1
    1483.  0E:082A  B1 06               	db $B1, $06	;[CMD vibrato] rep
    1484.  0E:082C  C5                  	db $C5		;[Wait] 6
    1485.  0E:082D  A5 06               	db $A5, $06; slide-down
    1486.  0E:082F  C0                  	db $C0		;[Wait] 1
    1487.  0E:0830  AF 02               	db $AF, $02; slide-down rep
    1488.  0E:0832  C1                  	db $C1		;[Wait] 2
    1489.  0E:0833  32                  	db $32		;[Note] 51
    1490.  0E:0834  AB 04               	db $AB, $04; macro offset
    1491.  0E:0836  C0                  	db $C0		;[Wait] 1
    1492.  0E:0837  30                  	db $30		;[Note] 49
    1493.  0E:0838                      				;[Skip delay] 1
    1494.  0E:0838  2E                  	db $2E		;[Note] 47
    1495.  0E:0839                      				;[Skip delay] 1
    1496.  0E:0839  2D                  	db $2D		;[Note] 46
    1497.  0E:083A                      				;[Skip delay] 1
    1498.  0E:083A  2B                  	db $2B		;[Note] 44
    1499.  0E:083B  C3                  	db $C3		;[Wait] 4
    1500.  0E:083C  2D                  	db $2D		;[Note] 46
    1501.  0E:083D  C1                  	db $C1		;[Wait] 2
    1502.  0E:083E  2E                  	db $2E		;[Note] 47
    1503.  0E:083F  C3                  	db $C3		;[Wait] 4
    1504.  0E:0840  2B                  	db $2B		;[Note] 44
    1505.  0E:0841                      				;[Skip delay] 4
    1506.  0E:0841  32                  	db $32		;[Note] 51
    1507.  0E:0842  94 01               	db $94, $01	; vibrato control
    1508.  0E:0844                      				;[Skip delay] 4
    1509.  0E:0844  A7 65               	db $A7, $65	;[CMD vibrato]
    1510.  0E:0846  C0                  	db $C0		;[Wait] 1
    1511.  0E:0847  B1 06               	db $B1, $06	;[CMD vibrato] rep
    1512.  0E:0849  C5                  	db $C5		;[Wait] 6
    1513.  0E:084A  A7 64               	db $A7, $64	;[CMD vibrato]
    1514.  0E:084C  C0                  	db $C0		;[Wait] 1
    1515.  0E:084D  B1 01               	db $B1, $01	;[CMD vibrato] rep
    1516.  0E:084F                      				;[Skip delay] 1
    1517.  0E:084F  60                  	db $60		;[Note] 97
    1518.  0E:0850                      				;[Skip delay] 1
    1519.  0E:0850  32                  	db $32		;[Note] 51
    1520.  0E:0851  AB 04               	db $AB, $04; macro offset
    1521.  0E:0853                      				;[Skip delay] 1
    1522.  0E:0853  30                  	db $30		;[Note] 49
    1523.  0E:0854                      				;[Skip delay] 1
    1524.  0E:0854  BF                  	db $BF		;[End-Of-Track]
    1525.  0E:0855                      .track_18:
    1526.  0E:0855  07                  	db $07		;[Note] 8
    1527.  0E:0856  6F                  	db $6F		;[Volume] 15
    1528.  0E:0857  79                  	db $79		;[Instrument] 10
    1529.  0E:0858  C0                  	db $C0		;[Wait] 1
    1530.  0E:0859  A5 10               	db $A5, $10; slide-down
    1531.  0E:085B                      				;[Skip delay] 1
    1532.  0E:085B  13                  	db $13		;[Note] 20
    1533.  0E:085C                      				;[Skip delay] 1
    1534.  0E:085C  13                  	db $13		;[Note] 20
    1535.  0E:085D                      				;[Skip delay] 1
    1536.  0E:085D  07                  	db $07		;[Note] 8
    1537.  0E:085E  C1                  	db $C1		;[Wait] 2
    1538.  0E:085F  13                  	db $13		;[Note] 20
    1539.  0E:0860  C0                  	db $C0		;[Wait] 1
    1540.  0E:0861  13                  	db $13		;[Note] 20
    1541.  0E:0862                      				;[Skip delay] 1
    1542.  0E:0862  07                  	db $07		;[Note] 8
    1543.  0E:0863  C1                  	db $C1		;[Wait] 2
    1544.  0E:0864  13                  	db $13		;[Note] 20
    1545.  0E:0865  C0                  	db $C0		;[Wait] 1
    1546.  0E:0866  13                  	db $13		;[Note] 20
    1547.  0E:0867                      				;[Skip delay] 1
    1548.  0E:0867  07                  	db $07		;[Note] 8
    1549.  0E:0868  C1                  	db $C1		;[Wait] 2
    1550.  0E:0869  13                  	db $13		;[Note] 20
    1551.  0E:086A  C0                  	db $C0		;[Wait] 1
    1552.  0E:086B  13                  	db $13		;[Note] 20
    1553.  0E:086C                      				;[Skip delay] 1
    1554.  0E:086C  07                  	db $07		;[Note] 8
    1555.  0E:086D  C1                  	db $C1		;[Wait] 2
    1556.  0E:086E  13                  	db $13		;[Note] 20
    1557.  0E:086F  C0                  	db $C0		;[Wait] 1
    1558.  0E:0870  13                  	db $13		;[Note] 20
    1559.  0E:0871                      				;[Skip delay] 1
    1560.  0E:0871  07                  	db $07		;[Note] 8
    1561.  0E:0872  C1                  	db $C1		;[Wait] 2
    1562.  0E:0873  13                  	db $13		;[Note] 20
    1563.  0E:0874  C0                  	db $C0		;[Wait] 1
    1564.  0E:0875  13                  	db $13		;[Note] 20
    1565.  0E:0876                      				;[Skip delay] 1
    1566.  0E:0876  13                  	db $13		;[Note] 20
    1567.  0E:0877                      				;[Skip delay] 1
    1568.  0E:0877  13                  	db $13		;[Note] 20
    1569.  0E:0878                      				;[Skip delay] 1
    1570.  0E:0878  15                  	db $15		;[Note] 22
    1571.  0E:0879                      				;[Skip delay] 1
    1572.  0E:0879  15                  	db $15		;[Note] 22
    1573.  0E:087A                      				;[Skip delay] 1
    1574.  0E:087A  16                  	db $16		;[Note] 23
    1575.  0E:087B                      				;[Skip delay] 1
    1576.  0E:087B  16                  	db $16		;[Note] 23
    1577.  0E:087C                      				;[Skip delay] 1
    1578.  0E:087C  13                  	db $13		;[Note] 20
    1579.  0E:087D                      				;[Skip delay] 1
    1580.  0E:087D  13                  	db $13		;[Note] 20
    1581.  0E:087E                      				;[Skip delay] 1
    1582.  0E:087E  06                  	db $06		;[Note] 7
    1583.  0E:087F  C1                  	db $C1		;[Wait] 2
    1584.  0E:0880  12                  	db $12		;[Note] 19
    1585.  0E:0881  C0                  	db $C0		;[Wait] 1
    1586.  0E:0882  12                  	db $12		;[Note] 19
    1587.  0E:0883                      				;[Skip delay] 1
    1588.  0E:0883  06                  	db $06		;[Note] 7
    1589.  0E:0884  C1                  	db $C1		;[Wait] 2
    1590.  0E:0885  12                  	db $12		;[Note] 19
    1591.  0E:0886  C0                  	db $C0		;[Wait] 1
    1592.  0E:0887  12                  	db $12		;[Note] 19
    1593.  0E:0888                      				;[Skip delay] 1
    1594.  0E:0888  06                  	db $06		;[Note] 7
    1595.  0E:0889  C1                  	db $C1		;[Wait] 2
    1596.  0E:088A  12                  	db $12		;[Note] 19
    1597.  0E:088B  C0                  	db $C0		;[Wait] 1
    1598.  0E:088C  12                  	db $12		;[Note] 19
    1599.  0E:088D                      				;[Skip delay] 1
    1600.  0E:088D  06                  	db $06		;[Note] 7
    1601.  0E:088E  C1                  	db $C1		;[Wait] 2
    1602.  0E:088F  12                  	db $12		;[Note] 19
    1603.  0E:0890  C0                  	db $C0		;[Wait] 1
    1604.  0E:0891  12                  	db $12		;[Note] 19
    1605.  0E:0892                      				;[Skip delay] 1
    1606.  0E:0892  06                  	db $06		;[Note] 7
    1607.  0E:0893  C1                  	db $C1		;[Wait] 2
    1608.  0E:0894  12                  	db $12		;[Note] 19
    1609.  0E:0895  C0                  	db $C0		;[Wait] 1
    1610.  0E:0896  12                  	db $12		;[Note] 19
    1611.  0E:0897                      				;[Skip delay] 1
    1612.  0E:0897  06                  	db $06		;[Note] 7
    1613.  0E:0898  C1                  	db $C1		;[Wait] 2
    1614.  0E:0899  12                  	db $12		;[Note] 19
    1615.  0E:089A  C0                  	db $C0		;[Wait] 1
    1616.  0E:089B  12                  	db $12		;[Note] 19
    1617.  0E:089C                      				;[Skip delay] 1
    1618.  0E:089C  1E                  	db $1E		;[Note] 31
    1619.  0E:089D                      				;[Skip delay] 1
    1620.  0E:089D  1E                  	db $1E		;[Note] 31
    1621.  0E:089E                      				;[Skip delay] 1
    1622.  0E:089E  1A                  	db $1A		;[Note] 27
    1623.  0E:089F                      				;[Skip delay] 1
    1624.  0E:089F  1A                  	db $1A		;[Note] 27
    1625.  0E:08A0                      				;[Skip delay] 1
    1626.  0E:08A0  15                  	db $15		;[Note] 22
    1627.  0E:08A1                      				;[Skip delay] 1
    1628.  0E:08A1  15                  	db $15		;[Note] 22
    1629.  0E:08A2                      				;[Skip delay] 1
    1630.  0E:08A2  12                  	db $12		;[Note] 19
    1631.  0E:08A3                      				;[Skip delay] 1
    1632.  0E:08A3  12                  	db $12		;[Note] 19
    1633.  0E:08A4                      				;[Skip delay] 1
    1634.  0E:08A4  BF                  	db $BF		;[End-Of-Track]
    1635.  0E:08A5                      .track_19:
    1636.  0E:08A5  2A                  	db $2A		;[Note] 43
    1637.  0E:08A6  6D                  	db $6D		;[Volume] 13
    1638.  0E:08A7  82                  	db $82		;[Instrument] 19
    1639.  0E:08A8  C0                  	db $C0		;[Wait] 1
    1640.  0E:08A9  2B                  	db $2B		;[Note] 44
    1641.  0E:08AA  A6 03               	db $A6, $03; tone-slide
    1642.  0E:08AC                      				;[Skip delay] 1
    1643.  0E:08AC  B0 02               	db $B0, $02; tone-slide rep
    1644.  0E:08AE  C1                  	db $C1		;[Wait] 2
    1645.  0E:08AF  2D                  	db $2D		;[Note] 46
    1646.  0E:08B0                      				;[Skip delay] 2
    1647.  0E:08B0  2E                  	db $2E		;[Note] 47
    1648.  0E:08B1  6C                  	db $6C		;[Volume] 12
    1649.  0E:08B2  C3                  	db $C3		;[Wait] 4
    1650.  0E:08B3  2B                  	db $2B		;[Note] 44
    1651.  0E:08B4  6B                  	db $6B		;[Volume] 11
    1652.  0E:08B5                      				;[Skip delay] 4
    1653.  0E:08B5  32                  	db $32		;[Note] 51
    1654.  0E:08B6  6A                  	db $6A		;[Volume] 10
    1655.  0E:08B7  94 01               	db $94, $01	; vibrato control
    1656.  0E:08B9                      				;[Skip delay] 4
    1657.  0E:08B9  A7 65               	db $A7, $65	;[CMD vibrato]
    1658.  0E:08BB  C0                  	db $C0		;[Wait] 1
    1659.  0E:08BC  B1 06               	db $B1, $06	;[CMD vibrato] rep
    1660.  0E:08BE  C5                  	db $C5		;[Wait] 6
    1661.  0E:08BF  A5 06               	db $A5, $06; slide-down
    1662.  0E:08C1  C0                  	db $C0		;[Wait] 1
    1663.  0E:08C2  AF 02               	db $AF, $02; slide-down rep
    1664.  0E:08C4  C1                  	db $C1		;[Wait] 2
    1665.  0E:08C5  32                  	db $32		;[Note] 51
    1666.  0E:08C6  6E                  	db $6E		;[Volume] 14
    1667.  0E:08C7  AB 04               	db $AB, $04; macro offset
    1668.  0E:08C9  C0                  	db $C0		;[Wait] 1
    1669.  0E:08CA  30                  	db $30		;[Note] 49
    1670.  0E:08CB                      				;[Skip delay] 1
    1671.  0E:08CB  2E                  	db $2E		;[Note] 47
    1672.  0E:08CC                      				;[Skip delay] 1
    1673.  0E:08CC  2D                  	db $2D		;[Note] 46
    1674.  0E:08CD                      				;[Skip delay] 1
    1675.  0E:08CD  2B                  	db $2B		;[Note] 44
    1676.  0E:08CE  6D                  	db $6D		;[Volume] 13
    1677.  0E:08CF  C3                  	db $C3		;[Wait] 4
    1678.  0E:08D0  2D                  	db $2D		;[Note] 46
    1679.  0E:08D1  C1                  	db $C1		;[Wait] 2
    1680.  0E:08D2  2E                  	db $2E		;[Note] 47
    1681.  0E:08D3  C3                  	db $C3		;[Wait] 4
    1682.  0E:08D4  2B                  	db $2B		;[Note] 44
    1683.  0E:08D5                      				;[Skip delay] 4
    1684.  0E:08D5  32                  	db $32		;[Note] 51
    1685.  0E:08D6  94 01               	db $94, $01	; vibrato control
    1686.  0E:08D8                      				;[Skip delay] 4
    1687.  0E:08D8  A7 65               	db $A7, $65	;[CMD vibrato]
    1688.  0E:08DA  C0                  	db $C0		;[Wait] 1
    1689.  0E:08DB  B1 06               	db $B1, $06	;[CMD vibrato] rep
    1690.  0E:08DD  C5                  	db $C5		;[Wait] 6
    1691.  0E:08DE  A7 64               	db $A7, $64	;[CMD vibrato]
    1692.  0E:08E0  C0                  	db $C0		;[Wait] 1
    1693.  0E:08E1  B1 01               	db $B1, $01	;[CMD vibrato] rep
    1694.  0E:08E3                      				;[Skip delay] 1
    1695.  0E:08E3  60                  	db $60		;[Note] 97
    1696.  0E:08E4                      				;[Skip delay] 1
    1697.  0E:08E4  32                  	db $32		;[Note] 51
    1698.  0E:08E5  6E                  	db $6E		;[Volume] 14
    1699.  0E:08E6  AB 04               	db $AB, $04; macro offset
    1700.  0E:08E8                      				;[Skip delay] 1
    1701.  0E:08E8  30                  	db $30		;[Note] 49
    1702.  0E:08E9                      				;[Skip delay] 1
    1703.  0E:08E9  2E                  	db $2E		;[Note] 47
    1704.  0E:08EA                      				;[Skip delay] 1
    1705.  0E:08EA  2D                  	db $2D		;[Note] 46
    1706.  0E:08EB                      				;[Skip delay] 1
    1707.  0E:08EB  BF                  	db $BF		;[End-Of-Track]
    1708.  0E:08EC                      .track_20:
    1709.  0E:08EC  37                  	db $37		;[Note] 56
    1710.  0E:08ED  65                  	db $65		;[Volume] 5
    1711.  0E:08EE  7C                  	db $7C		;[Instrument] 13
    1712.  0E:08EF  C0                  	db $C0		;[Wait] 1
    1713.  0E:08F0  37                  	db $37		;[Note] 56
    1714.  0E:08F1                      				;[Skip delay] 1
    1715.  0E:08F1  32                  	db $32		;[Note] 51
    1716.  0E:08F2                      				;[Skip delay] 1
    1717.  0E:08F2  32                  	db $32		;[Note] 51
    1718.  0E:08F3                      				;[Skip delay] 1
    1719.  0E:08F3  37                  	db $37		;[Note] 56
    1720.  0E:08F4                      				;[Skip delay] 1
    1721.  0E:08F4  37                  	db $37		;[Note] 56
    1722.  0E:08F5                      				;[Skip delay] 1
    1723.  0E:08F5  32                  	db $32		;[Note] 51
    1724.  0E:08F6                      				;[Skip delay] 1
    1725.  0E:08F6  32                  	db $32		;[Note] 51
    1726.  0E:08F7                      				;[Skip delay] 1
    1727.  0E:08F7  37                  	db $37		;[Note] 56
    1728.  0E:08F8                      				;[Skip delay] 1
    1729.  0E:08F8  37                  	db $37		;[Note] 56
    1730.  0E:08F9                      				;[Skip delay] 1
    1731.  0E:08F9  32                  	db $32		;[Note] 51
    1732.  0E:08FA                      				;[Skip delay] 1
    1733.  0E:08FA  32                  	db $32		;[Note] 51
    1734.  0E:08FB                      				;[Skip delay] 1
    1735.  0E:08FB  37                  	db $37		;[Note] 56
    1736.  0E:08FC                      				;[Skip delay] 1
    1737.  0E:08FC  37                  	db $37		;[Note] 56
    1738.  0E:08FD                      				;[Skip delay] 1
    1739.  0E:08FD  32                  	db $32		;[Note] 51
    1740.  0E:08FE                      				;[Skip delay] 1
    1741.  0E:08FE  32                  	db $32		;[Note] 51
    1742.  0E:08FF                      				;[Skip delay] 1
    1743.  0E:08FF  37                  	db $37		;[Note] 56
    1744.  0E:0900                      				;[Skip delay] 1
    1745.  0E:0900  37                  	db $37		;[Note] 56
    1746.  0E:0901                      				;[Skip delay] 1
    1747.  0E:0901  32                  	db $32		;[Note] 51
    1748.  0E:0902                      				;[Skip delay] 1
    1749.  0E:0902  32                  	db $32		;[Note] 51
    1750.  0E:0903                      				;[Skip delay] 1
    1751.  0E:0903  39                  	db $39		;[Note] 58
    1752.  0E:0904                      				;[Skip delay] 1
    1753.  0E:0904  39                  	db $39		;[Note] 58
    1754.  0E:0905                      				;[Skip delay] 1
    1755.  0E:0905  32                  	db $32		;[Note] 51
    1756.  0E:0906                      				;[Skip delay] 1
    1757.  0E:0906  32                  	db $32		;[Note] 51
    1758.  0E:0907                      				;[Skip delay] 1
    1759.  0E:0907  3A                  	db $3A		;[Note] 59
    1760.  0E:0908                      				;[Skip delay] 1
    1761.  0E:0908  3A                  	db $3A		;[Note] 59
    1762.  0E:0909                      				;[Skip delay] 1
    1763.  0E:0909  32                  	db $32		;[Note] 51
    1764.  0E:090A                      				;[Skip delay] 1
    1765.  0E:090A  32                  	db $32		;[Note] 51
    1766.  0E:090B                      				;[Skip delay] 1
    1767.  0E:090B  39                  	db $39		;[Note] 58
    1768.  0E:090C                      				;[Skip delay] 1
    1769.  0E:090C  39                  	db $39		;[Note] 58
    1770.  0E:090D                      				;[Skip delay] 1
    1771.  0E:090D  32                  	db $32		;[Note] 51
    1772.  0E:090E                      				;[Skip delay] 1
    1773.  0E:090E  32                  	db $32		;[Note] 51
    1774.  0E:090F                      				;[Skip delay] 1
    1775.  0E:090F  39                  	db $39		;[Note] 58
    1776.  0E:0910                      				;[Skip delay] 1
    1777.  0E:0910  39                  	db $39		;[Note] 58
    1778.  0E:0911                      				;[Skip delay] 1
    1779.  0E:0911  32                  	db $32		;[Note] 51
    1780.  0E:0912                      				;[Skip delay] 1
    1781.  0E:0912  32                  	db $32		;[Note] 51
    1782.  0E:0913                      				;[Skip delay] 1
    1783.  0E:0913  39                  	db $39		;[Note] 58
    1784.  0E:0914                      				;[Skip delay] 1
    1785.  0E:0914  39                  	db $39		;[Note] 58
    1786.  0E:0915                      				;[Skip delay] 1
    1787.  0E:0915  32                  	db $32		;[Note] 51
    1788.  0E:0916                      				;[Skip delay] 1
    1789.  0E:0916  32                  	db $32		;[Note] 51
    1790.  0E:0917                      				;[Skip delay] 1
    1791.  0E:0917  39                  	db $39		;[Note] 58
    1792.  0E:0918                      				;[Skip delay] 1
    1793.  0E:0918  39                  	db $39		;[Note] 58
    1794.  0E:0919                      				;[Skip delay] 1
    1795.  0E:0919  32                  	db $32		;[Note] 51
    1796.  0E:091A                      				;[Skip delay] 1
    1797.  0E:091A  32                  	db $32		;[Note] 51
    1798.  0E:091B                      				;[Skip delay] 1
    1799.  0E:091B  39                  	db $39		;[Note] 58
    1800.  0E:091C                      				;[Skip delay] 1
    1801.  0E:091C  39                  	db $39		;[Note] 58
    1802.  0E:091D                      				;[Skip delay] 1
    1803.  0E:091D  32                  	db $32		;[Note] 51
    1804.  0E:091E                      				;[Skip delay] 1
    1805.  0E:091E  32                  	db $32		;[Note] 51
    1806.  0E:091F                      				;[Skip delay] 1
    1807.  0E:091F  3A                  	db $3A		;[Note] 59
    1808.  0E:0920                      				;[Skip delay] 1
    1809.  0E:0920  3A                  	db $3A		;[Note] 59
    1810.  0E:0921                      				;[Skip delay] 1
    1811.  0E:0921  32                  	db $32		;[Note] 51
    1812.  0E:0922                      				;[Skip delay] 1
    1813.  0E:0922  32                  	db $32		;[Note] 51
    1814.  0E:0923                      				;[Skip delay] 1
    1815.  0E:0923  3C                  	db $3C		;[Note] 61
    1816.  0E:0924                      				;[Skip delay] 1
    1817.  0E:0924  3C                  	db $3C		;[Note] 61
    1818.  0E:0925                      				;[Skip delay] 1
    1819.  0E:0925  32                  	db $32		;[Note] 51
    1820.  0E:0926                      				;[Skip delay] 1
    1821.  0E:0926  32                  	db $32		;[Note] 51
    1822.  0E:0927                      				;[Skip delay] 1
    1823.  0E:0927  3A                  	db $3A		;[Note] 59
    1824.  0E:0928                      				;[Skip delay] 1
    1825.  0E:0928  3A                  	db $3A		;[Note] 59
    1826.  0E:0929                      				;[Skip delay] 1
    1827.  0E:0929  32                  	db $32		;[Note] 51
    1828.  0E:092A                      				;[Skip delay] 1
    1829.  0E:092A  32                  	db $32		;[Note] 51
    1830.  0E:092B                      				;[Skip delay] 1
    1831.  0E:092B  39                  	db $39		;[Note] 58
    1832.  0E:092C                      				;[Skip delay] 1
    1833.  0E:092C  39                  	db $39		;[Note] 58
    1834.  0E:092D                      				;[Skip delay] 1
    1835.  0E:092D  32                  	db $32		;[Note] 51
    1836.  0E:092E                      				;[Skip delay] 1
    1837.  0E:092E  32                  	db $32		;[Note] 51
    1838.  0E:092F                      				;[Skip delay] 1
    1839.  0E:092F  BF                  	db $BF		;[End-Of-Track]
    1840.  0E:0930                      .track_21:
    1841.  0E:0930  2E                  	db $2E		;[Note] 47
    1842.  0E:0931  67                  	db $67		;[Volume] 7
    1843.  0E:0932  7F                  	db $7F		;[Instrument] 16
    1844.  0E:0933  C7                  	db $C7		;[Wait] 8
    1845.  0E:0934  2D                  	db $2D		;[Note] 46
    1846.  0E:0935                      				;[Skip delay] 8
    1847.  0E:0935  2B                  	db $2B		;[Note] 44
    1848.  0E:0936                      				;[Skip delay] 8
    1849.  0E:0936  26                  	db $26		;[Note] 39
    1850.  0E:0937                      				;[Skip delay] 8
    1851.  0E:0937  2A                  	db $2A		;[Note] 43
    1852.  0E:0938                      				;[Skip delay] 8
    1853.  0E:0938  27                  	db $27		;[Note] 40
    1854.  0E:0939                      				;[Skip delay] 8
    1855.  0E:0939  24                  	db $24		;[Note] 37
    1856.  0E:093A                      				;[Skip delay] 8
    1857.  0E:093A  21                  	db $21		;[Note] 34
    1858.  0E:093B                      				;[Skip delay] 8
    1859.  0E:093B  BF                  	db $BF		;[End-Of-Track]
    1860.  0E:093C                      .track_22:
    1861.  0E:093C  C1                  	db $C1		;[Wait] 2
    1862.  0E:093D  2B                  	db $2B		;[Note] 44
    1863.  0E:093E  69                  	db $69		;[Volume] 9
    1864.  0E:093F  77                  	db $77		;[Instrument] 8
    1865.  0E:0940  C3                  	db $C3		;[Wait] 4
    1866.  0E:0941  2D                  	db $2D		;[Note] 46
    1867.  0E:0942  C1                  	db $C1		;[Wait] 2
    1868.  0E:0943  2E                  	db $2E		;[Note] 47
    1869.  0E:0944  C3                  	db $C3		;[Wait] 4
    1870.  0E:0945  2B                  	db $2B		;[Note] 44
    1871.  0E:0946                      				;[Skip delay] 4
    1872.  0E:0946  32                  	db $32		;[Note] 51
    1873.  0E:0947  94 01               	db $94, $01	; vibrato control
    1874.  0E:0949                      				;[Skip delay] 4
    1875.  0E:0949  A7 65               	db $A7, $65	;[CMD vibrato]
    1876.  0E:094B  C0                  	db $C0		;[Wait] 1
    1877.  0E:094C  B1 06               	db $B1, $06	;[CMD vibrato] rep
    1878.  0E:094E  C5                  	db $C5		;[Wait] 6
    1879.  0E:094F  A5 06               	db $A5, $06; slide-down
    1880.  0E:0951  C0                  	db $C0		;[Wait] 1
    1881.  0E:0952  AF 02               	db $AF, $02; slide-down rep
    1882.  0E:0954  C1                  	db $C1		;[Wait] 2
    1883.  0E:0955  32                  	db $32		;[Note] 51
    1884.  0E:0956  AB 04               	db $AB, $04; macro offset
    1885.  0E:0958  C0                  	db $C0		;[Wait] 1
    1886.  0E:0959  33                  	db $33		;[Note] 52
    1887.  0E:095A                      				;[Skip delay] 1
    1888.  0E:095A  35                  	db $35		;[Note] 54
    1889.  0E:095B                      				;[Skip delay] 1
    1890.  0E:095B  37                  	db $37		;[Note] 56
    1891.  0E:095C                      				;[Skip delay] 1
    1892.  0E:095C  33                  	db $33		;[Note] 52
    1893.  0E:095D  C2                  	db $C2		;[Wait] 3
    1894.  0E:095E  A7 66               	db $A7, $66	;[CMD vibrato]
    1895.  0E:0960  C0                  	db $C0		;[Wait] 1
    1896.  0E:0961  B1 02               	db $B1, $02	;[CMD vibrato] rep
    1897.  0E:0963  C1                  	db $C1		;[Wait] 2
    1898.  0E:0964  30                  	db $30		;[Note] 49
    1899.  0E:0965                      				;[Skip delay] 2
    1900.  0E:0965  30                  	db $30		;[Note] 49
    1901.  0E:0966  C1                  	db $C1		;[Wait..] 2
    1902.  0E:0967  A7 65               	db $A7, $65	;[CMD vibrato]
    1903.  0E:0969  C0                  	db $C0		;[Wait] 1
    1904.  0E:096A  B1 0B               	db $B1, $0B	;[CMD vibrato] rep
    1905.  0E:096C  CA                  	db $CA		;[Wait] 11
    1906.  0E:096D  A5 03               	db $A5, $03; slide-down
    1907.  0E:096F  C0                  	db $C0		;[Wait] 1
    1908.  0E:0970  AF 03               	db $AF, $03; slide-down rep
    1909.  0E:0972  C2                  	db $C2		;[Wait] 3
    1910.  0E:0973  33                  	db $33		;[Note] 52
    1911.  0E:0974  C1                  	db $C1		;[Wait] 2
    1912.  0E:0975  35                  	db $35		;[Note] 54
    1913.  0E:0976                      				;[Skip delay] 2
    1914.  0E:0976  BF                  	db $BF		;[End-Of-Track]
    1915.  0E:0977                      .track_23:
    1916.  0E:0977  05                  	db $05		;[Note] 6
    1917.  0E:0978  6F                  	db $6F		;[Volume] 15
    1918.  0E:0979  79                  	db $79		;[Instrument] 10
    1919.  0E:097A  C1                  	db $C1		;[Wait] 2
    1920.  0E:097B  11                  	db $11		;[Note] 18
    1921.  0E:097C  C0                  	db $C0		;[Wait] 1
    1922.  0E:097D  11                  	db $11		;[Note] 18
    1923.  0E:097E                      				;[Skip delay] 1
    1924.  0E:097E  05                  	db $05		;[Note] 6
    1925.  0E:097F  C1                  	db $C1		;[Wait] 2
    1926.  0E:0980  11                  	db $11		;[Note] 18
    1927.  0E:0981  C0                  	db $C0		;[Wait] 1
    1928.  0E:0982  11                  	db $11		;[Note] 18
    1929.  0E:0983                      				;[Skip delay] 1
    1930.  0E:0983  05                  	db $05		;[Note] 6
    1931.  0E:0984  C0                  	db $C0		;[Wait..] 1
    1932.  0E:0985  A5 07               	db $A5, $07; slide-down
    1933.  0E:0987                      				;[Skip delay] 1
    1934.  0E:0987  11                  	db $11		;[Note] 18
    1935.  0E:0988                      				;[Skip delay] 1
    1936.  0E:0988  11                  	db $11		;[Note] 18
    1937.  0E:0989                      				;[Skip delay] 1
    1938.  0E:0989  05                  	db $05		;[Note] 6
    1939.  0E:098A  C1                  	db $C1		;[Wait] 2
    1940.  0E:098B  11                  	db $11		;[Note] 18
    1941.  0E:098C  C0                  	db $C0		;[Wait] 1
    1942.  0E:098D  11                  	db $11		;[Note] 18
    1943.  0E:098E                      				;[Skip delay] 1
    1944.  0E:098E  05                  	db $05		;[Note] 6
    1945.  0E:098F  C1                  	db $C1		;[Wait] 2
    1946.  0E:0990  11                  	db $11		;[Note] 18
    1947.  0E:0991  C0                  	db $C0		;[Wait] 1
    1948.  0E:0992  11                  	db $11		;[Note] 18
    1949.  0E:0993                      				;[Skip delay] 1
    1950.  0E:0993  05                  	db $05		;[Note] 6
    1951.  0E:0994                      				;[Skip delay] 1
    1952.  0E:0994  05                  	db $05		;[Note] 6
    1953.  0E:0995                      				;[Skip delay] 1
    1954.  0E:0995  11                  	db $11		;[Note] 18
    1955.  0E:0996                      				;[Skip delay] 1
    1956.  0E:0996  11                  	db $11		;[Note] 18
    1957.  0E:0997                      				;[Skip delay] 1
    1958.  0E:0997  05                  	db $05		;[Note] 6
    1959.  0E:0998  C1                  	db $C1		;[Wait] 2
    1960.  0E:0999  11                  	db $11		;[Note] 18
    1961.  0E:099A  C0                  	db $C0		;[Wait] 1
    1962.  0E:099B  11                  	db $11		;[Note] 18
    1963.  0E:099C                      				;[Skip delay] 1
    1964.  0E:099C  05                  	db $05		;[Note] 6
    1965.  0E:099D  C1                  	db $C1		;[Wait] 2
    1966.  0E:099E  11                  	db $11		;[Note] 18
    1967.  0E:099F  C0                  	db $C0		;[Wait] 1
    1968.  0E:09A0  11                  	db $11		;[Note] 18
    1969.  0E:09A1                      				;[Skip delay] 1
    1970.  0E:09A1  00                  	db $00		;[Note] 1
    1971.  0E:09A2  C1                  	db $C1		;[Wait] 2
    1972.  0E:09A3  0A                  	db $0A		;[Note] 11
    1973.  0E:09A4  C0                  	db $C0		;[Wait] 1
    1974.  0E:09A5  0C                  	db $0C		;[Note] 13
    1975.  0E:09A6                      				;[Skip delay] 1
    1976.  0E:09A6  00                  	db $00		;[Note] 1
    1977.  0E:09A7  C0                  	db $C0		;[Wait..] 1
    1978.  0E:09A8  A5 03               	db $A5, $03; slide-down
    1979.  0E:09AA                      				;[Skip delay] 1
    1980.  0E:09AA  0C                  	db $0C		;[Note] 13
    1981.  0E:09AB  C1                  	db $C1		;[Wait] 2
    1982.  0E:09AC  00                  	db $00		;[Note] 1
    1983.  0E:09AD                      				;[Skip delay] 2
    1984.  0E:09AD  0C                  	db $0C		;[Note] 13
    1985.  0E:09AE  C0                  	db $C0		;[Wait] 1
    1986.  0E:09AF  0C                  	db $0C		;[Note] 13
    1987.  0E:09B0                      				;[Skip delay] 1
    1988.  0E:09B0  00                  	db $00		;[Note] 1
    1989.  0E:09B1  C1                  	db $C1		;[Wait] 2
    1990.  0E:09B2  0C                  	db $0C		;[Note] 13
    1991.  0E:09B3  C0                  	db $C0		;[Wait] 1
    1992.  0E:09B4  0C                  	db $0C		;[Note] 13
    1993.  0E:09B5                      				;[Skip delay] 1
    1994.  0E:09B5  00                  	db $00		;[Note] 1
    1995.  0E:09B6  C0                  	db $C0		;[Wait..] 1
    1996.  0E:09B7  A5 03               	db $A5, $03; slide-down
    1997.  0E:09B9                      				;[Skip delay] 1
    1998.  0E:09B9  0C                  	db $0C		;[Note] 13
    1999.  0E:09BA                      				;[Skip delay] 1
    2000.  0E:09BA  0C                  	db $0C		;[Note] 13
    2001.  0E:09BB                      				;[Skip delay] 1
    2002.  0E:09BB  00                  	db $00		;[Note] 1
    2003.  0E:09BC  C1                  	db $C1		;[Wait] 2
    2004.  0E:09BD  0A                  	db $0A		;[Note] 11
    2005.  0E:09BE  C0                  	db $C0		;[Wait] 1
    2006.  0E:09BF  0C                  	db $0C		;[Note] 13
    2007.  0E:09C0                      				;[Skip delay] 1
    2008.  0E:09C0  00                  	db $00		;[Note] 1
    2009.  0E:09C1  C1                  	db $C1		;[Wait] 2
    2010.  0E:09C2  0C                  	db $0C		;[Note] 13
    2011.  0E:09C3  C0                  	db $C0		;[Wait] 1
    2012.  0E:09C4  0C                  	db $0C		;[Note] 13
    2013.  0E:09C5                      				;[Skip delay] 1
    2014.  0E:09C5  00                  	db $00		;[Note] 1
    2015.  0E:09C6  C1                  	db $C1		;[Wait] 2
    2016.  0E:09C7  0C                  	db $0C		;[Note] 13
    2017.  0E:09C8  C0                  	db $C0		;[Wait] 1
    2018.  0E:09C9  0C                  	db $0C		;[Note] 13
    2019.  0E:09CA                      				;[Skip delay] 1
    2020.  0E:09CA  BF                  	db $BF		;[End-Of-Track]
    2021.  0E:09CB                      .track_24:
    2022.  0E:09CB  2B                  	db $2B		;[Note] 44
    2023.  0E:09CC  6E                  	db $6E		;[Volume] 14
    2024.  0E:09CD  82                  	db $82		;[Instrument] 19
    2025.  0E:09CE  C3                  	db $C3		;[Wait] 4
    2026.  0E:09CF  2D                  	db $2D		;[Note] 46
    2027.  0E:09D0  6D                  	db $6D		;[Volume] 13
    2028.  0E:09D1  C1                  	db $C1		;[Wait] 2
    2029.  0E:09D2  2E                  	db $2E		;[Note] 47
    2030.  0E:09D3  6B                  	db $6B		;[Volume] 11
    2031.  0E:09D4  C3                  	db $C3		;[Wait] 4
    2032.  0E:09D5  2B                  	db $2B		;[Note] 44
    2033.  0E:09D6  6C                  	db $6C		;[Volume] 12
    2034.  0E:09D7                      				;[Skip delay] 4
    2035.  0E:09D7  32                  	db $32		;[Note] 51
    2036.  0E:09D8  94 01               	db $94, $01	; vibrato control
    2037.  0E:09DA                      				;[Skip delay] 4
    2038.  0E:09DA  A7 65               	db $A7, $65	;[CMD vibrato]
    2039.  0E:09DC  C0                  	db $C0		;[Wait] 1
    2040.  0E:09DD  B1 06               	db $B1, $06	;[CMD vibrato] rep
    2041.  0E:09DF  C5                  	db $C5		;[Wait] 6
    2042.  0E:09E0  A5 06               	db $A5, $06; slide-down
    2043.  0E:09E2  C0                  	db $C0		;[Wait] 1
    2044.  0E:09E3  AF 02               	db $AF, $02; slide-down rep
    2045.  0E:09E5  C1                  	db $C1		;[Wait] 2
    2046.  0E:09E6  32                  	db $32		;[Note] 51
    2047.  0E:09E7  AB 04               	db $AB, $04; macro offset
    2048.  0E:09E9  C0                  	db $C0		;[Wait] 1
    2049.  0E:09EA  33                  	db $33		;[Note] 52
    2050.  0E:09EB                      				;[Skip delay] 1
    2051.  0E:09EB  35                  	db $35		;[Note] 54
    2052.  0E:09EC                      				;[Skip delay] 1
    2053.  0E:09EC  37                  	db $37		;[Note] 56
    2054.  0E:09ED                      				;[Skip delay] 1
    2055.  0E:09ED  33                  	db $33		;[Note] 52
    2056.  0E:09EE  C2                  	db $C2		;[Wait] 3
    2057.  0E:09EF  A7 66               	db $A7, $66	;[CMD vibrato]
    2058.  0E:09F1  C0                  	db $C0		;[Wait] 1
    2059.  0E:09F2  B1 02               	db $B1, $02	;[CMD vibrato] rep
    2060.  0E:09F4  C1                  	db $C1		;[Wait] 2
    2061.  0E:09F5  30                  	db $30		;[Note] 49
    2062.  0E:09F6                      				;[Skip delay] 2
    2063.  0E:09F6  30                  	db $30		;[Note] 49
    2064.  0E:09F7  C1                  	db $C1		;[Wait..] 2
    2065.  0E:09F8  A7 65               	db $A7, $65	;[CMD vibrato]
    2066.  0E:09FA  C0                  	db $C0		;[Wait] 1
    2067.  0E:09FB  B1 0B               	db $B1, $0B	;[CMD vibrato] rep
    2068.  0E:09FD  CA                  	db $CA		;[Wait] 11
    2069.  0E:09FE  A5 03               	db $A5, $03; slide-down
    2070.  0E:0A00  C0                  	db $C0		;[Wait] 1
    2071.  0E:0A01  AF 03               	db $AF, $03; slide-down rep
    2072.  0E:0A03  C2                  	db $C2		;[Wait] 3
    2073.  0E:0A04  33                  	db $33		;[Note] 52
    2074.  0E:0A05  C1                  	db $C1		;[Wait] 2
    2075.  0E:0A06  35                  	db $35		;[Note] 54
    2076.  0E:0A07                      				;[Skip delay] 2
    2077.  0E:0A07  37                  	db $37		;[Note] 56
    2078.  0E:0A08                      				;[Skip delay] 2
    2079.  0E:0A08  BF                  	db $BF		;[End-Of-Track]
    2080.  0E:0A09                      .track_25:
    2081.  0E:0A09  3C                  	db $3C		;[Note] 61
    2082.  0E:0A0A  65                  	db $65		;[Volume] 5
    2083.  0E:0A0B  7C                  	db $7C		;[Instrument] 13
    2084.  0E:0A0C  C0                  	db $C0		;[Wait] 1
    2085.  0E:0A0D  3C                  	db $3C		;[Note] 61
    2086.  0E:0A0E                      				;[Skip delay] 1
    2087.  0E:0A0E  37                  	db $37		;[Note] 56
    2088.  0E:0A0F                      				;[Skip delay] 1
    2089.  0E:0A0F  37                  	db $37		;[Note] 56
    2090.  0E:0A10                      				;[Skip delay] 1
    2091.  0E:0A10  3C                  	db $3C		;[Note] 61
    2092.  0E:0A11                      				;[Skip delay] 1
    2093.  0E:0A11  3C                  	db $3C		;[Note] 61
    2094.  0E:0A12                      				;[Skip delay] 1
    2095.  0E:0A12  37                  	db $37		;[Note] 56
    2096.  0E:0A13                      				;[Skip delay] 1
    2097.  0E:0A13  37                  	db $37		;[Note] 56
    2098.  0E:0A14                      				;[Skip delay] 1
    2099.  0E:0A14  3C                  	db $3C		;[Note] 61
    2100.  0E:0A15                      				;[Skip delay] 1
    2101.  0E:0A15  3C                  	db $3C		;[Note] 61
    2102.  0E:0A16                      				;[Skip delay] 1
    2103.  0E:0A16  37                  	db $37		;[Note] 56
    2104.  0E:0A17                      				;[Skip delay] 1
    2105.  0E:0A17  37                  	db $37		;[Note] 56
    2106.  0E:0A18                      				;[Skip delay] 1
    2107.  0E:0A18  3C                  	db $3C		;[Note] 61
    2108.  0E:0A19                      				;[Skip delay] 1
    2109.  0E:0A19  3C                  	db $3C		;[Note] 61
    2110.  0E:0A1A                      				;[Skip delay] 1
    2111.  0E:0A1A  37                  	db $37		;[Note] 56
    2112.  0E:0A1B                      				;[Skip delay] 1
    2113.  0E:0A1B  37                  	db $37		;[Note] 56
    2114.  0E:0A1C                      				;[Skip delay] 1
    2115.  0E:0A1C  3C                  	db $3C		;[Note] 61
    2116.  0E:0A1D                      				;[Skip delay] 1
    2117.  0E:0A1D  3C                  	db $3C		;[Note] 61
    2118.  0E:0A1E                      				;[Skip delay] 1
    2119.  0E:0A1E  3A                  	db $3A		;[Note] 59
    2120.  0E:0A1F                      				;[Skip delay] 1
    2121.  0E:0A1F  3A                  	db $3A		;[Note] 59
    2122.  0E:0A20                      				;[Skip delay] 1
    2123.  0E:0A20  35                  	db $35		;[Note] 54
    2124.  0E:0A21                      				;[Skip delay] 1
    2125.  0E:0A21  35                  	db $35		;[Note] 54
    2126.  0E:0A22                      				;[Skip delay] 1
    2127.  0E:0A22  30                  	db $30		;[Note] 49
    2128.  0E:0A23                      				;[Skip delay] 1
    2129.  0E:0A23  30                  	db $30		;[Note] 49
    2130.  0E:0A24                      				;[Skip delay] 1
    2131.  0E:0A24  35                  	db $35		;[Note] 54
    2132.  0E:0A25                      				;[Skip delay] 1
    2133.  0E:0A25  35                  	db $35		;[Note] 54
    2134.  0E:0A26                      				;[Skip delay] 1
    2135.  0E:0A26  30                  	db $30		;[Note] 49
    2136.  0E:0A27                      				;[Skip delay] 1
    2137.  0E:0A27  30                  	db $30		;[Note] 49
    2138.  0E:0A28                      				;[Skip delay] 1
    2139.  0E:0A28  35                  	db $35		;[Note] 54
    2140.  0E:0A29                      				;[Skip delay] 1
    2141.  0E:0A29  35                  	db $35		;[Note] 54
    2142.  0E:0A2A                      				;[Skip delay] 1
    2143.  0E:0A2A  37                  	db $37		;[Note] 56
    2144.  0E:0A2B                      				;[Skip delay] 1
    2145.  0E:0A2B  37                  	db $37		;[Note] 56
    2146.  0E:0A2C                      				;[Skip delay] 1
    2147.  0E:0A2C  33                  	db $33		;[Note] 52
    2148.  0E:0A2D                      				;[Skip delay] 1
    2149.  0E:0A2D  33                  	db $33		;[Note] 52
    2150.  0E:0A2E                      				;[Skip delay] 1
    2151.  0E:0A2E  30                  	db $30		;[Note] 49
    2152.  0E:0A2F                      				;[Skip delay] 1
    2153.  0E:0A2F  30                  	db $30		;[Note] 49
    2154.  0E:0A30                      				;[Skip delay] 1
    2155.  0E:0A30  33                  	db $33		;[Note] 52
    2156.  0E:0A31                      				;[Skip delay] 1
    2157.  0E:0A31  33                  	db $33		;[Note] 52
    2158.  0E:0A32                      				;[Skip delay] 1
    2159.  0E:0A32  30                  	db $30		;[Note] 49
    2160.  0E:0A33                      				;[Skip delay] 1
    2161.  0E:0A33  30                  	db $30		;[Note] 49
    2162.  0E:0A34                      				;[Skip delay] 1
    2163.  0E:0A34  33                  	db $33		;[Note] 52
    2164.  0E:0A35                      				;[Skip delay] 1
    2165.  0E:0A35  33                  	db $33		;[Note] 52
    2166.  0E:0A36                      				;[Skip delay] 1
    2167.  0E:0A36  35                  	db $35		;[Note] 54
    2168.  0E:0A37                      				;[Skip delay] 1
    2169.  0E:0A37  35                  	db $35		;[Note] 54
    2170.  0E:0A38                      				;[Skip delay] 1
    2171.  0E:0A38  37                  	db $37		;[Note] 56
    2172.  0E:0A39                      				;[Skip delay] 1
    2173.  0E:0A39  37                  	db $37		;[Note] 56
    2174.  0E:0A3A                      				;[Skip delay] 1
    2175.  0E:0A3A  3A                  	db $3A		;[Note] 59
    2176.  0E:0A3B                      				;[Skip delay] 1
    2177.  0E:0A3B  3A                  	db $3A		;[Note] 59
    2178.  0E:0A3C                      				;[Skip delay] 1
    2179.  0E:0A3C  30                  	db $30		;[Note] 49
    2180.  0E:0A3D  6F                  	db $6F		;[Volume] 15
    2181.  0E:0A3E  7E                  	db $7E		;[Instrument] 15
    2182.  0E:0A3F                      				;[Skip delay] 1
    2183.  0E:0A3F  30                  	db $30		;[Note] 49
    2184.  0E:0A40                      				;[Skip delay] 1
    2185.  0E:0A40  30                  	db $30		;[Note] 49
    2186.  0E:0A41  C1                  	db $C1		;[Wait] 2
    2187.  0E:0A42  32                  	db $32		;[Note] 51
    2188.  0E:0A43  C0                  	db $C0		;[Wait] 1
    2189.  0E:0A44  32                  	db $32		;[Note] 51
    2190.  0E:0A45                      				;[Skip delay] 1
    2191.  0E:0A45  32                  	db $32		;[Note] 51
    2192.  0E:0A46  C1                  	db $C1		;[Wait] 2
    2193.  0E:0A47  33                  	db $33		;[Note] 52
    2194.  0E:0A48  C0                  	db $C0		;[Wait] 1
    2195.  0E:0A49  33                  	db $33		;[Note] 52
    2196.  0E:0A4A                      				;[Skip delay] 1
    2197.  0E:0A4A  33                  	db $33		;[Note] 52
    2198.  0E:0A4B  C1                  	db $C1		;[Wait] 2
    2199.  0E:0A4C  37                  	db $37		;[Note] 56
    2200.  0E:0A4D  C0                  	db $C0		;[Wait] 1
    2201.  0E:0A4E  37                  	db $37		;[Note] 56
    2202.  0E:0A4F                      				;[Skip delay] 1
    2203.  0E:0A4F  37                  	db $37		;[Note] 56
    2204.  0E:0A50  C1                  	db $C1		;[Wait] 2
    2205.  0E:0A51  BF                  	db $BF		;[End-Of-Track]
    2206.  0E:0A52                      .track_26:
    2207.  0E:0A52  30                  	db $30		;[Note] 49
    2208.  0E:0A53  66                  	db $66		;[Volume] 6
    2209.  0E:0A54  7F                  	db $7F		;[Instrument] 16
    2210.  0E:0A55  C7                  	db $C7		;[Wait] 8
    2211.  0E:0A56  2B                  	db $2B		;[Note] 44
    2212.  0E:0A57                      				;[Skip delay] 8
    2213.  0E:0A57  2D                  	db $2D		;[Note] 46
    2214.  0E:0A58                      				;[Skip delay] 8
    2215.  0E:0A58  29                  	db $29		;[Note] 42
    2216.  0E:0A59  C3                  	db $C3		;[Wait] 4
    2217.  0E:0A5A  A5 03               	db $A5, $03; slide-down
    2218.  0E:0A5C  C0                  	db $C0		;[Wait] 1
    2219.  0E:0A5D  AF 03               	db $AF, $03; slide-down rep
    2220.  0E:0A5F  C2                  	db $C2		;[Wait] 3
    2221.  0E:0A60  27                  	db $27		;[Note] 40
    2222.  0E:0A61  C3                  	db $C3		;[Wait] 4
    2223.  0E:0A62  A4 03               	db $A4, $03; slide-up
    2224.  0E:0A64  C0                  	db $C0		;[Wait] 1
    2225.  0E:0A65  AE 03               	db $AE, $03; slide-up rep
    2226.  0E:0A67  C2                  	db $C2		;[Wait] 3
    2227.  0E:0A68  2B                  	db $2B		;[Note] 44
    2228.  0E:0A69  C7                  	db $C7		;[Wait] 8
    2229.  0E:0A6A  2B                  	db $2B		;[Note] 44
    2230.  0E:0A6B  7E                  	db $7E		;[Instrument] 15
    2231.  0E:0A6C  C3                  	db $C3		;[Wait] 4
    2232.  0E:0A6D  29                  	db $29		;[Note] 42
    2233.  0E:0A6E                      				;[Skip delay] 4
    2234.  0E:0A6E  27                  	db $27		;[Note] 40
    2235.  0E:0A6F                      				;[Skip delay] 4
    2236.  0E:0A6F  2B                  	db $2B		;[Note] 44
    2237.  0E:0A70                      				;[Skip delay] 4
    2238.  0E:0A70  BF                  	db $BF		;[End-Of-Track]
    2239.  0E:0A71                      .track_27:
    2240.  0E:0A71  DF                  	db $DF		;[Wait] 32
    2241.  0E:0A72  37                  	db $37		;[Note] 56
    2242.  0E:0A73  6A                  	db $6A		;[Volume] 10
    2243.  0E:0A74  7F                  	db $7F		;[Instrument] 16
    2244.  0E:0A75  C3                  	db $C3		;[Wait] 4
    2245.  0E:0A76  A4 01               	db $A4, $01; slide-up
    2246.  0E:0A78  C0                  	db $C0		;[Wait] 1
    2247.  0E:0A79  AE 03               	db $AE, $03; slide-up rep
    2248.  0E:0A7B  C2                  	db $C2		;[Wait] 3
    2249.  0E:0A7C  3A                  	db $3A		;[Note] 59
    2250.  0E:0A7D  C3                  	db $C3		;[Wait] 4
    2251.  0E:0A7E  A7 55               	db $A7, $55	;[CMD vibrato]
    2252.  0E:0A80  C0                  	db $C0		;[Wait] 1
    2253.  0E:0A81  B1 03               	db $B1, $03	;[CMD vibrato] rep
    2254.  0E:0A83  C2                  	db $C2		;[Wait] 3
    2255.  0E:0A84  27                  	db $27		;[Note] 40
    2256.  0E:0A85  6F                  	db $6F		;[Volume] 15
    2257.  0E:0A86  7E                  	db $7E		;[Instrument] 15
    2258.  0E:0A87  C3                  	db $C3		;[Wait] 4
    2259.  0E:0A88  26                  	db $26		;[Note] 39
    2260.  0E:0A89                      				;[Skip delay] 4
    2261.  0E:0A89  24                  	db $24		;[Note] 37
    2262.  0E:0A8A                      				;[Skip delay] 4
    2263.  0E:0A8A  27                  	db $27		;[Note] 40
    2264.  0E:0A8B                      				;[Skip delay] 4
    2265.  0E:0A8B  BF                  	db $BF		;[End-Of-Track]
    2266.  0E:0A8C                      .track_28:
    2267.  0E:0A8C  C1                  	db $C1		;[Wait] 2
    2268.  0E:0A8D  39                  	db $39		;[Note] 58
    2269.  0E:0A8E  69                  	db $69		;[Volume] 9
    2270.  0E:0A8F  77                  	db $77		;[Instrument] 8
    2271.  0E:0A90  C2                  	db $C2		;[Wait] 3
    2272.  0E:0A91  A7 56               	db $A7, $56	;[CMD vibrato]
    2273.  0E:0A93  C0                  	db $C0		;[Wait] 1
    2274.  0E:0A94  B1 04               	db $B1, $04	;[CMD vibrato] rep
    2275.  0E:0A96  C3                  	db $C3		;[Wait] 4
    2276.  0E:0A97  A7 55               	db $A7, $55	;[CMD vibrato]
    2277.  0E:0A99  C0                  	db $C0		;[Wait] 1
    2278.  0E:0A9A  A5 03               	db $A5, $03; slide-down
    2279.  0E:0A9C                      				;[Skip delay] 1
    2280.  0E:0A9C  AF 02               	db $AF, $02; slide-down rep
    2281.  0E:0A9E  C1                  	db $C1		;[Wait] 2
    2282.  0E:0A9F  37                  	db $37		;[Note] 56
    2283.  0E:0AA0  C3                  	db $C3		;[Wait] 4
    2284.  0E:0AA1  36                  	db $36		;[Note] 55
    2285.  0E:0AA2  C3                  	db $C3		;[Wait..] 4
    2286.  0E:0AA3  A7 36               	db $A7, $36	;[CMD vibrato]
    2287.  0E:0AA5  C0                  	db $C0		;[Wait] 1
    2288.  0E:0AA6  B1 01               	db $B1, $01	;[CMD vibrato] rep
    2289.  0E:0AA8                      				;[Skip delay] 1
    2290.  0E:0AA8  A5 05               	db $A5, $05; slide-down
    2291.  0E:0AAA                      				;[Skip delay] 1
    2292.  0E:0AAA  AF 01               	db $AF, $01; slide-down rep
    2293.  0E:0AAC                      				;[Skip delay] 1
    2294.  0E:0AAC  3A                  	db $3A		;[Note] 59
    2295.  0E:0AAD  C3                  	db $C3		;[Wait] 4
    2296.  0E:0AAE  39                  	db $39		;[Note] 58
    2297.  0E:0AAF  C1                  	db $C1		;[Wait] 2
    2298.  0E:0AB0  BF                  	db $BF		;[End-Of-Track]
    2299.  0E:0AB1                      .track_29:
    2300.  0E:0AB1  02                  	db $02		;[Note] 3
    2301.  0E:0AB2  6F                  	db $6F		;[Volume] 15
    2302.  0E:0AB3  79                  	db $79		;[Instrument] 10
    2303.  0E:0AB4  C1                  	db $C1		;[Wait] 2
    2304.  0E:0AB5  0E                  	db $0E		;[Note] 15
    2305.  0E:0AB6  C0                  	db $C0		;[Wait] 1
    2306.  0E:0AB7  0E                  	db $0E		;[Note] 15
    2307.  0E:0AB8                      				;[Skip delay] 1
    2308.  0E:0AB8  02                  	db $02		;[Note] 3
    2309.  0E:0AB9  C0                  	db $C0		;[Wait..] 1
    2310.  0E:0ABA  A5 0A               	db $A5, $0A; slide-down
    2311.  0E:0ABC                      				;[Skip delay] 1
    2312.  0E:0ABC  0E                  	db $0E		;[Note] 15
    2313.  0E:0ABD                      				;[Skip delay] 1
    2314.  0E:0ABD  0E                  	db $0E		;[Note] 15
    2315.  0E:0ABE                      				;[Skip delay] 1
    2316.  0E:0ABE  02                  	db $02		;[Note] 3
    2317.  0E:0ABF  C0                  	db $C0		;[Wait..] 1
    2318.  0E:0AC0  A5 03               	db $A5, $03; slide-down
    2319.  0E:0AC2                      				;[Skip delay] 1
    2320.  0E:0AC2  0E                  	db $0E		;[Note] 15
    2321.  0E:0AC3  C1                  	db $C1		;[Wait] 2
    2322.  0E:0AC4  02                  	db $02		;[Note] 3
    2323.  0E:0AC5                      				;[Skip delay] 2
    2324.  0E:0AC5  0E                  	db $0E		;[Note] 15
    2325.  0E:0AC6  C0                  	db $C0		;[Wait] 1
    2326.  0E:0AC7  0E                  	db $0E		;[Note] 15
    2327.  0E:0AC8                      				;[Skip delay] 1
    2328.  0E:0AC8  02                  	db $02		;[Note] 3
    2329.  0E:0AC9                      				;[Skip delay] 1
    2330.  0E:0AC9  02                  	db $02		;[Note] 3
    2331.  0E:0ACA                      				;[Skip delay] 1
    2332.  0E:0ACA  0C                  	db $0C		;[Note] 13
    2333.  0E:0ACB                      				;[Skip delay] 1
    2334.  0E:0ACB  0E                  	db $0E		;[Note] 15
    2335.  0E:0ACC                      				;[Skip delay] 1
    2336.  0E:0ACC  02                  	db $02		;[Note] 3
    2337.  0E:0ACD  C1                  	db $C1		;[Wait] 2
    2338.  0E:0ACE  0E                  	db $0E		;[Note] 15
    2339.  0E:0ACF  C0                  	db $C0		;[Wait] 1
    2340.  0E:0AD0  0E                  	db $0E		;[Note] 15
    2341.  0E:0AD1                      				;[Skip delay] 1
    2342.  0E:0AD1  15                  	db $15		;[Note] 22
    2343.  0E:0AD2                      				;[Skip delay] 1
    2344.  0E:0AD2  15                  	db $15		;[Note] 22
    2345.  0E:0AD3                      				;[Skip delay] 1
    2346.  0E:0AD3  12                  	db $12		;[Note] 19
    2347.  0E:0AD4                      				;[Skip delay] 1
    2348.  0E:0AD4  12                  	db $12		;[Note] 19
    2349.  0E:0AD5                      				;[Skip delay] 1
    2350.  0E:0AD5  0E                  	db $0E		;[Note] 15
    2351.  0E:0AD6                      				;[Skip delay] 1
    2352.  0E:0AD6  0E                  	db $0E		;[Note] 15
    2353.  0E:0AD7                      				;[Skip delay] 1
    2354.  0E:0AD7  0C                  	db $0C		;[Note] 13
    2355.  0E:0AD8                      				;[Skip delay] 1
    2356.  0E:0AD8  09                  	db $09		;[Note] 10
    2357.  0E:0AD9                      				;[Skip delay] 1
    2358.  0E:0AD9  BF                  	db $BF		;[End-Of-Track]
    2359.  0E:0ADA                      .track_30:
    2360.  0E:0ADA  39                  	db $39		;[Note] 58
    2361.  0E:0ADB  6A                  	db $6A		;[Volume] 10
    2362.  0E:0ADC  82                  	db $82		;[Instrument] 19
    2363.  0E:0ADD  C2                  	db $C2		;[Wait] 3
    2364.  0E:0ADE  A7 56               	db $A7, $56	;[CMD vibrato]
    2365.  0E:0AE0  C0                  	db $C0		;[Wait] 1
    2366.  0E:0AE1  B1 04               	db $B1, $04	;[CMD vibrato] rep
    2367.  0E:0AE3  C3                  	db $C3		;[Wait] 4
    2368.  0E:0AE4  A7 55               	db $A7, $55	;[CMD vibrato]
    2369.  0E:0AE6  C0                  	db $C0		;[Wait] 1
    2370.  0E:0AE7  A5 03               	db $A5, $03; slide-down
    2371.  0E:0AE9                      				;[Skip delay] 1
    2372.  0E:0AE9  AF 02               	db $AF, $02; slide-down rep
    2373.  0E:0AEB  C1                  	db $C1		;[Wait] 2
    2374.  0E:0AEC  37                  	db $37		;[Note] 56
    2375.  0E:0AED  C3                  	db $C3		;[Wait] 4
    2376.  0E:0AEE  36                  	db $36		;[Note] 55
    2377.  0E:0AEF  C3                  	db $C3		;[Wait..] 4
    2378.  0E:0AF0  A7 36               	db $A7, $36	;[CMD vibrato]
    2379.  0E:0AF2  C0                  	db $C0		;[Wait] 1
    2380.  0E:0AF3  B1 01               	db $B1, $01	;[CMD vibrato] rep
    2381.  0E:0AF5                      				;[Skip delay] 1
    2382.  0E:0AF5  A5 05               	db $A5, $05; slide-down
    2383.  0E:0AF7                      				;[Skip delay] 1
    2384.  0E:0AF7  AF 01               	db $AF, $01; slide-down rep
    2385.  0E:0AF9                      				;[Skip delay] 1
    2386.  0E:0AF9  3A                  	db $3A		;[Note] 59
    2387.  0E:0AFA  C3                  	db $C3		;[Wait] 4
    2388.  0E:0AFB  39                  	db $39		;[Note] 58
    2389.  0E:0AFC                      				;[Skip delay] 4
    2390.  0E:0AFC  BF                  	db $BF		;[End-Of-Track]
    2391.  0E:0AFD                      .track_31:
    2392.  0E:0AFD  26                  	db $26		;[Note] 39
    2393.  0E:0AFE  69                  	db $69		;[Volume] 9
    2394.  0E:0AFF  7E                  	db $7E		;[Instrument] 15
    2395.  0E:0B00  C1                  	db $C1		;[Wait] 2
    2396.  0E:0B01  32                  	db $32		;[Note] 51
    2397.  0E:0B02  C0                  	db $C0		;[Wait] 1
    2398.  0E:0B03  32                  	db $32		;[Note] 51
    2399.  0E:0B04                      				;[Skip delay] 1
    2400.  0E:0B04  26                  	db $26		;[Note] 39
    2401.  0E:0B05  C1                  	db $C1		;[Wait] 2
    2402.  0E:0B06  32                  	db $32		;[Note] 51
    2403.  0E:0B07  C0                  	db $C0		;[Wait] 1
    2404.  0E:0B08  32                  	db $32		;[Note] 51
    2405.  0E:0B09                      				;[Skip delay] 1
    2406.  0E:0B09  26                  	db $26		;[Note] 39
    2407.  0E:0B0A  C1                  	db $C1		;[Wait] 2
    2408.  0E:0B0B  32                  	db $32		;[Note] 51
    2409.  0E:0B0C  C0                  	db $C0		;[Wait] 1
    2410.  0E:0B0D  32                  	db $32		;[Note] 51
    2411.  0E:0B0E                      				;[Skip delay] 1
    2412.  0E:0B0E  26                  	db $26		;[Note] 39
    2413.  0E:0B0F  C1                  	db $C1		;[Wait] 2
    2414.  0E:0B10  32                  	db $32		;[Note] 51
    2415.  0E:0B11  C0                  	db $C0		;[Wait] 1
    2416.  0E:0B12  32                  	db $32		;[Note] 51
    2417.  0E:0B13                      				;[Skip delay] 1
    2418.  0E:0B13  26                  	db $26		;[Note] 39
    2419.  0E:0B14  C1                  	db $C1		;[Wait] 2
    2420.  0E:0B15  32                  	db $32		;[Note] 51
    2421.  0E:0B16  C0                  	db $C0		;[Wait] 1
    2422.  0E:0B17  32                  	db $32		;[Note] 51
    2423.  0E:0B18                      				;[Skip delay] 1
    2424.  0E:0B18  26                  	db $26		;[Note] 39
    2425.  0E:0B19  C1                  	db $C1		;[Wait] 2
    2426.  0E:0B1A  32                  	db $32		;[Note] 51
    2427.  0E:0B1B  C0                  	db $C0		;[Wait] 1
    2428.  0E:0B1C  32                  	db $32		;[Note] 51
    2429.  0E:0B1D                      				;[Skip delay] 1
    2430.  0E:0B1D  2B                  	db $2B		;[Note] 44
    2431.  0E:0B1E  6F                  	db $6F		;[Volume] 15
    2432.  0E:0B1F  84                  	db $84		;[Instrument] 21
    2433.  0E:0B20                      				;[Skip delay] 1
    2434.  0E:0B20  2B                  	db $2B		;[Note] 44
    2435.  0E:0B21                      				;[Skip delay] 1
    2436.  0E:0B21  28                  	db $28		;[Note] 41
    2437.  0E:0B22                      				;[Skip delay] 1
    2438.  0E:0B22  28                  	db $28		;[Note] 41
    2439.  0E:0B23                      				;[Skip delay] 1
    2440.  0E:0B23  26                  	db $26		;[Note] 39
    2441.  0E:0B24                      				;[Skip delay] 1
    2442.  0E:0B24  26                  	db $26		;[Note] 39
    2443.  0E:0B25                      				;[Skip delay] 1
    2444.  0E:0B25  21                  	db $21		;[Note] 34
    2445.  0E:0B26                      				;[Skip delay] 1
    2446.  0E:0B26  1C                  	db $1C		;[Note] 29
    2447.  0E:0B27                      				;[Skip delay] 1
    2448.  0E:0B27  BF                  	db $BF		;[End-Of-Track]
    2449.  0E:0B28                      .track_32:
    2450.  0E:0B28  39                  	db $39		;[Note] 58
    2451.  0E:0B29  6F                  	db $6F		;[Volume] 15
    2452.  0E:0B2A  81                  	db $81		;[Instrument] 18
    2453.  0E:0B2B  C0                  	db $C0		;[Wait] 1
    2454.  0E:0B2C  32                  	db $32		;[Note] 51
    2455.  0E:0B2D                      				;[Skip delay] 1
    2456.  0E:0B2D  37                  	db $37		;[Note] 56
    2457.  0E:0B2E                      				;[Skip delay] 1
    2458.  0E:0B2E  32                  	db $32		;[Note] 51
    2459.  0E:0B2F                      				;[Skip delay] 1
    2460.  0E:0B2F  36                  	db $36		;[Note] 55
    2461.  0E:0B30                      				;[Skip delay] 1
    2462.  0E:0B30  32                  	db $32		;[Note] 51
    2463.  0E:0B31                      				;[Skip delay] 1
    2464.  0E:0B31  37                  	db $37		;[Note] 56
    2465.  0E:0B32                      				;[Skip delay] 1
    2466.  0E:0B32  32                  	db $32		;[Note] 51
    2467.  0E:0B33                      				;[Skip delay] 1
    2468.  0E:0B33  39                  	db $39		;[Note] 58
    2469.  0E:0B34                      				;[Skip delay] 1
    2470.  0E:0B34  32                  	db $32		;[Note] 51
    2471.  0E:0B35                      				;[Skip delay] 1
    2472.  0E:0B35  3A                  	db $3A		;[Note] 59
    2473.  0E:0B36                      				;[Skip delay] 1
    2474.  0E:0B36  32                  	db $32		;[Note] 51
    2475.  0E:0B37                      				;[Skip delay] 1
    2476.  0E:0B37  39                  	db $39		;[Note] 58
    2477.  0E:0B38                      				;[Skip delay] 1
    2478.  0E:0B38  32                  	db $32		;[Note] 51
    2479.  0E:0B39                      				;[Skip delay] 1
    2480.  0E:0B39  37                  	db $37		;[Note] 56
    2481.  0E:0B3A                      				;[Skip delay] 1
    2482.  0E:0B3A  32                  	db $32		;[Note] 51
    2483.  0E:0B3B                      				;[Skip delay] 1
    2484.  0E:0B3B  2D                  	db $2D		;[Note] 46
    2485.  0E:0B3C                      				;[Skip delay] 1
    2486.  0E:0B3C  2B                  	db $2B		;[Note] 44
    2487.  0E:0B3D                      				;[Skip delay] 1
    2488.  0E:0B3D  2A                  	db $2A		;[Note] 43
    2489.  0E:0B3E                      				;[Skip delay] 1
    2490.  0E:0B3E  27                  	db $27		;[Note] 40
    2491.  0E:0B3F                      				;[Skip delay] 1
    2492.  0E:0B3F  26                  	db $26		;[Note] 39
    2493.  0E:0B40                      				;[Skip delay] 1
    2494.  0E:0B40  24                  	db $24		;[Note] 37
    2495.  0E:0B41                      				;[Skip delay] 1
    2496.  0E:0B41  22                  	db $22		;[Note] 35
    2497.  0E:0B42                      				;[Skip delay] 1
    2498.  0E:0B42  21                  	db $21		;[Note] 34
    2499.  0E:0B43                      				;[Skip delay] 1
    2500.  0E:0B43  2D                  	db $2D		;[Note] 46
    2501.  0E:0B44                      				;[Skip delay] 1
    2502.  0E:0B44  2B                  	db $2B		;[Note] 44
    2503.  0E:0B45                      				;[Skip delay] 1
    2504.  0E:0B45  2D                  	db $2D		;[Note] 46
    2505.  0E:0B46                      				;[Skip delay] 1
    2506.  0E:0B46  2E                  	db $2E		;[Note] 47
    2507.  0E:0B47                      				;[Skip delay] 1
    2508.  0E:0B47  30                  	db $30		;[Note] 49
    2509.  0E:0B48                      				;[Skip delay] 1
    2510.  0E:0B48  2E                  	db $2E		;[Note] 47
    2511.  0E:0B49                      				;[Skip delay] 1
    2512.  0E:0B49  2D                  	db $2D		;[Note] 46
    2513.  0E:0B4A                      				;[Skip delay] 1
    2514.  0E:0B4A  2A                  	db $2A		;[Note] 43
    2515.  0E:0B4B                      				;[Skip delay] 1
    2516.  0E:0B4B  BF                  	db $BF		;[End-Of-Track]
    2517.  0E:0B4C                      .track_33:
    2518.  0E:0B4C  42                  	db $42		;[Note] 67
    2519.  0E:0B4D  65                  	db $65		;[Volume] 5
    2520.  0E:0B4E  81                  	db $81		;[Instrument] 18
    2521.  0E:0B4F  C1                  	db $C1		;[Wait] 2
    2522.  0E:0B50  3F                  	db $3F		;[Note] 64
    2523.  0E:0B51                      				;[Skip delay] 2
    2524.  0E:0B51  3E                  	db $3E		;[Note] 63
    2525.  0E:0B52                      				;[Skip delay] 2
    2526.  0E:0B52  3C                  	db $3C		;[Note] 61
    2527.  0E:0B53                      				;[Skip delay] 2
    2528.  0E:0B53  3E                  	db $3E		;[Note] 63
    2529.  0E:0B54                      				;[Skip delay] 2
    2530.  0E:0B54  3C                  	db $3C		;[Note] 61
    2531.  0E:0B55                      				;[Skip delay] 2
    2532.  0E:0B55  36                  	db $36		;[Note] 55
    2533.  0E:0B56                      				;[Skip delay] 2
    2534.  0E:0B56  33                  	db $33		;[Note] 52
    2535.  0E:0B57                      				;[Skip delay] 2
    2536.  0E:0B57  32                  	db $32		;[Note] 51
    2537.  0E:0B58                      				;[Skip delay] 2
    2538.  0E:0B58  30                  	db $30		;[Note] 49
    2539.  0E:0B59                      				;[Skip delay] 2
    2540.  0E:0B59  39                  	db $39		;[Note] 58
    2541.  0E:0B5A                      				;[Skip delay] 2
    2542.  0E:0B5A  26                  	db $26		;[Note] 39
    2543.  0E:0B5B                      				;[Skip delay] 2
    2544.  0E:0B5B  18                  	db $18		;[Note] 25
    2545.  0E:0B5C                      				;[Skip delay] 2
    2546.  0E:0B5C  1A                  	db $1A		;[Note] 27
    2547.  0E:0B5D                      				;[Skip delay] 2
    2548.  0E:0B5D  1A                  	db $1A		;[Note] 27
    2549.  0E:0B5E                      				;[Skip delay] 2
    2550.  0E:0B5E  1A                  	db $1A		;[Note] 27
    2551.  0E:0B5F                      				;[Skip delay] 2
    2552.  0E:0B5F  BF                  	db $BF		;[End-Of-Track]
    2553.  0E:0B60                      .track_34:
    2554.  0E:0B60  2B                  	db $2B		;[Note] 44
    2555.  0E:0B61  6F                  	db $6F		;[Volume] 15
    2556.  0E:0B62  84                  	db $84		;[Instrument] 21
    2557.  0E:0B63  C1                  	db $C1		;[Wait] 2
    2558.  0E:0B64  23                  	db $23		;[Note] 36
    2559.  0E:0B65  C5                  	db $C5		;[Wait] 6
    2560.  0E:0B66  1F                  	db $1F		;[Note] 32
    2561.  0E:0B67  70                  	db $70		;[Instrument] 1
    2562.  0E:0B68  C1                  	db $C1		;[Wait] 2
    2563.  0E:0B69  21                  	db $21		;[Note] 34
    2564.  0E:0B6A                      				;[Skip delay] 2
    2565.  0E:0B6A  21                  	db $21		;[Note] 34
    2566.  0E:0B6B  71                  	db $71		;[Instrument] 2
    2567.  0E:0B6C                      				;[Skip delay] 2
    2568.  0E:0B6C  1F                  	db $1F		;[Note] 32
    2569.  0E:0B6D  70                  	db $70		;[Instrument] 1
    2570.  0E:0B6E                      				;[Skip delay] 2
    2571.  0E:0B6E  23                  	db $23		;[Note] 36
    2572.  0E:0B6F  84                  	db $84		;[Instrument] 21
    2573.  0E:0B70                      				;[Skip delay] 2
    2574.  0E:0B70  23                  	db $23		;[Note] 36
    2575.  0E:0B71  C5                  	db $C5		;[Wait] 6
    2576.  0E:0B72  1F                  	db $1F		;[Note] 32
    2577.  0E:0B73  70                  	db $70		;[Instrument] 1
    2578.  0E:0B74  C1                  	db $C1		;[Wait] 2
    2579.  0E:0B75  21                  	db $21		;[Note] 34
    2580.  0E:0B76                      				;[Skip delay] 2
    2581.  0E:0B76  21                  	db $21		;[Note] 34
    2582.  0E:0B77  71                  	db $71		;[Instrument] 2
    2583.  0E:0B78                      				;[Skip delay] 2
    2584.  0E:0B78  1F                  	db $1F		;[Note] 32
    2585.  0E:0B79  70                  	db $70		;[Instrument] 1
    2586.  0E:0B7A                      				;[Skip delay] 2
    2587.  0E:0B7A  23                  	db $23		;[Note] 36
    2588.  0E:0B7B  84                  	db $84		;[Instrument] 21
    2589.  0E:0B7C                      				;[Skip delay] 2
    2590.  0E:0B7C  23                  	db $23		;[Note] 36
    2591.  0E:0B7D  C5                  	db $C5		;[Wait] 6
    2592.  0E:0B7E  1F                  	db $1F		;[Note] 32
    2593.  0E:0B7F  70                  	db $70		;[Instrument] 1
    2594.  0E:0B80  C1                  	db $C1		;[Wait] 2
    2595.  0E:0B81  21                  	db $21		;[Note] 34
    2596.  0E:0B82                      				;[Skip delay] 2
    2597.  0E:0B82  21                  	db $21		;[Note] 34
    2598.  0E:0B83  71                  	db $71		;[Instrument] 2
    2599.  0E:0B84                      				;[Skip delay] 2
    2600.  0E:0B84  1F                  	db $1F		;[Note] 32
    2601.  0E:0B85  70                  	db $70		;[Instrument] 1
    2602.  0E:0B86                      				;[Skip delay] 2
    2603.  0E:0B86  23                  	db $23		;[Note] 36
    2604.  0E:0B87  84                  	db $84		;[Instrument] 21
    2605.  0E:0B88                      				;[Skip delay] 2
    2606.  0E:0B88  23                  	db $23		;[Note] 36
    2607.  0E:0B89  C7                  	db $C7		;[Wait] 8
    2608.  0E:0B8A  1C                  	db $1C		;[Note] 29
    2609.  0E:0B8B  C1                  	db $C1		;[Wait] 2
    2610.  0E:0B8C  1C                  	db $1C		;[Note] 29
    2611.  0E:0B8D                      				;[Skip delay] 2
    2612.  0E:0B8D  1C                  	db $1C		;[Note] 29
    2613.  0E:0B8E                      				;[Skip delay] 2
    2614.  0E:0B8E  BF                  	db $BF		;[End-Of-Track]
    2615.  0E:0B8F                      .track_35:
    2616.  0E:0B8F  02                  	db $02		;[Note] 3
    2617.  0E:0B90  6F                  	db $6F		;[Volume] 15
    2618.  0E:0B91  C1                  	db $C1		;[Wait] 2
    2619.  0E:0B92  02                  	db $02		;[Note] 3
    2620.  0E:0B93  79                  	db $79		;[Instrument] 10
    2621.  0E:0B94  C1                  	db $C1		;[Wait..] 2
    2622.  0E:0B95  A5 03               	db $A5, $03; slide-down
    2623.  0E:0B97  C0                  	db $C0		;[Wait] 1
    2624.  0E:0B98  AF 06               	db $AF, $06; slide-down rep
    2625.  0E:0B9A                      				;[Skip delay] 1
    2626.  0E:0B9A  60                  	db $60		;[Note] 97
    2627.  0E:0B9B  C9                  	db $C9		;[Wait] 10
    2628.  0E:0B9C  02                  	db $02		;[Note] 3
    2629.  0E:0B9D  C1                  	db $C1		;[Wait] 2
    2630.  0E:0B9E  02                  	db $02		;[Note] 3
    2631.  0E:0B9F  C1                  	db $C1		;[Wait..] 2
    2632.  0E:0BA0  A5 03               	db $A5, $03; slide-down
    2633.  0E:0BA2  C0                  	db $C0		;[Wait] 1
    2634.  0E:0BA3  AF 06               	db $AF, $06; slide-down rep
    2635.  0E:0BA5                      				;[Skip delay] 1
    2636.  0E:0BA5  60                  	db $60		;[Note] 97
    2637.  0E:0BA6  C9                  	db $C9		;[Wait] 10
    2638.  0E:0BA7  02                  	db $02		;[Note] 3
    2639.  0E:0BA8  C1                  	db $C1		;[Wait] 2
    2640.  0E:0BA9  02                  	db $02		;[Note] 3
    2641.  0E:0BAA  C1                  	db $C1		;[Wait..] 2
    2642.  0E:0BAB  A5 03               	db $A5, $03; slide-down
    2643.  0E:0BAD  C0                  	db $C0		;[Wait] 1
    2644.  0E:0BAE  AF 06               	db $AF, $06; slide-down rep
    2645.  0E:0BB0                      				;[Skip delay] 1
    2646.  0E:0BB0  60                  	db $60		;[Note] 97
    2647.  0E:0BB1  D3                  	db $D3		;[Wait] 20
    2648.  0E:0BB2  1A                  	db $1A		;[Note] 27
    2649.  0E:0BB3  C1                  	db $C1		;[Wait] 2
    2650.  0E:0BB4  1A                  	db $1A		;[Note] 27
    2651.  0E:0BB5                      				;[Skip delay] 2
    2652.  0E:0BB5  02                  	db $02		;[Note] 3
    2653.  0E:0BB6  7D                  	db $7D		;[Instrument] 14
    2654.  0E:0BB7                      				;[Skip delay] 2
    2655.  0E:0BB7  BF                  	db $BF		;[End-Of-Track]
    2656.  0E:0BB8                      .track_36:
    2657.  0E:0BB8  3A                  	db $3A		;[Note] 59
    2658.  0E:0BB9  6F                  	db $6F		;[Volume] 15
    2659.  0E:0BBA  C0                  	db $C0		;[Wait] 1
    2660.  0E:0BBB  39                  	db $39		;[Note] 58
    2661.  0E:0BBC                      				;[Skip delay] 1
    2662.  0E:0BBC  33                  	db $33		;[Note] 52
    2663.  0E:0BBD                      				;[Skip delay] 1
    2664.  0E:0BBD  32                  	db $32		;[Note] 51
    2665.  0E:0BBE                      				;[Skip delay] 1
    2666.  0E:0BBE  3A                  	db $3A		;[Note] 59
    2667.  0E:0BBF                      				;[Skip delay] 1
    2668.  0E:0BBF  39                  	db $39		;[Note] 58
    2669.  0E:0BC0                      				;[Skip delay] 1
    2670.  0E:0BC0  33                  	db $33		;[Note] 52
    2671.  0E:0BC1                      				;[Skip delay] 1
    2672.  0E:0BC1  32                  	db $32		;[Note] 51
    2673.  0E:0BC2                      				;[Skip delay] 1
    2674.  0E:0BC2  3A                  	db $3A		;[Note] 59
    2675.  0E:0BC3                      				;[Skip delay] 1
    2676.  0E:0BC3  39                  	db $39		;[Note] 58
    2677.  0E:0BC4                      				;[Skip delay] 1
    2678.  0E:0BC4  33                  	db $33		;[Note] 52
    2679.  0E:0BC5                      				;[Skip delay] 1
    2680.  0E:0BC5  32                  	db $32		;[Note] 51
    2681.  0E:0BC6                      				;[Skip delay] 1
    2682.  0E:0BC6  3A                  	db $3A		;[Note] 59
    2683.  0E:0BC7                      				;[Skip delay] 1
    2684.  0E:0BC7  39                  	db $39		;[Note] 58
    2685.  0E:0BC8                      				;[Skip delay] 1
    2686.  0E:0BC8  33                  	db $33		;[Note] 52
    2687.  0E:0BC9                      				;[Skip delay] 1
    2688.  0E:0BC9  32                  	db $32		;[Note] 51
    2689.  0E:0BCA                      				;[Skip delay] 1
    2690.  0E:0BCA  3E                  	db $3E		;[Note] 63
    2691.  0E:0BCB                      				;[Skip delay] 1
    2692.  0E:0BCB  3C                  	db $3C		;[Note] 61
    2693.  0E:0BCC                      				;[Skip delay] 1
    2694.  0E:0BCC  37                  	db $37		;[Note] 56
    2695.  0E:0BCD                      				;[Skip delay] 1
    2696.  0E:0BCD  35                  	db $35		;[Note] 54
    2697.  0E:0BCE                      				;[Skip delay] 1
    2698.  0E:0BCE  3E                  	db $3E		;[Note] 63
    2699.  0E:0BCF                      				;[Skip delay] 1
    2700.  0E:0BCF  3C                  	db $3C		;[Note] 61
    2701.  0E:0BD0                      				;[Skip delay] 1
    2702.  0E:0BD0  37                  	db $37		;[Note] 56
    2703.  0E:0BD1                      				;[Skip delay] 1
    2704.  0E:0BD1  35                  	db $35		;[Note] 54
    2705.  0E:0BD2                      				;[Skip delay] 1
    2706.  0E:0BD2  3E                  	db $3E		;[Note] 63
    2707.  0E:0BD3                      				;[Skip delay] 1
    2708.  0E:0BD3  3C                  	db $3C		;[Note] 61
    2709.  0E:0BD4                      				;[Skip delay] 1
    2710.  0E:0BD4  37                  	db $37		;[Note] 56
    2711.  0E:0BD5                      				;[Skip delay] 1
    2712.  0E:0BD5  35                  	db $35		;[Note] 54
    2713.  0E:0BD6                      				;[Skip delay] 1
    2714.  0E:0BD6  3E                  	db $3E		;[Note] 63
    2715.  0E:0BD7                      				;[Skip delay] 1
    2716.  0E:0BD7  3C                  	db $3C		;[Note] 61
    2717.  0E:0BD8                      				;[Skip delay] 1
    2718.  0E:0BD8  37                  	db $37		;[Note] 56
    2719.  0E:0BD9                      				;[Skip delay] 1
    2720.  0E:0BD9  35                  	db $35		;[Note] 54
    2721.  0E:0BDA                      				;[Skip delay] 1
    2722.  0E:0BDA  3F                  	db $3F		;[Note] 64
    2723.  0E:0BDB                      				;[Skip delay] 1
    2724.  0E:0BDB  3E                  	db $3E		;[Note] 63
    2725.  0E:0BDC                      				;[Skip delay] 1
    2726.  0E:0BDC  37                  	db $37		;[Note] 56
    2727.  0E:0BDD                      				;[Skip delay] 1
    2728.  0E:0BDD  35                  	db $35		;[Note] 54
    2729.  0E:0BDE                      				;[Skip delay] 1
    2730.  0E:0BDE  3F                  	db $3F		;[Note] 64
    2731.  0E:0BDF                      				;[Skip delay] 1
    2732.  0E:0BDF  3E                  	db $3E		;[Note] 63
    2733.  0E:0BE0                      				;[Skip delay] 1
    2734.  0E:0BE0  37                  	db $37		;[Note] 56
    2735.  0E:0BE1                      				;[Skip delay] 1
    2736.  0E:0BE1  35                  	db $35		;[Note] 54
    2737.  0E:0BE2                      				;[Skip delay] 1
    2738.  0E:0BE2  3F                  	db $3F		;[Note] 64
    2739.  0E:0BE3                      				;[Skip delay] 1
    2740.  0E:0BE3  3E                  	db $3E		;[Note] 63
    2741.  0E:0BE4                      				;[Skip delay] 1
    2742.  0E:0BE4  37                  	db $37		;[Note] 56
    2743.  0E:0BE5                      				;[Skip delay] 1
    2744.  0E:0BE5  35                  	db $35		;[Note] 54
    2745.  0E:0BE6                      				;[Skip delay] 1
    2746.  0E:0BE6  3F                  	db $3F		;[Note] 64
    2747.  0E:0BE7                      				;[Skip delay] 1
    2748.  0E:0BE7  3E                  	db $3E		;[Note] 63
    2749.  0E:0BE8                      				;[Skip delay] 1
    2750.  0E:0BE8  37                  	db $37		;[Note] 56
    2751.  0E:0BE9                      				;[Skip delay] 1
    2752.  0E:0BE9  35                  	db $35		;[Note] 54
    2753.  0E:0BEA                      				;[Skip delay] 1
    2754.  0E:0BEA  43                  	db $43		;[Note] 68
    2755.  0E:0BEB                      				;[Skip delay] 1
    2756.  0E:0BEB  42                  	db $42		;[Note] 67
    2757.  0E:0BEC                      				;[Skip delay] 1
    2758.  0E:0BEC  3F                  	db $3F		;[Note] 64
    2759.  0E:0BED                      				;[Skip delay] 1
    2760.  0E:0BED  3E                  	db $3E		;[Note] 63
    2761.  0E:0BEE                      				;[Skip delay] 1
    2762.  0E:0BEE  43                  	db $43		;[Note] 68
    2763.  0E:0BEF                      				;[Skip delay] 1
    2764.  0E:0BEF  42                  	db $42		;[Note] 67
    2765.  0E:0BF0                      				;[Skip delay] 1
    2766.  0E:0BF0  3F                  	db $3F		;[Note] 64
    2767.  0E:0BF1                      				;[Skip delay] 1
    2768.  0E:0BF1  3E                  	db $3E		;[Note] 63
    2769.  0E:0BF2                      				;[Skip delay] 1
    2770.  0E:0BF2  43                  	db $43		;[Note] 68
    2771.  0E:0BF3                      				;[Skip delay] 1
    2772.  0E:0BF3  42                  	db $42		;[Note] 67
    2773.  0E:0BF4                      				;[Skip delay] 1
    2774.  0E:0BF4  3F                  	db $3F		;[Note] 64
    2775.  0E:0BF5                      				;[Skip delay] 1
    2776.  0E:0BF5  3E                  	db $3E		;[Note] 63
    2777.  0E:0BF6                      				;[Skip delay] 1
    2778.  0E:0BF6  43                  	db $43		;[Note] 68
    2779.  0E:0BF7                      				;[Skip delay] 1
    2780.  0E:0BF7  42                  	db $42		;[Note] 67
    2781.  0E:0BF8                      				;[Skip delay] 1
    2782.  0E:0BF8  3F                  	db $3F		;[Note] 64
    2783.  0E:0BF9                      				;[Skip delay] 1
    2784.  0E:0BF9  3E                  	db $3E		;[Note] 63
    2785.  0E:0BFA                      				;[Skip delay] 1
    2786.  0E:0BFA  BF                  	db $BF		;[End-Of-Track]
    2787.  0E:0BFB                      .track_37:
    2788.  0E:0BFB  02                  	db $02		;[Note] 3
    2789.  0E:0BFC  6F                  	db $6F		;[Volume] 15
    2790.  0E:0BFD  79                  	db $79		;[Instrument] 10
    2791.  0E:0BFE  C1                  	db $C1		;[Wait] 2
    2792.  0E:0BFF  02                  	db $02		;[Note] 3
    2793.  0E:0C00  C1                  	db $C1		;[Wait..] 2
    2794.  0E:0C01  A5 03               	db $A5, $03; slide-down
    2795.  0E:0C03  C0                  	db $C0		;[Wait] 1
    2796.  0E:0C04  AF 06               	db $AF, $06; slide-down rep
    2797.  0E:0C06                      				;[Skip delay] 1
    2798.  0E:0C06  60                  	db $60		;[Note] 97
    2799.  0E:0C07  C9                  	db $C9		;[Wait] 10
    2800.  0E:0C08  02                  	db $02		;[Note] 3
    2801.  0E:0C09  C1                  	db $C1		;[Wait] 2
    2802.  0E:0C0A  02                  	db $02		;[Note] 3
    2803.  0E:0C0B  C1                  	db $C1		;[Wait..] 2
    2804.  0E:0C0C  A5 03               	db $A5, $03; slide-down
    2805.  0E:0C0E  C0                  	db $C0		;[Wait] 1
    2806.  0E:0C0F  AF 06               	db $AF, $06; slide-down rep
    2807.  0E:0C11                      				;[Skip delay] 1
    2808.  0E:0C11  60                  	db $60		;[Note] 97
    2809.  0E:0C12  C9                  	db $C9		;[Wait] 10
    2810.  0E:0C13  02                  	db $02		;[Note] 3
    2811.  0E:0C14  C1                  	db $C1		;[Wait] 2
    2812.  0E:0C15  02                  	db $02		;[Note] 3
    2813.  0E:0C16  C1                  	db $C1		;[Wait..] 2
    2814.  0E:0C17  A5 03               	db $A5, $03; slide-down
    2815.  0E:0C19  C0                  	db $C0		;[Wait] 1
    2816.  0E:0C1A  AF 06               	db $AF, $06; slide-down rep
    2817.  0E:0C1C                      				;[Skip delay] 1
    2818.  0E:0C1C  60                  	db $60		;[Note] 97
    2819.  0E:0C1D  D3                  	db $D3		;[Wait] 20
    2820.  0E:0C1E  1A                  	db $1A		;[Note] 27
    2821.  0E:0C1F  C1                  	db $C1		;[Wait] 2
    2822.  0E:0C20  1A                  	db $1A		;[Note] 27
    2823.  0E:0C21                      				;[Skip delay] 2
    2824.  0E:0C21  02                  	db $02		;[Note] 3
    2825.  0E:0C22  7D                  	db $7D		;[Instrument] 14
    2826.  0E:0C23                      				;[Skip delay] 2
    2827.  0E:0C23  BF                  	db $BF		;[End-Of-Track]
    2828.  0E:0C24                      .track_38:
    2829.  0E:0C24  02                  	db $02		;[Note] 3
    2830.  0E:0C25  6F                  	db $6F		;[Volume] 15
    2831.  0E:0C26  7D                  	db $7D		;[Instrument] 14
    2832.  0E:0C27  C3                  	db $C3		;[Wait] 4
    2833.  0E:0C28  A4 22               	db $A4, $22; slide-up
    2834.  0E:0C2A  C0                  	db $C0		;[Wait] 1
    2835.  0E:0C2B  AE 03               	db $AE, $03; slide-up rep
    2836.  0E:0C2D  C2                  	db $C2		;[Wait] 3
    2837.  0E:0C2E  0E                  	db $0E		;[Note] 15
    2838.  0E:0C2F  C3                  	db $C3		;[Wait] 4
    2839.  0E:0C30  02                  	db $02		;[Note] 3
    2840.  0E:0C31                      				;[Skip delay] 4
    2841.  0E:0C31  02                  	db $02		;[Note] 3
    2842.  0E:0C32  C2                  	db $C2		;[Wait] 3
    2843.  0E:0C33  A5 20               	db $A5, $20; slide-down
    2844.  0E:0C35  C0                  	db $C0		;[Wait] 1
    2845.  0E:0C36  AF 04               	db $AF, $04; slide-down rep
    2846.  0E:0C38  C3                  	db $C3		;[Wait] 4
    2847.  0E:0C39  02                  	db $02		;[Note] 3
    2848.  0E:0C3A  C7                  	db $C7		;[Wait] 8
    2849.  0E:0C3B  02                  	db $02		;[Note] 3
    2850.  0E:0C3C  C3                  	db $C3		;[Wait] 4
    2851.  0E:0C3D  A4 22               	db $A4, $22; slide-up
    2852.  0E:0C3F  C0                  	db $C0		;[Wait] 1
    2853.  0E:0C40  AE 03               	db $AE, $03; slide-up rep
    2854.  0E:0C42  C2                  	db $C2		;[Wait] 3
    2855.  0E:0C43  0E                  	db $0E		;[Note] 15
    2856.  0E:0C44  C3                  	db $C3		;[Wait] 4
    2857.  0E:0C45  02                  	db $02		;[Note] 3
    2858.  0E:0C46                      				;[Skip delay] 4
    2859.  0E:0C46  02                  	db $02		;[Note] 3
    2860.  0E:0C47  C2                  	db $C2		;[Wait] 3
    2861.  0E:0C48  A5 20               	db $A5, $20; slide-down
    2862.  0E:0C4A  C0                  	db $C0		;[Wait] 1
    2863.  0E:0C4B  AF 04               	db $AF, $04; slide-down rep
    2864.  0E:0C4D  C3                  	db $C3		;[Wait] 4
    2865.  0E:0C4E  02                  	db $02		;[Note] 3
    2866.  0E:0C4F  C5                  	db $C5		;[Wait] 6
    2867.  0E:0C50  0E                  	db $0E		;[Note] 15
    2868.  0E:0C51  C1                  	db $C1		;[Wait] 2
    2869.  0E:0C52  BF                  	db $BF		;[End-Of-Track]
    2870.  0E:0C53                      .track_39:
    2871.  0E:0C53  2A                  	db $2A		;[Note] 43
    2872.  0E:0C54  6F                  	db $6F		;[Volume] 15
    2873.  0E:0C55  84                  	db $84		;[Instrument] 21
    2874.  0E:0C56  C1                  	db $C1		;[Wait] 2
    2875.  0E:0C57  2A                  	db $2A		;[Note] 43
    2876.  0E:0C58  CD                  	db $CD		;[Wait] 14
    2877.  0E:0C59  2B                  	db $2B		;[Note] 44
    2878.  0E:0C5A  C1                  	db $C1		;[Wait] 2
    2879.  0E:0C5B  2B                  	db $2B		;[Note] 44
    2880.  0E:0C5C  CD                  	db $CD		;[Wait] 14
    2881.  0E:0C5D  2B                  	db $2B		;[Note] 44
    2882.  0E:0C5E  C1                  	db $C1		;[Wait] 2
    2883.  0E:0C5F  2B                  	db $2B		;[Note] 44
    2884.  0E:0C60  CD                  	db $CD		;[Wait] 14
    2885.  0E:0C61  0E                  	db $0E		;[Note] 15
    2886.  0E:0C62  C1                  	db $C1		;[Wait] 2
    2887.  0E:0C63  0E                  	db $0E		;[Note] 15
    2888.  0E:0C64  C7                  	db $C7		;[Wait] 8
    2889.  0E:0C65  1F                  	db $1F		;[Note] 32
    2890.  0E:0C66  C1                  	db $C1		;[Wait] 2
    2891.  0E:0C67  1F                  	db $1F		;[Note] 32
    2892.  0E:0C68                      				;[Skip delay] 2
    2893.  0E:0C68  1F                  	db $1F		;[Note] 32
    2894.  0E:0C69                      				;[Skip delay] 2
    2895.  0E:0C69  BF                  	db $BF		;[End-Of-Track]
    2896.  0E:0C6A                      .track_40:
    2897.  0E:0C6A  3A                  	db $3A		;[Note] 59
    2898.  0E:0C6B  6A                  	db $6A		;[Volume] 10
    2899.  0E:0C6C  7C                  	db $7C		;[Instrument] 13
    2900.  0E:0C6D  C0                  	db $C0		;[Wait] 1
    2901.  0E:0C6E  39                  	db $39		;[Note] 58
    2902.  0E:0C6F                      				;[Skip delay] 1
    2903.  0E:0C6F  33                  	db $33		;[Note] 52
    2904.  0E:0C70                      				;[Skip delay] 1
    2905.  0E:0C70  32                  	db $32		;[Note] 51
    2906.  0E:0C71                      				;[Skip delay] 1
    2907.  0E:0C71  3A                  	db $3A		;[Note] 59
    2908.  0E:0C72                      				;[Skip delay] 1
    2909.  0E:0C72  39                  	db $39		;[Note] 58
    2910.  0E:0C73                      				;[Skip delay] 1
    2911.  0E:0C73  33                  	db $33		;[Note] 52
    2912.  0E:0C74                      				;[Skip delay] 1
    2913.  0E:0C74  32                  	db $32		;[Note] 51
    2914.  0E:0C75                      				;[Skip delay] 1
    2915.  0E:0C75  3A                  	db $3A		;[Note] 59
    2916.  0E:0C76                      				;[Skip delay] 1
    2917.  0E:0C76  39                  	db $39		;[Note] 58
    2918.  0E:0C77                      				;[Skip delay] 1
    2919.  0E:0C77  33                  	db $33		;[Note] 52
    2920.  0E:0C78                      				;[Skip delay] 1
    2921.  0E:0C78  32                  	db $32		;[Note] 51
    2922.  0E:0C79                      				;[Skip delay] 1
    2923.  0E:0C79  3A                  	db $3A		;[Note] 59
    2924.  0E:0C7A                      				;[Skip delay] 1
    2925.  0E:0C7A  39                  	db $39		;[Note] 58
    2926.  0E:0C7B                      				;[Skip delay] 1
    2927.  0E:0C7B  33                  	db $33		;[Note] 52
    2928.  0E:0C7C                      				;[Skip delay] 1
    2929.  0E:0C7C  32                  	db $32		;[Note] 51
    2930.  0E:0C7D                      				;[Skip delay] 1
    2931.  0E:0C7D  3E                  	db $3E		;[Note] 63
    2932.  0E:0C7E                      				;[Skip delay] 1
    2933.  0E:0C7E  3C                  	db $3C		;[Note] 61
    2934.  0E:0C7F                      				;[Skip delay] 1
    2935.  0E:0C7F  37                  	db $37		;[Note] 56
    2936.  0E:0C80                      				;[Skip delay] 1
    2937.  0E:0C80  35                  	db $35		;[Note] 54
    2938.  0E:0C81                      				;[Skip delay] 1
    2939.  0E:0C81  3E                  	db $3E		;[Note] 63
    2940.  0E:0C82                      				;[Skip delay] 1
    2941.  0E:0C82  3C                  	db $3C		;[Note] 61
    2942.  0E:0C83                      				;[Skip delay] 1
    2943.  0E:0C83  37                  	db $37		;[Note] 56
    2944.  0E:0C84                      				;[Skip delay] 1
    2945.  0E:0C84  35                  	db $35		;[Note] 54
    2946.  0E:0C85                      				;[Skip delay] 1
    2947.  0E:0C85  3E                  	db $3E		;[Note] 63
    2948.  0E:0C86                      				;[Skip delay] 1
    2949.  0E:0C86  3C                  	db $3C		;[Note] 61
    2950.  0E:0C87                      				;[Skip delay] 1
    2951.  0E:0C87  37                  	db $37		;[Note] 56
    2952.  0E:0C88                      				;[Skip delay] 1
    2953.  0E:0C88  35                  	db $35		;[Note] 54
    2954.  0E:0C89                      				;[Skip delay] 1
    2955.  0E:0C89  3E                  	db $3E		;[Note] 63
    2956.  0E:0C8A                      				;[Skip delay] 1
    2957.  0E:0C8A  3C                  	db $3C		;[Note] 61
    2958.  0E:0C8B                      				;[Skip delay] 1
    2959.  0E:0C8B  37                  	db $37		;[Note] 56
    2960.  0E:0C8C                      				;[Skip delay] 1
    2961.  0E:0C8C  35                  	db $35		;[Note] 54
    2962.  0E:0C8D                      				;[Skip delay] 1
    2963.  0E:0C8D  3F                  	db $3F		;[Note] 64
    2964.  0E:0C8E                      				;[Skip delay] 1
    2965.  0E:0C8E  3E                  	db $3E		;[Note] 63
    2966.  0E:0C8F                      				;[Skip delay] 1
    2967.  0E:0C8F  37                  	db $37		;[Note] 56
    2968.  0E:0C90                      				;[Skip delay] 1
    2969.  0E:0C90  35                  	db $35		;[Note] 54
    2970.  0E:0C91                      				;[Skip delay] 1
    2971.  0E:0C91  3F                  	db $3F		;[Note] 64
    2972.  0E:0C92                      				;[Skip delay] 1
    2973.  0E:0C92  3E                  	db $3E		;[Note] 63
    2974.  0E:0C93                      				;[Skip delay] 1
    2975.  0E:0C93  37                  	db $37		;[Note] 56
    2976.  0E:0C94                      				;[Skip delay] 1
    2977.  0E:0C94  35                  	db $35		;[Note] 54
    2978.  0E:0C95                      				;[Skip delay] 1
    2979.  0E:0C95  3F                  	db $3F		;[Note] 64
    2980.  0E:0C96                      				;[Skip delay] 1
    2981.  0E:0C96  3E                  	db $3E		;[Note] 63
    2982.  0E:0C97                      				;[Skip delay] 1
    2983.  0E:0C97  37                  	db $37		;[Note] 56
    2984.  0E:0C98                      				;[Skip delay] 1
    2985.  0E:0C98  35                  	db $35		;[Note] 54
    2986.  0E:0C99                      				;[Skip delay] 1
    2987.  0E:0C99  3F                  	db $3F		;[Note] 64
    2988.  0E:0C9A                      				;[Skip delay] 1
    2989.  0E:0C9A  3E                  	db $3E		;[Note] 63
    2990.  0E:0C9B                      				;[Skip delay] 1
    2991.  0E:0C9B  37                  	db $37		;[Note] 56
    2992.  0E:0C9C                      				;[Skip delay] 1
    2993.  0E:0C9C  35                  	db $35		;[Note] 54
    2994.  0E:0C9D                      				;[Skip delay] 1
    2995.  0E:0C9D  43                  	db $43		;[Note] 68
    2996.  0E:0C9E                      				;[Skip delay] 1
    2997.  0E:0C9E  42                  	db $42		;[Note] 67
    2998.  0E:0C9F                      				;[Skip delay] 1
    2999.  0E:0C9F  3F                  	db $3F		;[Note] 64
    3000.  0E:0CA0                      				;[Skip delay] 1
    3001.  0E:0CA0  3E                  	db $3E		;[Note] 63
    3002.  0E:0CA1                      				;[Skip delay] 1
    3003.  0E:0CA1  43                  	db $43		;[Note] 68
    3004.  0E:0CA2                      				;[Skip delay] 1
    3005.  0E:0CA2  42                  	db $42		;[Note] 67
    3006.  0E:0CA3                      				;[Skip delay] 1
    3007.  0E:0CA3  3F                  	db $3F		;[Note] 64
    3008.  0E:0CA4                      				;[Skip delay] 1
    3009.  0E:0CA4  3E                  	db $3E		;[Note] 63
    3010.  0E:0CA5                      				;[Skip delay] 1
    3011.  0E:0CA5  43                  	db $43		;[Note] 68
    3012.  0E:0CA6                      				;[Skip delay] 1
    3013.  0E:0CA6  42                  	db $42		;[Note] 67
    3014.  0E:0CA7                      				;[Skip delay] 1
    3015.  0E:0CA7  3F                  	db $3F		;[Note] 64
    3016.  0E:0CA8                      				;[Skip delay] 1
    3017.  0E:0CA8  3E                  	db $3E		;[Note] 63
    3018.  0E:0CA9                      				;[Skip delay] 1
    3019.  0E:0CA9  43                  	db $43		;[Note] 68
    3020.  0E:0CAA                      				;[Skip delay] 1
    3021.  0E:0CAA  42                  	db $42		;[Note] 67
    3022.  0E:0CAB                      				;[Skip delay] 1
    3023.  0E:0CAB  3F                  	db $3F		;[Note] 64
    3024.  0E:0CAC                      				;[Skip delay] 1
    3025.  0E:0CAC  3E                  	db $3E		;[Note] 63
    3026.  0E:0CAD                      				;[Skip delay] 1
    3027.  0E:0CAD  BF                  	db $BF		;[End-Of-Track]
    3028.  0E:0CAE                      .track_41:
    3029.  0E:0CAE  02                  	db $02		;[Note] 3
    3030.  0E:0CAF  6F                  	db $6F		;[Volume] 15
    3031.  0E:0CB0  85                  	db $85		;[Instrument] 22
    3032.  0E:0CB1  C1                  	db $C1		;[Wait] 2
    3033.  0E:0CB2  02                  	db $02		;[Note] 3
    3034.  0E:0CB3  C1                  	db $C1		;[Wait..] 2
    3035.  0E:0CB4  A5 03               	db $A5, $03; slide-down
    3036.  0E:0CB6  C0                  	db $C0		;[Wait] 1
    3037.  0E:0CB7  AF 06               	db $AF, $06; slide-down rep
    3038.  0E:0CB9                      				;[Skip delay] 1
    3039.  0E:0CB9  60                  	db $60		;[Note] 97
    3040.  0E:0CBA  C9                  	db $C9		;[Wait] 10
    3041.  0E:0CBB  02                  	db $02		;[Note] 3
    3042.  0E:0CBC  C1                  	db $C1		;[Wait] 2
    3043.  0E:0CBD  02                  	db $02		;[Note] 3
    3044.  0E:0CBE  C1                  	db $C1		;[Wait..] 2
    3045.  0E:0CBF  A5 03               	db $A5, $03; slide-down
    3046.  0E:0CC1  C0                  	db $C0		;[Wait] 1
    3047.  0E:0CC2  AF 06               	db $AF, $06; slide-down rep
    3048.  0E:0CC4                      				;[Skip delay] 1
    3049.  0E:0CC4  60                  	db $60		;[Note] 97
    3050.  0E:0CC5  C9                  	db $C9		;[Wait] 10
    3051.  0E:0CC6  02                  	db $02		;[Note] 3
    3052.  0E:0CC7  C1                  	db $C1		;[Wait] 2
    3053.  0E:0CC8  02                  	db $02		;[Note] 3
    3054.  0E:0CC9  C1                  	db $C1		;[Wait..] 2
    3055.  0E:0CCA  A5 03               	db $A5, $03; slide-down
    3056.  0E:0CCC  C0                  	db $C0		;[Wait] 1
    3057.  0E:0CCD  AF 06               	db $AF, $06; slide-down rep
    3058.  0E:0CCF                      				;[Skip delay] 1
    3059.  0E:0CCF  60                  	db $60		;[Note] 97
    3060.  0E:0CD0  D3                  	db $D3		;[Wait] 20
    3061.  0E:0CD1  1A                  	db $1A		;[Note] 27
    3062.  0E:0CD2  C1                  	db $C1		;[Wait] 2
    3063.  0E:0CD3  1A                  	db $1A		;[Note] 27
    3064.  0E:0CD4                      				;[Skip delay] 2
    3065.  0E:0CD4  02                  	db $02		;[Note] 3
    3066.  0E:0CD5                      				;[Skip delay] 2
    3067.  0E:0CD5  BF                  	db $BF		;[End-Of-Track]
    3068.  0E:0CD6                      .track_42:
    3069.  0E:0CD6  C0                  	db $C0		;[Wait] 1
    3070.  0E:0CD7  60                  	db $60		;[Note] 97
    3071.  0E:0CD8  C2                  	db $C2		;[Wait] 3
    3072.  0E:0CD9  C0                  	db $C0		;[Wait] 1
    3073.  0E:0CDA  BF                  	db $BF		;[End-Of-Track]
    3074.  0E:0CDB                      .track_43:
    3075.  0E:0CDB  C0                  	db $C0		;[Wait] 1
    3076.  0E:0CDC  60                  	db $60		;[Note] 97
    3077.  0E:0CDD  C3                  	db $C3		;[Wait] 4
    3078.  0E:0CDE  BF                  	db $BF		;[End-Of-Track]
    3079.  0E:0CDF                      .track_44:
    3080.  0E:0CDF  BF                  	db $BF		;[End-Of-Track]
    3081.  0E:0CE0                      ; [ Song sub-track data ]
     407   0E:0CE0                      	include	"..\TTplayer\code\ttreplayDAT.asm"
       1.  0E:0CE0                      
       2.  0E:0CE0  00 (128)            	ds 8*16, 0
       3.  0E:0D60                      _VOLUME_TABLE
       4.  0E:0D60  (0100)              	incbin ".\voltable_combined.bin"	
       5.  0E:0E60                      
       6.  0E:0E60                      ;Konami values found in	Nemesis 2 replayer.
       7.  0E:0E60  (0E:0D40)           C_PER		equ	$6a*32	
       8.  0E:0E60  (0E:0C80)           C1_PER	equ	$64*32
       9.  0E:0E60  (0E:0BC0)           D_PER		equ	$5e*32
      10.  0E:0E60  (0E:0B20)           D1_PER	equ	$59*32
      11.  0E:0E60  (0E:0A80)           E_PER		equ	$54*32
      12.  0E:0E60  (0E:09E0)           F_PER		equ	$4f*32
      13.  0E:0E60  (0E:0940)           F1_PER	equ	$4a*32
      14.  0E:0E60  (0E:08C0)           G_PER		equ	$46*32
      15.  0E:0E60  (0E:0840)           G1_PER	equ	$42*32
      16.  0E:0E60  (0E:07E0)           A_PER		equ	$3f*32
      17.  0E:0E60  (0E:0760)           A1_PER	equ	$3b*32
      18.  0E:0E60  (0E:0700)           B_PER		equ	$38*32
      19.  0E:0E60                      
      20.  0E:0E60                      TRACK_ToneTable:	
      21.  0E:0E60                      	dw C_PER/1	,C1_PER/1  ,D_PER/1  ,D1_PER/1  ,E_PER/1	,F_PER/1  ,F1_PER/1  ,G_PER/1	 ,G1_PER/1	,A_PER/1  ,A1_PER/1  ,B_PER/1
      21.  0E:0E60  40 0D 80 0C C0 0B 20 0B 80 0A E0 09 40 09 C0 08 
      21.  0E:0E70  40 08 E0 07 60 07 00 07 
      22.  0E:0E78                      	dw C_PER/2	,C1_PER/2  ,D_PER/2  ,D1_PER/2  ,E_PER/2	,F_PER/2  ,F1_PER/2  ,G_PER/2	 ,G1_PER/2	,A_PER/2  ,A1_PER/2  ,B_PER/2
      22.  0E:0E78  A0 06 40 06 E0 05 90 05 40 05 F0 04 A0 04 60 04 
      22.  0E:0E88  20 04 F0 03 B0 03 80 03 
      23.  0E:0E90                      	dw C_PER/4	,C1_PER/4  ,D_PER/4  ,D1_PER/4  ,E_PER/4	,F_PER/4  ,F1_PER/4  ,G_PER/4	 ,G1_PER/4	,A_PER/4  ,A1_PER/4  ,B_PER/4
      23.  0E:0E90  50 03 20 03 F0 02 C8 02 A0 02 78 02 50 02 30 02 
      23.  0E:0EA0  10 02 F8 01 D8 01 C0 01 
      24.  0E:0EA8                      	dw C_PER/8	,C1_PER/8  ,D_PER/8  ,D1_PER/8  ,E_PER/8	,F_PER/8  ,F1_PER/8  ,G_PER/8	 ,G1_PER/8	,A_PER/8  ,A1_PER/8  ,B_PER/8
      24.  0E:0EA8  A8 01 90 01 78 01 64 01 50 01 3C 01 28 01 18 01 
      24.  0E:0EB8  08 01 FC 00 EC 00 E0 00 
      25.  0E:0EC0                      	dw C_PER/16	,C1_PER/16 ,D_PER/16 ,D1_PER/16 ,E_PER/16	,F_PER/16 ,F1_PER/16 ,G_PER/16 ,G1_PER/16	,A_PER/16 ,A1_PER/16 ,B_PER/16
      25.  0E:0EC0  D4 00 C8 00 BC 00 B2 00 A8 00 9E 00 94 00 8C 00 
      25.  0E:0ED0  84 00 7E 00 76 00 70 00 
      26.  0E:0ED8                      	dw C_PER/32	,C1_PER/32 ,D_PER/32 ,D1_PER/32 ,E_PER/32	,F_PER/32 ,F1_PER/32 ,G_PER/32 ,G1_PER/32	,A_PER/32 ,A1_PER/32 ,B_PER/32
      26.  0E:0ED8  6A 00 64 00 5E 00 59 00 54 00 4F 00 4A 00 46 00 
      26.  0E:0EE8  42 00 3F 00 3B 00 38 00 
      27.  0E:0EF0                      	dw C_PER/64	,C1_PER/64 ,D_PER/64 ,D1_PER/64 ,E_PER/64	,F_PER/64 ,F1_PER/64 ,G_PER/64 ,G1_PER/64	,A_PER/64 ,A1_PER/64 ,B_PER/64
      27.  0E:0EF0  35 00 32 00 2F 00 2C 00 2A 00 27 00 25 00 23 00 
      27.  0E:0F00  21 00 1F 00 1D 00 1C 00 
      28.  0E:0F08                      	dw C_PER/128,C1_PER/128,D_PER/128,D1_PER/128,E_PER/128,F_PER/128,F1_PER/128,G_PER/128,G1_PER/128,A_PER/128,A1_PER/128,B_PER/128
      28.  0E:0F08  1A 00 19 00 17 00 16 00 15 00 13 00 12 00 11 00 
      28.  0E:0F18  10 00 0F 00 0E 00 0E 00 
      29.  0E:0F20                      
      30.  0E:0F20                      
      31.  0E:0F20                      TRACK_Vibrato_sine:
      32.  0E:0F20                      	db	 0*2,	2*2, 4*2, 7*2,11*2,16*2,22*2,28*2,35*2,43*2,51*2,59*2,68*2,77*2,87*2,96*2
      32.  0E:0F20  00 04 08 0E 16 20 2C 38 46 56 66 76 88 9A AE C0 
      33.  0E:0F30                      	db	96*2,86*2,77*2,68*2,59*2,51*2,43*2,35*2,28*2,22*2,16*2,11*2, 7*2,	4*2, 2*2, 0*2
      33.  0E:0F30  C0 AC 9A 88 76 66 56 46 38 2C 20 16 0E 08 04 00 
      34.  0E:0F40                      
      35.  0E:0F40                      TRACK_Vibrato_triangle:
      36.  0E:0F40                      	db	 0, 6,12,18,24,30,36,42,48,54,60,66,72,78,84,90
      36.  0E:0F40  00 06 0C 12 18 1E 24 2A 30 36 3C 42 48 4E 54 5A 
      37.  0E:0F50                      	db	96,90,84,78,72,66,60,54,48,42,36,30,24,18,12, 6
      37.  0E:0F50  60 5A 54 4E 48 42 3C 36 30 2A 24 1E 18 12 0C 06 
      38.  0E:0F60                      
      39.  0E:0F60                      TRACK_Vibrato_pulse:
      40.  0E:0F60                      	db	255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255
      40.  0E:0F60  FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 
      41.  0E:0F70                      	db      0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0	
      41.  0E:0F70  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
      42.  0E:0F80                      	
     408   0E:0F80                      end_demo_song:	
     409   0E:0F80                      	page 0,1
     410   01:6000                      	include	"..\TTplayer\code\ttreplay.asm"
       1.  01:6000                      ;=================================
       2.  01:6000                      ; TriloTracker re-player v0.3
       3.  01:6000                      ;
       4.  01:6000                      ; 
       5.  01:6000                      ; Also expects the code to run as a cartridge with SCC mapper
       6.  01:6000                      ;================================
       7.  01:6000                      	
       8.  01:6000                      ;===============================
       9.  01:6000                      ; todo:
      10.  01:6000                      ; - add external SCC support through conditional code.
      11.  01:6000                      ; - add replayer speed up through conditional code.
      12.  01:6000                      ; - optimize replayer code
      13.  01:6000                      ; - instructions for external usage of the RAM variables (setting PSG/SCC base volumes etc)
      14.  01:6000                      
      15.  01:6000                      	
      16.  01:6000                      ;define EXTERNAL_SCC 
      17.  01:6000                      define INTERNAL_SCC	
      18.  01:6000                      	
      19.  01:6000                      	
      20.  01:6000                      ;===========================================================
      21.  01:6000                      ; ---	replay_init
      22.  01:6000                      ; Initialize replayer data
      23.  01:6000                      ; 
      24.  01:6000                      ; Input: none
      25.  01:6000                      ;===========================================================
      26.  01:6000                      replay_init:
      27.  01:6000  3E 08               	ld	a,8
      28.  01:6002  CD 3E 60            	call	replay_set_SCC_balance
      29.  01:6005  3E 08               	ld	a,8
      30.  01:6007  CD 45 60            	call	replay_set_PSG_balance
      31.  01:600A                      
      32.  01:600A  AF                  	xor	a
      33.  01:600B  32 0F C0            	ld	(replay_mode),a	
      34.  01:600E                      	
      35.  01:600E  C9                  	ret
      36.  01:600F                      
      37.  01:600F                      ;===========================================================
      38.  01:600F                      ; ---	replay_pause
      39.  01:600F                      ; Stop/Restart music playback
      40.  01:600F                      ; 
      41.  01:600F                      ; Input: none
      42.  01:600F                      ;===========================================================
      43.  01:600F                      replay_pause:
      44.  01:600F  3A 0F C0            	ld	a,(replay_mode)
      45.  01:6012  A7                  	and	a
      46.  01:6013  CA 24 60            	jp	z,_replay_pause_r
      47.  01:6016                      	;-- stop decding and processing music data
      48.  01:6016  AF                  	xor	a
      49.  01:6017  32 0F C0            	ld	(replay_mode),a
      50.  01:601A                      	;-- set mixers to silence.
      51.  01:601A  3E 3F               	ld 	a,0x3F
      52.  01:601C  32 A6 C1            	ld	(AY_regMIXER),a 
      53.  01:601F  AF                  	xor	a
      54.  01:6020  32 3C C2            	ld	(SCC_regMIXER),a
      55.  01:6023  C9                  	ret
      56.  01:6024                      _replay_pause_r:	
      57.  01:6024                      	;-- enable music decoding and processing
      58.  01:6024  3E 01               	ld	a,1
      59.  01:6026  32 0F C0            	ld	(replay_mode),a
      60.  01:6029  C9                  	ret
      61.  01:602A                      
      62.  01:602A                      	
      63.  01:602A                      ;===========================================================
      64.  01:602A                      ; ---	replay_fade_out
      65.  01:602A                      ; Fade out the music. 
      66.  01:602A                      ; Once the sound is silence the replayer is paused.
      67.  01:602A                      ;
      68.  01:602A                      ; in: [A] fade speed (1 - 255)
      69.  01:602A                      ;===========================================================	
      70.  01:602A                      replay_fade_out:
      71.  01:602A  32 10 C0            	ld	(replay_fade),a
      72.  01:602D  32 11 C0            	ld	(replay_fade_timer),a
      73.  01:6030  AF                  	xor	a
      74.  01:6031  32 12 C0            	ld	(replay_fade_vol),a
      75.  01:6034  C9                  	ret
      76.  01:6035                      
      77.  01:6035                      
      78.  01:6035                      ;===========================================================
      79.  01:6035                      ; ---	replay_transpose
      80.  01:6035                      ; Transposes the whole song. 
      81.  01:6035                      ; TT effect command 'E8y - Global transpose' will undo 
      82.  01:6035                      ; this effect.
      83.  01:6035                      ;
      84.  01:6035                      ; in: [DE] number of halve tones (pos or neg) to transpose. 
      85.  01:6035                      ;===========================================================
      86.  01:6035                      replay_transpose:
      87.  01:6035  21 60 0E            	ld	hl,TRACK_ToneTable;(replay_Tonetable)
      88.  01:6038  19                  	add	hl,de	
      89.  01:6039  19                  	add	hl,de
      90.  01:603A  22 18 C0            	ld	(replay_Tonetable),hl	
      91.  01:603D  C9                  	ret
      92.  01:603E                      	
      93.  01:603E                      ;===========================================================
      94.  01:603E                      ; ---	replay_set_SCC_balance
      95.  01:603E                      ; Set the main volume for the SCC chip. This enables for
      96.  01:603E                      ; setting the balance between SCC en PSG as some MSX models 
      97.  01:603E                      ; default balance differs. 
      98.  01:603E                      ;
      99.  01:603E                      ; in: [A] master volume (0-7) 0=halve volume, 7=full volume. 
     100.  01:603E                      ;===========================================================	
     101.  01:603E                      replay_set_SCC_balance:
     102.  01:603E  CD 4C 60            	call	_getnewbalancebase
     103.  01:6041  22 04 C0            	ld	(replay_mainSCCvol),hl	
     104.  01:6044  C9                  	ret
     105.  01:6045                      	
     106.  01:6045                      ;===========================================================
     107.  01:6045                      ; ---	replay_set_PSG_balance
     108.  01:6045                      ; Set the main volume for the PSG chip. This enables for
     109.  01:6045                      ; setting the balance between SCC en PSG as some MSX models 
     110.  01:6045                      ; default balance differs. 
     111.  01:6045                      ;
     112.  01:6045                      ; in: [A] master volume (0-7) 0=halve volume, 7=full volume. 
     113.  01:6045                      ;===========================================================	
     114.  01:6045                      replay_set_PSG_balance:
     115.  01:6045  CD 4C 60            	call	_getnewbalancebase
     116.  01:6048  22 02 C0            	ld	(replay_mainPSGvol),hl	
     117.  01:604B  C9                  	ret
     118.  01:604C                      	
     119.  01:604C                      _getnewbalancebase:
     120.  01:604C  07                  	rlca
     121.  01:604D  07                  	rlca
     122.  01:604E  07                  	rlca
     123.  01:604F  07                  	rlca
     124.  01:6050  21 E0 0C            	ld	hl,_VOLUME_TABLE-128
     125.  01:6053  E6 F0               	and	$f0
     126.  01:6055  85                  	add	a,l
     127.  01:6056  6F                  	ld	l,a
     128.  01:6057  D0                  	ret 	nc
     129.  01:6058  24                  	inc	h
     130.  01:6059  C9                  	ret
     131.  01:605A                      	
     132.  01:605A                      	
     133.  01:605A                      	
     134.  01:605A                      	
     135.  01:605A                      	
     136.  01:605A                      	
     137.  01:605A                      ;===========================================================
     138.  01:605A                      ; ---	replay_loadsong
     139.  01:605A                      ; Initialize a song for playback
     140.  01:605A                      ; 
     141.  01:605A                      ; Input [HL] points to start song
     142.  01:605A                      ;===========================================================
     143.  01:605A                      replay_loadsong:
     144.  01:605A                      	;--- Get the start speed.
     145.  01:605A  7E                  	ld	a,(hl)	
     146.  01:605B  23                  	inc	hl
     147.  01:605C  32 0C C0            	ld	(replay_speed),a
     148.  01:605F                      
     149.  01:605F                      	;--- Set waveform start
     150.  01:605F  5E                  	ld	e,(hl)
     151.  01:6060  23                  	inc	hl
     152.  01:6061  56                  	ld 	d,(hl)
     153.  01:6062  23                  	inc	hl
     154.  01:6063  7B                  	ld	a,e				; check for external waveforms
     155.  01:6064  B2                  	or	d
     156.  01:6065  CA 6C 60            	jp	z,.nwu			; is address is $0000 then do not update
     157.  01:6068  ED 53 06 C0         	ld	(replay_wavebase),de
     158.  01:606C                      .nwu:	
     159.  01:606C                      	;--- Set the instrument start
     160.  01:606C  5E                  	ld	e,(hl)
     161.  01:606D  23                  	inc	hl
     162.  01:606E  56                  	ld 	d,(hl)
     163.  01:606F  23                  	inc	hl
     164.  01:6070  7B                  	ld	a,e				; check for external instruments
     165.  01:6071  B2                  	or	d
     166.  01:6072  CA 79 60            	jp	z,.niu			; is address is $0000 then do not update
     167.  01:6075  ED 53 08 C0         	ld	(replay_insbase),de
     168.  01:6079                      .niu:
     169.  01:6079                      	;--- Set track pointers to start
     170.  01:6079  11 8F C1            	ld	de,TRACK_pointer1
     171.  01:607C  01 10 00            	ld	bc,16
     172.  01:607F  ED B0               	ldir
     173.  01:6081  22 0A C0            	ld	(replay_orderpointer),hl		; store pointer for next set
     174.  01:6084                      								; of track pointers
     175.  01:6084                      	;--- Initialize replayer variables.
     176.  01:6084  AF                  	xor	a
     177.  01:6085  32 0D C0            	ld	(replay_speed_subtimer),a
     178.  01:6088  32 1A C0            	ld	(replay_morph_active),a
     179.  01:608B  32 5E C0            	ld	(replay_morph_waveform),a
     180.  01:608E                      	
     181.  01:608E                      	;--- Erase channel data	in RAM
     182.  01:608E  01 2F 01            	ld	bc,TRACK_REC_SIZE*8-1
     183.  01:6091  21 5F C0            	ld	hl,TRACK_Chan1
     184.  01:6094  11 60 C0            	ld	de,TRACK_Chan1+1
     185.  01:6097  77                  	ld	(hl),a
     186.  01:6098  ED B0               	ldir
     187.  01:609A                      	
     188.  01:609A                      	;--- Silence the chips
     189.  01:609A  32 3C C2            	ld	(SCC_regMIXER),a
     190.  01:609D  32 A7 C1            	ld	(AY_regVOLA),a
     191.  01:60A0  32 A8 C1            	ld	(AY_regVOLB),a	
     192.  01:60A3  32 A9 C1            	ld	(AY_regVOLC),a
     193.  01:60A6  32 A5 C1            	ld	(AY_regNOISE),a
     194.  01:60A9  3E 3F               	ld	a,0x3f
     195.  01:60AB  32 A6 C1            	ld	(AY_regMIXER),a
     196.  01:60AE                      
     197.  01:60AE                      	;--- Set vibrato table
     198.  01:60AE  21 20 0F            	ld	hl,TRACK_Vibrato_sine
     199.  01:60B1  22 16 C0            	ld	(replay_vib_table),hl
     200.  01:60B4                      	
     201.  01:60B4                      	;--- Set the tone table base
     202.  01:60B4  21 60 0E            	ld	hl,TRACK_ToneTable
     203.  01:60B7  22 18 C0            	ld	(replay_Tonetable),hl
     204.  01:60BA                      
     205.  01:60BA  3E 01               	ld	a,1
     206.  01:60BC  32 0E C0            	ld	(replay_speed_timer),a
     207.  01:60BF  32 1B C0            	ld	(replay_morph_timer),a
     208.  01:60C2  32 1C C0            	ld	(replay_morph_speed),a
     209.  01:60C5  32 81 C0            	ld	(TRACK_Chan1+17+TRACK_Delay),a	
     210.  01:60C8  32 A7 C0            	ld	(TRACK_Chan2+17+TRACK_Delay),a		
     211.  01:60CB  32 CD C0            	ld	(TRACK_Chan3+17+TRACK_Delay),a	
     212.  01:60CE  32 F3 C0            	ld	(TRACK_Chan4+17+TRACK_Delay),a	
     213.  01:60D1  32 19 C1            	ld	(TRACK_Chan5+17+TRACK_Delay),a		
     214.  01:60D4  32 3F C1            	ld	(TRACK_Chan6+17+TRACK_Delay),a		
     215.  01:60D7  32 65 C1            	ld	(TRACK_Chan7+17+TRACK_Delay),a		
     216.  01:60DA  32 8B C1            	ld	(TRACK_Chan8+17+TRACK_Delay),a	
     217.  01:60DD                      	
     218.  01:60DD  3E FF               	ld	a,255
     219.  01:60DF  32 5F C0            	ld	(TRACK_Chan1+17+TRACK_Instrument),a	
     220.  01:60E2  32 85 C0            	ld	(TRACK_Chan2+17+TRACK_Instrument),a		
     221.  01:60E5  32 AB C0            	ld	(TRACK_Chan3+17+TRACK_Instrument),a	
     222.  01:60E8  32 D1 C0            	ld	(TRACK_Chan4+17+TRACK_Instrument),a	
     223.  01:60EB  32 F7 C0            	ld	(TRACK_Chan5+17+TRACK_Instrument),a		
     224.  01:60EE  32 1D C1            	ld	(TRACK_Chan6+17+TRACK_Instrument),a		
     225.  01:60F1  32 43 C1            	ld	(TRACK_Chan7+17+TRACK_Instrument),a		
     226.  01:60F4  32 69 C1            	ld	(TRACK_Chan8+17+TRACK_Instrument),a	
     227.  01:60F7                      
     228.  01:60F7                      IFDEF	EXTERNAL_SCC	
     229.  01:60F7                    ~ 	;--- Init the SCC	(waveforms too)
     230.  01:60F7                    ~ 	ld	a,(SCC_slot)
     231.  01:60F7                    ~ 	ld	h,0x80
     232.  01:60F7                    ~ 	call enaslt
     233.  01:60F7                    ~ ENDIF
     234.  01:60F7                      	
     235.  01:60F7  3E FF               	ld	a,255
     236.  01:60F9  32 D2 C0            	ld	(TRACK_Chan4+17+TRACK_Waveform),a
     237.  01:60FC  32 F8 C0            	ld	(TRACK_Chan5+17+TRACK_Waveform),a
     238.  01:60FF  32 1E C1            	ld	(TRACK_Chan6+17+TRACK_Waveform),a	
     239.  01:6102  32 44 C1            	ld	(TRACK_Chan7+17+TRACK_Waveform),a	
     240.  01:6105  3E 80               	ld	a,128
     241.  01:6107  32 DB C0            	ld	(TRACK_Chan4+17+TRACK_Flags),a
     242.  01:610A  32 01 C1            	ld	(TRACK_Chan5+17+TRACK_Flags),a
     243.  01:610D  32 27 C1            	ld	(TRACK_Chan6+17+TRACK_Flags),a	
     244.  01:6110  32 4D C1            	ld	(TRACK_Chan7+17+TRACK_Flags),a	
     245.  01:6113                      	
     246.  01:6113  CD 57 6B            	call scc_reg_update
     247.  01:6116                      	
     248.  01:6116                      IFDEF	EXTERNAL_SCC	
     249.  01:6116                    ~ 	ld	a,(mapper_slot)				
     250.  01:6116                    ~ 	ld	h,0x80
     251.  01:6116                    ~ 	call enaslt
     252.  01:6116                    ~ ENDIF	
     253.  01:6116                      
     254.  01:6116  CD CE 6A            	call	replay_route
     255.  01:6119                      	
     256.  01:6119                      	; end	is here
     257.  01:6119  3E 01               	ld	a,1
     258.  01:611B  32 0F C0            	ld	(replay_mode),a	
     259.  01:611E  C9                  	ret
     260.  01:611F                      
     261.  01:611F                      
     262.  01:611F                      
     263.  01:611F                      _replay_check_patternend:
     264.  01:611F  3A 81 C0            	ld 	a,(TRACK_Chan1+17+TRACK_Delay)
     265.  01:6122  3D                  	dec	a
     266.  01:6123  C2 85 62            	jp	nz,replay_decodedata_NO
     267.  01:6126                      	
     268.  01:6126  2A 8F C1            	ld	hl,(TRACK_pointer1)
     269.  01:6129  7E                  	ld	a,(hl)
     270.  01:612A                      	
     271.  01:612A                      	;--- check for end of pattern
     272.  01:612A  FE BF               	cp	191	
     273.  01:612C  C2 85 62            	jp	nz,replay_decodedata_NO
     274.  01:612F                      
     275.  01:612F                      	;--- Set track pointers to start
     276.  01:612F  2A 0A C0            	ld	hl,(replay_orderpointer)
     277.  01:6132  AF                  	xor	a
     278.  01:6133  BE                  	cp	(hl)
     279.  01:6134  C2 43 61            	jp	nz,.no_restart
     280.  01:6137  23                  	inc	hl
     281.  01:6138  BE                  	cp	(hl)
     282.  01:6139  2B                  	dec	hl
     283.  01:613A  C2 43 61            	jp	nz,.no_restart
     284.  01:613D                      	;--- next is restart order
     285.  01:613D  23                  	inc	hl
     286.  01:613E  23                  	inc	hl
     287.  01:613F  7E                  	ld	a,(hl)
     288.  01:6140  23                  	inc	hl
     289.  01:6141  66                  	ld	h,(hl)
     290.  01:6142  6F                  	ld	l,a
     291.  01:6143                      .no_restart:	
     292.  01:6143  11 8F C1            	ld	de,TRACK_pointer1
     293.  01:6146  01 10 00            	ld	bc,16
     294.  01:6149  ED B0               	ldir
     295.  01:614B  22 0A C0            	ld	(replay_orderpointer),hl		; store pointer for next set
     296.  01:614E                      								; of strack pointers
     297.  01:614E  C3 85 62            	jp	replay_decodedata_NO
     298.  01:6151                      
     299.  01:6151                      
     300.  01:6151                      ;===========================================================
     301.  01:6151                      ; ---	replay_play
     302.  01:6151                      ; Decode music data and process instruments and effects. 
     303.  01:6151                      ; Music chip registers will be prepared for replay_route 
     304.  01:6151                      ;
     305.  01:6151                      ; Input none
     306.  01:6151                      ;===========================================================	
     307.  01:6151                      replay_play:
     308.  01:6151  3A 0F C0            	ld	a,(replay_mode)
     309.  01:6154  A7                  	and	a
     310.  01:6155  C8                  	ret	z		; replay mode = 0	; halted
     311.  01:6156                      				
     312.  01:6156                      				; replay mode = 1	; active
     313.  01:6156                      	;--- The speed timer
     314.  01:6156  21 0E C0            	ld	hl,replay_speed_timer
     315.  01:6159  35                  	dec	(hl)
     316.  01:615A                      
     317.  01:615A  C2 1F 61            	jp	nz,_replay_check_patternend	
     318.  01:615D                      	
     319.  01:615D                      	;--- Re-init Timer == 0
     320.  01:615D  AF                  	xor	a
     321.  01:615E  ED 4B 0C C0         	ld	bc,(replay_speed)		; [b]	subtimer [c] speed
     322.  01:6162  CB 39               	srl	c				; bit	0 is halve speedstep
     323.  01:6164  8F                  	adc	a,a
     324.  01:6165  A8                  	xor	b				; alternate	speed	to have halve speed.
     325.  01:6166  32 0D C0            	ld	(replay_speed_subtimer),a
     326.  01:6169  81                  	add	c
     327.  01:616A  32 0E C0            	ld	(replay_speed_timer),a
     328.  01:616D                      ;===========================================================
     329.  01:616D                      ; ---	replay_decodedata
     330.  01:616D                      ; Process the patterndata 
     331.  01:616D                      ;===========================================================
     332.  01:616D                      replay_decodedata:
     333.  01:616D                      	;--- process the channels (tracks)
     334.  01:616D  21 81 C0            	ld 	hl,TRACK_Chan1+17+TRACK_Delay
     335.  01:6170  35                  	dec	(hl)
     336.  01:6171  C2 90 61            	jp	nz,.decode2
     337.  01:6174                      
     338.  01:6174  3A 69 C0            	ld	a,(TRACK_Chan1+17+TRACK_Flags)
     339.  01:6177  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     340.  01:6179  57                  	ld	d,a
     341.  01:617A  3A 67 C0            	ld	a,(TRACK_Chan1+17+TRACK_Note)	
     342.  01:617D  DD 21 70 C0         	ld	ix,TRACK_Chan1+17
     343.  01:6181  ED 4B 8F C1         	ld	bc,(TRACK_pointer1)
     344.  01:6185  CD AC 63            	call	replay_decode_chan
     345.  01:6188  ED 43 8F C1         	ld	(TRACK_pointer1),bc
     346.  01:618C  7A                  	ld	a,d
     347.  01:618D  32 69 C0            	ld	(TRACK_Chan1+17+TRACK_Flags),a	
     348.  01:6190                      
     349.  01:6190                      .decode2:	
     350.  01:6190  21 A7 C0            	ld 	hl,TRACK_Chan2+17+TRACK_Delay
     351.  01:6193  35                  	dec	(hl)
     352.  01:6194  C2 B3 61            	jp	nz,.decode3
     353.  01:6197                      
     354.  01:6197  3A 8F C0            	ld	a,(TRACK_Chan2+17+TRACK_Flags)
     355.  01:619A  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     356.  01:619C  57                  	ld	d,a
     357.  01:619D  3A 8D C0            	ld	a,(TRACK_Chan2+17+TRACK_Note)	
     358.  01:61A0  DD 21 96 C0         	ld	ix,TRACK_Chan2+17
     359.  01:61A4  ED 4B 91 C1         	ld	bc,(TRACK_pointer2)
     360.  01:61A8  CD AC 63            	call	replay_decode_chan
     361.  01:61AB  ED 43 91 C1         	ld	(TRACK_pointer2),bc
     362.  01:61AF  7A                  	ld	a,d				;'
     363.  01:61B0  32 8F C0            	ld	(TRACK_Chan2+17+TRACK_Flags),a	
     364.  01:61B3                      
     365.  01:61B3                      .decode3:
     366.  01:61B3  21 CD C0            	ld 	hl,TRACK_Chan3+17+TRACK_Delay
     367.  01:61B6  35                  	dec	(hl)
     368.  01:61B7  C2 D6 61            	jp	nz,.decode4
     369.  01:61BA                      
     370.  01:61BA  3A B5 C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     371.  01:61BD  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     372.  01:61BF  57                  	ld	d,a		;'
     373.  01:61C0  3A B3 C0            	ld	a,(TRACK_Chan3+17+TRACK_Note)	
     374.  01:61C3  DD 21 BC C0         	ld	ix,TRACK_Chan3+17
     375.  01:61C7  ED 4B 93 C1         	ld	bc,(TRACK_pointer3)
     376.  01:61CB  CD AC 63            	call	replay_decode_chan
     377.  01:61CE  ED 43 93 C1         	ld	(TRACK_pointer3),bc
     378.  01:61D2  7A                  	ld	a,d				;'
     379.  01:61D3  32 B5 C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a	
     380.  01:61D6                      
     381.  01:61D6                      .decode4:
     382.  01:61D6  21 F3 C0            	ld 	hl,TRACK_Chan4+17+TRACK_Delay
     383.  01:61D9  35                  	dec	(hl)
     384.  01:61DA  C2 F9 61            	jp	nz,.decode5
     385.  01:61DD                      
     386.  01:61DD  3A DB C0            	ld	a,(TRACK_Chan4+17+TRACK_Flags)
     387.  01:61E0  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     388.  01:61E2  57                  	ld 	d,a		;'
     389.  01:61E3  3A D9 C0            	ld	a,(TRACK_Chan4+17+TRACK_Note)	
     390.  01:61E6  DD 21 E2 C0         	ld	ix,TRACK_Chan4+17
     391.  01:61EA  ED 4B 95 C1         	ld	bc,(TRACK_pointer4)
     392.  01:61EE  CD AC 63            	call	replay_decode_chan
     393.  01:61F1  ED 43 95 C1         	ld	(TRACK_pointer4),bc
     394.  01:61F5  7A                  	ld	a,d			;'
     395.  01:61F6  32 DB C0            	ld	(TRACK_Chan4+17+TRACK_Flags),a	
     396.  01:61F9                      
     397.  01:61F9                      
     398.  01:61F9                      .decode5:
     399.  01:61F9  21 19 C1            	ld 	hl,TRACK_Chan5+17+TRACK_Delay
     400.  01:61FC  35                  	dec	(hl)
     401.  01:61FD  C2 1C 62            	jp	nz,.decode6
     402.  01:6200                      
     403.  01:6200  3A 01 C1            	ld	a,(TRACK_Chan5+17+TRACK_Flags)
     404.  01:6203  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     405.  01:6205  57                  	ld	d,a		;'
     406.  01:6206  3A FF C0            	ld	a,(TRACK_Chan5+17+TRACK_Note)	
     407.  01:6209  DD 21 08 C1         	ld	ix,TRACK_Chan5+17
     408.  01:620D  ED 4B 97 C1         	ld	bc,(TRACK_pointer5)
     409.  01:6211  CD AC 63            	call	replay_decode_chan
     410.  01:6214  ED 43 97 C1         	ld	(TRACK_pointer5),bc
     411.  01:6218  7A                  	ld	a,d			;'
     412.  01:6219  32 01 C1            	ld	(TRACK_Chan5+17+TRACK_Flags),a	
     413.  01:621C                      
     414.  01:621C                      
     415.  01:621C                      .decode6:
     416.  01:621C  21 3F C1            	ld 	hl,TRACK_Chan6+17+TRACK_Delay
     417.  01:621F  35                  	dec	(hl)
     418.  01:6220  C2 3F 62            	jp	nz,.decode7
     419.  01:6223                      
     420.  01:6223  3A 27 C1            	ld	a,(TRACK_Chan6+17+TRACK_Flags)
     421.  01:6226  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     422.  01:6228  57                  	ld	d,a		;'
     423.  01:6229  3A 25 C1            	ld	a,(TRACK_Chan6+17+TRACK_Note)	
     424.  01:622C  DD 21 2E C1         	ld	ix,TRACK_Chan6+17
     425.  01:6230  ED 4B 99 C1         	ld	bc,(TRACK_pointer6)
     426.  01:6234  CD AC 63            	call	replay_decode_chan
     427.  01:6237  ED 43 99 C1         	ld	(TRACK_pointer6),bc
     428.  01:623B  7A                  	ld	a,d				;'
     429.  01:623C  32 27 C1            	ld	(TRACK_Chan6+17+TRACK_Flags),a	
     430.  01:623F                      
     431.  01:623F                      
     432.  01:623F                      .decode7:
     433.  01:623F  21 65 C1            	ld 	hl,TRACK_Chan7+17+TRACK_Delay
     434.  01:6242  35                  	dec	(hl)
     435.  01:6243  C2 62 62            	jp	nz,.decode8
     436.  01:6246                      
     437.  01:6246  3A 4D C1            	ld	a,(TRACK_Chan7+17+TRACK_Flags)
     438.  01:6249  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     439.  01:624B  57                  	ld	d,a		;'
     440.  01:624C  3A 4B C1            	ld	a,(TRACK_Chan7+17+TRACK_Note)	
     441.  01:624F  DD 21 54 C1         	ld	ix,TRACK_Chan7+17
     442.  01:6253  ED 4B 9B C1         	ld	bc,(TRACK_pointer7)
     443.  01:6257  CD AC 63            	call	replay_decode_chan
     444.  01:625A  ED 43 9B C1         	ld	(TRACK_pointer7),bc
     445.  01:625E  7A                  	ld	a,d				;'
     446.  01:625F  32 4D C1            	ld	(TRACK_Chan7+17+TRACK_Flags),a	
     447.  01:6262                      
     448.  01:6262                      
     449.  01:6262                      .decode8:
     450.  01:6262  21 8B C1            	ld 	hl,TRACK_Chan8+17+TRACK_Delay
     451.  01:6265  35                  	dec	(hl)
     452.  01:6266  C2 85 62            	jp	nz,.decode_end
     453.  01:6269                      
     454.  01:6269  3A 73 C1            	ld	a,(TRACK_Chan8+17+TRACK_Flags)
     455.  01:626C  E6 F3               	and	11110011b		; reset B_TRGENV and B_TRGCMD
     456.  01:626E  57                  	ld	d,a		;'
     457.  01:626F  3A 71 C1            	ld	a,(TRACK_Chan8+17+TRACK_Note)	
     458.  01:6272  DD 21 7A C1         	ld	ix,TRACK_Chan8+17
     459.  01:6276  ED 4B 9D C1         	ld	bc,(TRACK_pointer8)
     460.  01:627A  CD AC 63            	call	replay_decode_chan
     461.  01:627D  ED 43 9D C1         	ld	(TRACK_pointer8),bc
     462.  01:6281  7A                  	ld	a,d				;'
     463.  01:6282  32 73 C1            	ld	(TRACK_Chan8+17+TRACK_Flags),a
     464.  01:6285                      		
     465.  01:6285                      .decode_end:
     466.  01:6285                      	; continue to process data
     467.  01:6285                      ;===========================================================
     468.  01:6285                      ; ---	replay_decodedata_NO
     469.  01:6285                      ; Process changes.
     470.  01:6285                      ; 
     471.  01:6285                      ; 
     472.  01:6285                      ;===========================================================
     473.  01:6285                      replay_decodedata_NO:
     474.  01:6285                      	;---- morph routine here
     475.  01:6285  3A 1A C0            	ld	a,(replay_morph_active)
     476.  01:6288  A7                  	and	a
     477.  01:6289  C4 9B 6B            	call	nz,replay_process_morph
     478.  01:628C                      
     479.  01:628C                      	;--- Initialize PSG Mixer and volume
     480.  01:628C  AF                  	xor	a
     481.  01:628D  32 3C C2            	ld	(SCC_regMIXER),a
     482.  01:6290                      
     483.  01:6290                      	;--- PSG balance
     484.  01:6290  2A 02 C0            	ld	hl,(replay_mainPSGvol)
     485.  01:6293  22 14 C0            	ld	(replay_mainvol),hl
     486.  01:6296                      
     487.  01:6296                      	;--- Process track 1
     488.  01:6296  DD 21 70 C0         	ld	ix,TRACK_Chan1+17
     489.  01:629A  3A 69 C0            	ld	a,(TRACK_Chan1+17+TRACK_Flags)
     490.  01:629D  57                  	ld	d,a
     491.  01:629E  CD E7 66            	call	replay_process_chan_AY
     492.  01:62A1  22 9F C1            	ld	(AY_regToneA),hl
     493.  01:62A4  7A                  	ld	a,d
     494.  01:62A5  32 69 C0            	ld	(TRACK_Chan1+17+TRACK_Flags),a	
     495.  01:62A8  3A 3B C2            	ld	a,(SCC_regVOLE)
     496.  01:62AB  32 A7 C1            	ld	(AY_regVOLA),a	
     497.  01:62AE                      
     498.  01:62AE                      	;--- Process track 2
     499.  01:62AE  DD 21 96 C0         	ld	ix,TRACK_Chan2+17
     500.  01:62B2  3A 8F C0            	ld	a,(TRACK_Chan2+17+TRACK_Flags)
     501.  01:62B5  57                  	ld	d,a
     502.  01:62B6  CD E7 66            	call	replay_process_chan_AY
     503.  01:62B9  22 A1 C1            	ld	(AY_regToneB),hl
     504.  01:62BC  7A                  	ld	a,d
     505.  01:62BD  32 8F C0            	ld	(TRACK_Chan2+17+TRACK_Flags),a	
     506.  01:62C0  3A 3B C2            	ld	a,(SCC_regVOLE)
     507.  01:62C3  32 A8 C1            	ld	(AY_regVOLB),a	
     508.  01:62C6                      
     509.  01:62C6                      	;--- Process track 3	
     510.  01:62C6  DD 21 BC C0         	ld	ix,TRACK_Chan3+17
     511.  01:62CA  3A B5 C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     512.  01:62CD  57                  	ld	d,a
     513.  01:62CE  CD E7 66            	call	replay_process_chan_AY
     514.  01:62D1  22 A3 C1            	ld	(AY_regToneC),hl
     515.  01:62D4  7A                  	ld	a,d
     516.  01:62D5  32 B5 C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a	
     517.  01:62D8  3A 3B C2            	ld	a,(SCC_regVOLE)
     518.  01:62DB  32 A9 C1            	ld	(AY_regVOLC),a	
     519.  01:62DE                      
     520.  01:62DE                      	;-- Convert mixer to AY
     521.  01:62DE  3A 3C C2            	ld	a,(SCC_regMIXER)		
     522.  01:62E1  CB 3F               	srl	a
     523.  01:62E3  CB 3F               	srl	a
     524.  01:62E5  EE 3F               	xor	0x3f
     525.  01:62E7  32 A6 C1            	ld	(AY_regMIXER),a
     526.  01:62EA                      
     527.  01:62EA                      
     528.  01:62EA                      	;--- set SCC balance
     529.  01:62EA  2A 04 C0            	ld	hl,(replay_mainSCCvol)
     530.  01:62ED  22 14 C0            	ld	(replay_mainvol),hl
     531.  01:62F0                      
     532.  01:62F0                      	
     533.  01:62F0  FD 26 00            	ld	iyh,0			; iyh stores the SCC chan#
     534.  01:62F3                      					; used for waveform updates
     535.  01:62F3                      	;--- Process track 4
     536.  01:62F3  DD 21 E2 C0         	ld	ix,TRACK_Chan4+17
     537.  01:62F7  3A DB C0            	ld	a,(TRACK_Chan4+17+TRACK_Flags)
     538.  01:62FA  57                  	ld	d,a
     539.  01:62FB  CD E7 66            	call	replay_process_chan_AY
     540.  01:62FE  22 2D C2            	ld	(SCC_regToneA),hl
     541.  01:6301  7A                  	ld	a,d
     542.  01:6302  32 DB C0            	ld	(TRACK_Chan4+17+TRACK_Flags),a	
     543.  01:6305  3A 3B C2            	ld	a,(SCC_regVOLE)
     544.  01:6308  32 37 C2            	ld	(SCC_regVOLA),a	
     545.  01:630B                      
     546.  01:630B                      	;--- Process track 5
     547.  01:630B  FD 24               	inc	iyh
     548.  01:630D                      	
     549.  01:630D  DD 21 08 C1         	ld	ix,TRACK_Chan5+17
     550.  01:6311  3A 01 C1            	ld	a,(TRACK_Chan5+17+TRACK_Flags)
     551.  01:6314  57                  	ld	d,a
     552.  01:6315  CD E7 66            	call	replay_process_chan_AY
     553.  01:6318  22 2F C2            	ld	(SCC_regToneB),hl
     554.  01:631B  7A                  	ld	a,d
     555.  01:631C  32 01 C1            	ld	(TRACK_Chan5+17+TRACK_Flags),a	
     556.  01:631F  3A 3B C2            	ld	a,(SCC_regVOLE)
     557.  01:6322  32 38 C2            	ld	(SCC_regVOLB),a	
     558.  01:6325                      
     559.  01:6325                      	;--- Process track 6
     560.  01:6325  FD 24               	inc	iyh
     561.  01:6327                      		
     562.  01:6327  DD 21 2E C1         	ld	ix,TRACK_Chan6+17
     563.  01:632B  3A 27 C1            	ld	a,(TRACK_Chan6+17+TRACK_Flags)
     564.  01:632E  57                  	ld	d,a
     565.  01:632F  CD E7 66            	call	replay_process_chan_AY
     566.  01:6332  22 31 C2            	ld	(SCC_regToneC),hl
     567.  01:6335  7A                  	ld	a,d
     568.  01:6336  32 27 C1            	ld	(TRACK_Chan6+17+TRACK_Flags),a	
     569.  01:6339  3A 3B C2            	ld	a,(SCC_regVOLE)
     570.  01:633C  32 39 C2            	ld	(SCC_regVOLC),a	
     571.  01:633F                      
     572.  01:633F                      	;--- Process track 7
     573.  01:633F  FD 24               	inc	iyh
     574.  01:6341                      		
     575.  01:6341  DD 21 54 C1         	ld	ix,TRACK_Chan7+17
     576.  01:6345  3A 4D C1            	ld	a,(TRACK_Chan7+17+TRACK_Flags)
     577.  01:6348  57                  	ld	d,a
     578.  01:6349  CD E7 66            	call	replay_process_chan_AY
     579.  01:634C  22 33 C2            	ld	(SCC_regToneD),hl
     580.  01:634F  7A                  	ld	a,d
     581.  01:6350  32 4D C1            	ld	(TRACK_Chan7+17+TRACK_Flags),a	
     582.  01:6353  3A 3B C2            	ld	a,(SCC_regVOLE)
     583.  01:6356  32 3A C2            	ld	(SCC_regVOLD),a		
     584.  01:6359                      
     585.  01:6359                      	;--- Process track 8
     586.  01:6359                      ;	inc	iyh			; no waveform for SCC channel 5
     587.  01:6359                      		
     588.  01:6359  DD 21 7A C1         	ld	ix,TRACK_Chan8+17
     589.  01:635D  3A 73 C1            	ld	a,(TRACK_Chan8+17+TRACK_Flags)
     590.  01:6360  57                  	ld	d,a
     591.  01:6361  CD E7 66            	call	replay_process_chan_AY
     592.  01:6364  22 35 C2            	ld	(SCC_regToneE),hl
     593.  01:6367  7A                  	ld	a,d
     594.  01:6368  32 73 C1            	ld	(TRACK_Chan8+17+TRACK_Flags),a	
     595.  01:636B                      
     596.  01:636B                      	;-- Fade out processing
     597.  01:636B  3A 10 C0            	ld	a,(replay_fade)
     598.  01:636E  A7                  	and	a
     599.  01:636F  C8                  	ret	z	; if replay fade = 0 then no fade active
     600.  01:6370                      	
     601.  01:6370                      	; decrease fade timer
     602.  01:6370  3A 11 C0            	ld	a,(replay_fade_timer)
     603.  01:6373  3D                  	dec	a
     604.  01:6374  C2 8D 63            	jp	nz,.no_new_step
     605.  01:6377                      
     606.  01:6377  3A 12 C0            	ld	a,(replay_fade_vol)
     607.  01:637A  3C                  	inc	a
     608.  01:637B  FE 10               	cp	16
     609.  01:637D  DA 87 63            	jp	c,.cont_fadeing
     610.  01:6380  AF                  	xor	a
     611.  01:6381  32 10 C0            	ld	(replay_fade),a
     612.  01:6384  C3 0F 60            	jp	replay_pause
     613.  01:6387                      .cont_fadeing:	
     614.  01:6387  32 12 C0            	ld	(replay_fade_vol),a
     615.  01:638A  3A 10 C0            	ld	a,(replay_fade)
     616.  01:638D                      .no_new_step:
     617.  01:638D  32 11 C0            	ld	(replay_fade_timer),a
     618.  01:6390                      
     619.  01:6390  3A 12 C0            	ld	a,(replay_fade_vol)
     620.  01:6393  4F                  	ld	c,a
     621.  01:6394  06 03               	ld	b,3
     622.  01:6396  21 A7 C1            	ld	hl,AY_regVOLA
     623.  01:6399  CD A1 63            	call	.calc_vol
     624.  01:639C  06 05               	ld	b,5
     625.  01:639E  21 37 C2            	ld	hl,SCC_regVOLA
     626.  01:63A1                      
     627.  01:63A1                      .calc_vol:	
     628.  01:63A1  7E                  	ld	a,(hl)
     629.  01:63A2  91                  	sub	c
     630.  01:63A3  D2 A7 63            	jp	nc,.no_carry
     631.  01:63A6  AF                  	xor	a
     632.  01:63A7                      .no_carry:	
     633.  01:63A7  77                  	ld	(hl),a
     634.  01:63A8  23                  	inc	hl
     635.  01:63A9  10 F6               	djnz	.calc_vol
     636.  01:63AB  C9                  	ret
     637.  01:63AC                      
     638.  01:63AC                      
     639.  01:63AC                      	
     640.  01:63AC                      replay_decode_chan:
     641.  01:63AC                      	;--- initialize data
     642.  01:63AC                      ;	ld	a,(ix+TRACK_Note)
     643.  01:63AC  32 13 C0            	ld	(replay_previous_note),a
     644.  01:63AF                      
     645.  01:63AF                      	;--- Check if retrig has ended
     646.  01:63AF  DD 35 13            	dec	(ix+TRACK_Retrig)
     647.  01:63B2  C2 B9 63            	jp	nz,.skip_retrig_reset
     648.  01:63B5  DD CB F9 9E         	res 	B_TRGCMD,(ix+TRACK_Flags)
     649.  01:63B9                      
     650.  01:63B9                      .skip_retrig_reset:
     651.  01:63B9                      	;=============
     652.  01:63B9                      	; Note 
     653.  01:63B9                      	;=============
     654.  01:63B9  0A                  	ld	a,(bc)
     655.  01:63BA  FE 60               	cp	96
     656.  01:63BC                      
     657.  01:63BC  DA FD 63            	jp	c,_replay_decode_note
     658.  01:63BF  CA 09 64            	jp	z,_replay_decode_rest
     659.  01:63C2  FE 70               _rdn2:cp	112;128
     660.  01:63C4  DA 50 64            	jp	c,_replay_decode_vol
     661.  01:63C7  FE 8F               _rdv2:cp	143
     662.  01:63C9  DA 12 64            	jp	c,_replay_decode_ins
     663.  01:63CC                      _rdi2:
     664.  01:63CC  FE BF               	cp	191
     665.  01:63CE  D2 65 64            	jp	nc,_replay_decode_delay
     666.  01:63D1  DA 72 64            	jp	c,_replay_decode_cmd
     667.  01:63D4                      
     668.  01:63D4                      _rdn:
     669.  01:63D4  FE 61               	cp	97
     670.  01:63D6  DA F6 63            	jp	c,_rd_delay
     671.  01:63D9  C3 C2 63            	jp	_rdn2
     672.  01:63DC                      
     673.  01:63DC                      _rdi:
     674.  01:63DC  FE 8F               	cp	143
     675.  01:63DE  DA F6 63            	jp	c,_rd_delay
     676.  01:63E1  C3 CC 63            	jp	_rdi2
     677.  01:63E4                      
     678.  01:63E4                      _rdv:
     679.  01:63E4  FE 70               	cp	112
     680.  01:63E6  DA F6 63            	jp	c,_rd_delay
     681.  01:63E9  C3 C7 63            	jp	_rdv2
     682.  01:63EC                      _rdc:
     683.  01:63EC  03                  	inc	bc
     684.  01:63ED  0A                  	ld	a,(bc)
     685.  01:63EE  FE BF               	cp	191
     686.  01:63F0  DA F6 63            	jp	c,_rd_delay
     687.  01:63F3  C3 65 64            	jp	_replay_decode_delay
     688.  01:63F6                      
     689.  01:63F6                      	;--- re-init previous delay
     690.  01:63F6                      _rd_delay:
     691.  01:63F6  DD 7E 12            	ld	a,(ix+TRACK_prevDelay)
     692.  01:63F9  DD 77 11            	ld	(ix+TRACK_Delay),a
     693.  01:63FC                      
     694.  01:63FC  C9                  	ret
     695.  01:63FD                      
     696.  01:63FD                      
     697.  01:63FD                      
     698.  01:63FD                      _replay_decode_note:
     699.  01:63FD  DD 77 F7            	ld	(ix+TRACK_Note),a
     700.  01:6400  CB C2               	set 	B_TRGNOT,d
     701.  01:6402  CB A2               	res	B_ACTMOR,d
     702.  01:6404                      
     703.  01:6404  03                  	inc	bc
     704.  01:6405  0A                  	ld	a,(bc)
     705.  01:6406  C3 D4 63            	jp	_rdn
     706.  01:6409                      	
     707.  01:6409                      _replay_decode_rest:
     708.  01:6409  CB 8A               	res	B_ACTNOT,d				; set	note bit to	0
     709.  01:640B  CB A2               	res	B_ACTMOR,d				; reset morph slave mode
     710.  01:640D                      
     711.  01:640D  03                  	inc	bc
     712.  01:640E  0A                  	ld	a,(bc)
     713.  01:640F  C3 D4 63            	jp	_rdn
     714.  01:6412                      
     715.  01:6412                      _replay_decode_ins:
     716.  01:6412  CB A2               	res	B_ACTMOR,d				; reset morph slave mode
     717.  01:6414  D6 70               	sub	112;97
     718.  01:6416  DD BE EF            	cp	(ix+TRACK_Instrument)
     719.  01:6419  CA 4B 64            	jp	z,.skip_ins
     720.  01:641C                      	
     721.  01:641C  DD 77 EF            	ld	(ix+TRACK_Instrument),a
     722.  01:641F                      
     723.  01:641F                      	;--- set instrument pointer
     724.  01:641F  87                  	add	a
     725.  01:6420  2A 08 C0            	ld	hl,(replay_insbase)
     726.  01:6423  85                  	add	a,l
     727.  01:6424  6F                  	ld	l,a
     728.  01:6425  D2 29 64            	jp	nc,.skip
     729.  01:6428  24                  	inc	h
     730.  01:6429                      .skip:
     731.  01:6429  7E                  	ld	a,(hl)
     732.  01:642A  23                  	inc	hl
     733.  01:642B  66                  	ld	h,(hl)
     734.  01:642C  6F                  	ld	l,a
     735.  01:642D                      
     736.  01:642D                      	;-- get waveform
     737.  01:642D  7E                  	ld	a,(hl)
     738.  01:642E  23                  	inc	hl
     739.  01:642F                      	
     740.  01:642F  5E                  	ld	e,(hl)
     741.  01:6430  23                  	inc	hl
     742.  01:6431                      
     743.  01:6431                      	;---- Store the restart offset
     744.  01:6431  DD 73 F6            	ld	(ix+TRACK_MacroRestart),e
     745.  01:6434                      	;--- Store the macro start
     746.  01:6434  DD 75 F2            	ld	(ix+TRACK_MacroPointer),l
     747.  01:6437  DD 74 F3            	ld	(ix+TRACK_MacroPointer+1),h	
     748.  01:643A                      	;--- Store the macro re-start
     749.  01:643A  DD 75 F4            	ld	(ix+TRACK_MacroStart),l
     750.  01:643D  DD 74 F5            	ld	(ix+TRACK_MacroStart+1),h		
     751.  01:6440                      	;--- Set the waveform  (if needed)
     752.  01:6440  DD BE F0            	cp	(ix+TRACK_Waveform)
     753.  01:6443  CA 4B 64            	jp	z,.skip_ins
     754.  01:6446                      	
     755.  01:6446                      	;--- this is a new waveform
     756.  01:6446  DD 77 F0            	ld	(ix+TRACK_Waveform),a
     757.  01:6449  CB F2               	set	B_TRGWAV,d
     758.  01:644B                      	
     759.  01:644B                      .skip_ins:	
     760.  01:644B  03                  	inc	bc
     761.  01:644C  0A                  	ld	a,(bc)
     762.  01:644D  C3 DC 63            	jp	_rdi
     763.  01:6450                      
     764.  01:6450                      _replay_decode_vol:
     765.  01:6450  D6 60               	sub	96;127
     766.  01:6452  87                  	add	a
     767.  01:6453  87                  	add	a
     768.  01:6454  87                  	add	a
     769.  01:6455  87                  	add	a
     770.  01:6456                      	
     771.  01:6456                      	;--- Set new base	volume (high byte) but keep relative offset (low byte)
     772.  01:6456  5F                  	ld	e,a
     773.  01:6457  DD 7E F8            	ld	a,(ix+TRACK_Volume)
     774.  01:645A  E6 0F               	and	0xf
     775.  01:645C  B3                  	or	e
     776.  01:645D  DD 77 F8            	ld	(ix+TRACK_Volume),a
     777.  01:6460                      
     778.  01:6460  03                  	inc	bc
     779.  01:6461  0A                  	ld	a,(bc)
     780.  01:6462  C3 E4 63            	jp	_rdv
     781.  01:6465                      
     782.  01:6465                      
     783.  01:6465                      _replay_decode_delay:
     784.  01:6465  D6 BF               	sub	191
     785.  01:6467  CA F6 63            	jp	z,_rd_delay		; EOT found
     786.  01:646A  DD 77 11            	ld	(ix+TRACK_Delay),a
     787.  01:646D  DD 77 12            	ld	(ix+TRACK_prevDelay),a
     788.  01:6470                      
     789.  01:6470  03                  	inc	bc
     790.  01:6471  C9                  	ret
     791.  01:6472                      
     792.  01:6472                      
     793.  01:6472                      _replay_decode_cmd:
     794.  01:6472                      
     795.  01:6472  D6 8E               	sub	142
     796.  01:6474  DD 77 F1            	ld	(ix+TRACK_Command),a
     797.  01:6477  21 88 64            	ld	hl,DECODE_CMDLIST
     798.  01:647A  87                  	add	a,a
     799.  01:647B  85                  	add	a,l
     800.  01:647C  6F                  	ld	l,a
     801.  01:647D  D2 81 64            	jp	nc,.skip
     802.  01:6480  24                  	inc	h
     803.  01:6481                      .skip:
     804.  01:6481  7E                  	ld	a,(hl)
     805.  01:6482  23                  	inc	hl
     806.  01:6483  66                  	ld	h,(hl)
     807.  01:6484  6F                  	ld	l,a
     808.  01:6485                      	
     809.  01:6485  03                  	inc	bc
     810.  01:6486  0A                  	ld	a,(bc)
     811.  01:6487  E9                  	jp	(hl)
     812.  01:6488                      
     813.  01:6488                      DECODE_CMDLIST:
     814.  01:6488                      	; These effects are only processed 1 once in decoding
     815.  01:6488  77 65               	dw	_CHIPcmdA_env_mul			;0
     816.  01:648A  8C 65               	dw	_CHIPcmdB_wave_res		;1
     817.  01:648C  9E 65               	dw	_CHIPcmdF_wave_set		;2
     818.  01:648E  A8 65               	dw	_CHIPcmd10_morph_slave		;3
     819.  01:6490  AE 65               	dw	_CHIPcmd11_morph_start		;4
     820.  01:6492  D7 65               	dw	_CHIPcmd12_morph_cont		;5
     821.  01:6494  06 66               	dw	_CHIPcmd16_vib_ctrl		;6
     822.  01:6496  2C 66               	dw	_CHIPcmd17_track_detune		;7
     823.  01:6498  4B 66               	dw	_CHIPcmd18_transpose		;8
     824.  01:649A  98 66               	dw	_CHIPcmd1A_trigger		;9
     825.  01:649C  9E 66               	dw	_CHIPcmd1B_speed			;a
     826.  01:649E  B1 66               	dw	_CHIPcmd1C_notelink		;b
     827.  01:64A0                      ;	dw	_CHIPcmd1C_call			;b	
     828.  01:64A0  B7 66               	dw	_CHIPcmd1D_ret			;c
     829.  01:64A2                      	
     830.  01:64A2                      	; These effects are also processed in the processing
     831.  01:64A2  94 65               	dw	_CHIPcmdC_wave_duty		;d
     832.  01:64A4  94 65               	dw	_CHIPcmdD_wave_cut		;e
     833.  01:64A6  94 65               	dw	_CHIPcmdE_wave_compr		;f
     834.  01:64A8  EE 65               	dw	_CHIPcmd13_short_arp		;10
     835.  01:64AA  FA 65               	dw	_CHIPcmd14_fine_up		;11
     836.  01:64AC  FA 65               	dw	_CHIPcmd15_fine_down		;12
     837.  01:64AE  7A 66               	dw	_CHIPcmd19_note_delay		;13
     838.  01:64B0  71 66               	dw	_CHIPcmdXX_note_cut		;14
     839.  01:64B2                      
     840.  01:64B2                      	; These effects can be retriggered
     841.  01:64B2  DA 64               	dw	_CHIPcmd0_arpeggio		;15
     842.  01:64B4  E6 64               	dw	_CHIPcmd1_port_up			;16
     843.  01:64B6  EE 64               	dw	_CHIPcmd2_port_down		;17
     844.  01:64B8  FC 64               	dw	_CHIPcmd3_port_tone		;18
     845.  01:64BA  46 65               	dw	_CHIPcmd4_vibrato			;19
     846.  01:64BC  60 65               	dw	_CHIPcmd5_vibrato_port_tone	;1a
     847.  01:64BE  60 65               	dw	_CHIPcmd6_vibrato_vol		;1b
     848.  01:64C0  60 65               	dw	_CHIPcmd7_vol_slide		;1c
     849.  01:64C2  6C 65               	dw	_CHIPcmd8_macro_offset		;1d
     850.  01:64C4  6F 65               	dw	_CHIPcmd9_env_shape		;1e
     851.  01:64C6                      
     852.  01:64C6  BB 66               	dw	_CHIPcmd0_RE_arpeggio		;1f
     853.  01:64C8  BF 66               	dw	_CHIPcmd1_RE_port_up		;20
     854.  01:64CA  BF 66               	dw	_CHIPcmd2_RE_port_down		;21
     855.  01:64CC  F6 64               	dw	_CHIPcmd3_RE_port_tone		;22
     856.  01:64CE  BF 66               	dw	_CHIPcmd4_RE_vibrato		;23
     857.  01:64D0  C7 66               	dw	_CHIPcmd5_RE_vibrato_port_tone ;24
     858.  01:64D2  C7 66               	dw	_CHIPcmd6_RE_vibrato_vol	;25
     859.  01:64D4  C7 66               	dw	_CHIPcmd7_RE_vol_slide		;26
     860.  01:64D6  D3 66               	dw	_CHIPcmd8_RE_macro_offset	;27
     861.  01:64D8  DF 66               	dw	_CHIPcmd9_RE_env_shape		;28
     862.  01:64DA                      
     863.  01:64DA                      
     864.  01:64DA                      
     865.  01:64DA                      _CHIPcmd0_arpeggio:
     866.  01:64DA                      	; in:	[A] contains the paramvalue
     867.  01:64DA                      	; 
     868.  01:64DA                      	; ! do not change	[BC] this is the data pointer
     869.  01:64DA                      	;--------------------------------------------------
     870.  01:64DA                      	; Cycles between note, note+x	halftones, note+y
     871.  01:64DA                      	; halftones. 
     872.  01:64DA                      	; Ex:	(MOD/XM: C-4 01 .. 037)	This will play 
     873.  01:64DA                      	; C-4, C-4+3 semitones andC-4+7 semitones. 
     874.  01:64DA  DD 77 05            	ld	(ix+TRACK_cmd_0),a
     875.  01:64DD  CB DA               	set	B_TRGCMD,d
     876.  01:64DF  DD 36 0F 00         	ld	(ix+TRACK_Timer),0
     877.  01:64E3                      
     878.  01:64E3  C3 EC 63            	jp	_rdc
     879.  01:64E6                      	
     880.  01:64E6                      _CHIPcmd1_port_up:
     881.  01:64E6                      	; in:	[A] contains the paramvalue
     882.  01:64E6                      	; 
     883.  01:64E6                      	; ! do not change	[BC] this is the data pointer
     884.  01:64E6                      	;--------------------------------------------------
     885.  01:64E6                      	; This will	slide	up the pitch of the current note
     886.  01:64E6                      	; being played by	the given speed. 
     887.  01:64E6  DD 77 06            	ld	(ix+TRACK_cmd_1),a
     888.  01:64E9  CB DA               	set	B_TRGCMD,d
     889.  01:64EB                      
     890.  01:64EB  C3 EC 63            	jp	_rdc
     891.  01:64EE                      	
     892.  01:64EE                      	
     893.  01:64EE                      	 
     894.  01:64EE                      _CHIPcmd2_port_down:
     895.  01:64EE                      	; in:	[A] contains the paramvalue
     896.  01:64EE                      	; 
     897.  01:64EE                      	; ! do not change	[BC] this is the data pointer
     898.  01:64EE                      	;--------------------------------------------------
     899.  01:64EE                      	; This will	slide	down the pitch of	the current	note
     900.  01:64EE                      	; being played by	the given speed.	
     901.  01:64EE  DD 77 07            	ld	(ix+TRACK_cmd_2),a
     902.  01:64F1  CB DA               	set	B_TRGCMD,d
     903.  01:64F3                      
     904.  01:64F3  C3 EC 63            	jp	_rdc
     905.  01:64F6                      	
     906.  01:64F6                      
     907.  01:64F6                      _CHIPcmd3_RE_port_tone:
     908.  01:64F6  DD 77 13            	ld	(ix+TRACK_Retrig),a
     909.  01:64F9  C3 03 65            	jp	_CHIPcmd3_port_tone_cont	
     910.  01:64FC                      _CHIPcmd3_port_tone:
     911.  01:64FC                      	; in:	[A] contains the paramvalue
     912.  01:64FC                      	; 
     913.  01:64FC                      	; ! do not change	[BC] this is the data pointer
     914.  01:64FC                      	;--------------------------------------------------
     915.  01:64FC                      	; This command is	used together with a note, and 
     916.  01:64FC                      	; will bend	the current	pitch	at the given speed
     917.  01:64FC                      	; towards the specified	note.	Example:
     918.  01:64FC                      	;	C-4 1....
     919.  01:64FC                      	;	F-4 ..305 (bend the note up towards	F-4)
     920.  01:64FC                      	;	... ..300 (continue to slide up, until F-4
     921.  01:64FC                      	;						  is reached
     922.  01:64FC                      
     923.  01:64FC                      
     924.  01:64FC  DD 77 08            	ld	(ix+TRACK_cmd_3),a
     925.  01:64FF  DD 36 0F 02         	ld	(ix+TRACK_Timer),2
     926.  01:6503                      _CHIPcmd3_port_tone_cont:
     927.  01:6503  CB DA               	set	B_TRGCMD,d
     928.  01:6505  CB CA               	set	B_ACTNOT,d
     929.  01:6507                      	;--- Check if we have a	note on the	same event
     930.  01:6507  CB 42               	bit	B_TRGNOT,d
     931.  01:6509  CA EC 63            	jp	z,_rdc
     932.  01:650C                      
     933.  01:650C                      	;-- get the	previous note freq
     934.  01:650C  3A 13 C0            	ld	a,(replay_previous_note)
     935.  01:650F  87                  	add	a
     936.  01:6510                      
     937.  01:6510  D9                  	exx
     938.  01:6511  2A 18 C0            	ld	hl,(replay_Tonetable)	;TRACK_ToneTable
     939.  01:6514  85                  	add	a,l
     940.  01:6515  6F                  	ld	l,a
     941.  01:6516  D2 1A 65            	jp	nc,.skip
     942.  01:6519  24                  	inc	h
     943.  01:651A                      .skip:
     944.  01:651A  5E                  	ld	e,(hl)
     945.  01:651B  23                  	inc	hl
     946.  01:651C  56                  	ld	d,(hl)
     947.  01:651D                      
     948.  01:651D                      	; add	the toneadd
     949.  01:651D  DD 6E 00            	ld	l,(ix+TRACK_cmd_ToneSlideAdd)
     950.  01:6520  DD 66 01            	ld	h,(ix+TRACK_cmd_ToneSlideAdd+1)
     951.  01:6523                      
     952.  01:6523  19                  	add	hl,de	
     953.  01:6524  EB                  	ex	de,hl				; store current freq in	[de]
     954.  01:6525                      
     955.  01:6525                      	;--- get the current note freq
     956.  01:6525  DD 7E F7            	ld	a,(ix+TRACK_Note)
     957.  01:6528  87                  	add	a
     958.  01:6529  2A 18 C0            	ld	hl,(replay_Tonetable)	;TRACK_ToneTable
     959.  01:652C  85                  	add	a,l
     960.  01:652D  6F                  	ld	l,a
     961.  01:652E  D2 32 65            	jp	nc,.skip2
     962.  01:6531  24                  	inc	h
     963.  01:6532                      .skip2:
     964.  01:6532  7E                  	ld	a,(hl)
     965.  01:6533  23                  	inc	hl
     966.  01:6534  66                  	ld	h,(hl)
     967.  01:6535  6F                  	ld	l,a				; destination freq in [hl]
     968.  01:6536                      	
     969.  01:6536                      	;--- Calculate the delta
     970.  01:6536  AF                  	xor	a
     971.  01:6537  EB                  	ex	de,hl
     972.  01:6538  ED 52               	sbc	hl,de				; results in pos/neg delta
     973.  01:653A                      	
     974.  01:653A  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
     975.  01:653D  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h	
     976.  01:6540  D9                  	exx
     977.  01:6541                      	
     978.  01:6541  CB 82               	res	B_TRGNOT,d
     979.  01:6543                      
     980.  01:6543  C3 EC 63            	jp	_rdc	
     981.  01:6546                      
     982.  01:6546                      	
     983.  01:6546                      _CHIPcmd4_vibrato:
     984.  01:6546                      	; in:	[A] contains the paramvalue
     985.  01:6546                      	; 
     986.  01:6546                      	; ! do not change	[BC] this is the data pointer
     987.  01:6546                      	;--------------------------------------------------
     988.  01:6546                      	; Vibrato with speed x and depth y.	This command 
     989.  01:6546                      	; will oscillate the frequency of the current note
     990.  01:6546                      	; with a sine wave. (You can change	the vibrato
     991.  01:6546                      	; waveform to a triangle wave, a square wave, or a
     992.  01:6546                      	; random table by	using	the E4x command).
     993.  01:6546                      	;--- Init values
     994.  01:6546  5F                  	ld	e,a
     995.  01:6547  E6 07               	and	$07
     996.  01:6549                      
     997.  01:6549  DD 77 09            	ld	(ix+TRACK_cmd_4_depth),a
     998.  01:654C  7B                  	ld	a,e
     999.  01:654D  1F                  	rra
    1000.  01:654E  1F                  	rra
    1001.  01:654F  1F                  	rra
    1002.  01:6550  1F                  	rra
    1003.  01:6551  E6 0F               	and	$0f
    1004.  01:6553  DD 77 0A            	ld	(ix+TRACK_cmd_4_step),a
    1005.  01:6556  ED 44               	neg	
    1006.  01:6558  DD 77 10            	ld	(ix+TRACK_Step),a
    1007.  01:655B                      	
    1008.  01:655B  CB DA               	set	B_TRGCMD,d
    1009.  01:655D  C3 EC 63            	jp	_rdc	
    1010.  01:6560                      
    1011.  01:6560                      
    1012.  01:6560                      _CHIPcmd5_vibrato_port_tone:
    1013.  01:6560                      	; in:	[A] contains the paramvalue
    1014.  01:6560                      	; 
    1015.  01:6560                      	; ! do not change	[BC] this is the data pointer
    1016.  01:6560                      	;--------------------------------------------------
    1017.  01:6560                      	; portTone	+ volumeslide
    1018.  01:6560                      	;--- Init values
    1019.  01:6560                      _CHIPcmd6_vibrato_vol:
    1020.  01:6560                      	; in:	[A] contains the paramvalue
    1021.  01:6560                      	; 
    1022.  01:6560                      	; ! do not change	[BC] this is the data pointer
    1023.  01:6560                      	;--------------------------------------------------
    1024.  01:6560                      _CHIPcmd7_vol_slide:
    1025.  01:6560                      	; in:	[A] contains the paramvalue
    1026.  01:6560                      	; 
    1027.  01:6560                      	; ! do not change	[BC] this is the data pointer
    1028.  01:6560                      	;--------------------------------------------------
    1029.  01:6560                      	; slide the	volume up or down	1 step.
    1030.  01:6560                      	; The	x or y param  set	the delay*2	(x=up,y=down)
    1031.  01:6560                      	; With A00 the previous	value	is used.
    1032.  01:6560                      	
    1033.  01:6560  DD 77 0C            	ld	(ix+TRACK_cmd_A),a
    1034.  01:6563  CB DA               	set	B_TRGCMD,d
    1035.  01:6565  DD 36 0F 01         	ld	(ix+TRACK_Timer),1
    1036.  01:6569                      
    1037.  01:6569  C3 EC 63            	jp	_rdc
    1038.  01:656C                      
    1039.  01:656C                      
    1040.  01:656C                      
    1041.  01:656C                      _CHIPcmd8_macro_offset:
    1042.  01:656C                      	; in:	[A] contains the paramvalue
    1043.  01:656C                      	; 
    1044.  01:656C                      	; ! do not change	[BC] this is the data pointer
    1045.  01:656C                      	;--------------------------------------------------
    1046.  01:656C                      	; This command, when used together with a	note,	
    1047.  01:656C                      	; will start playing the sample at the position	xx 
    1048.  01:656C                      	; (instead of position 0). If	xx is	00 (900), the 
    1049.  01:656C                      	; previous value will be used.
    1050.  01:656C                      
    1051.  01:656C                      	;--- Init values
    1052.  01:656C                      	; NOT SUPPORTED ANYMORE
    1053.  01:656C  C3 EC 63            	jp	_rdc
    1054.  01:656F                      
    1055.  01:656F                      
    1056.  01:656F                      
    1057.  01:656F                      
    1058.  01:656F                      _CHIPcmd9_env_shape:
    1059.  01:656F  CB D2               	set	B_TRGENV,d
    1060.  01:6571  32 AC C1            	ld	(AY_regEnvShape),a
    1061.  01:6574                      
    1062.  01:6574  C3 EC 63            	jp	_rdc
    1063.  01:6577                      
    1064.  01:6577                      
    1065.  01:6577                      	; in:	[A] contains the paramvalue
    1066.  01:6577                      	; 
    1067.  01:6577                      	; ! do not change	[BC] this is the data pointer
    1068.  01:6577                      	;--------------------------------------------------
    1069.  01:6577                      	; This command set the envelope frequency using a
    1070.  01:6577                      	; multiplier value (00-ff)
    1071.  01:6577                      _CHIPcmdA_env_mul:
    1072.  01:6577  57                  	ld	d,a
    1073.  01:6578  AF                  	xor	a
    1074.  01:6579  CB 3A               	srl	d
    1075.  01:657B  1F                  	rra	
    1076.  01:657C  CB 3A               	srl	d
    1077.  01:657E  1F                  	rra		
    1078.  01:657F  CB 3A               	srl	d
    1079.  01:6581  1F                  	rra	
    1080.  01:6582  32 AA C1            	ld	(AY_regEnvL),a
    1081.  01:6585  7A                  	ld	a,d
    1082.  01:6586  32 AB C1            	ld	(AY_regEnvH),a
    1083.  01:6589                      	
    1084.  01:6589  C3 EC 63            	jp	_rdc	
    1085.  01:658C                      
    1086.  01:658C                      
    1087.  01:658C                      
    1088.  01:658C                      _CHIPcmdB_wave_res:
    1089.  01:658C  CB F2               	set	B_TRGWAV,d
    1090.  01:658E  CB A2               	res	B_ACTMOR,d
    1091.  01:6590                      
    1092.  01:6590  0B                  	dec 	bc
    1093.  01:6591  C3 EC 63            	jp	_rdc
    1094.  01:6594                      
    1095.  01:6594                      
    1096.  01:6594                      _CHIPcmdC_wave_duty:
    1097.  01:6594                      _CHIPcmdD_wave_cut:
    1098.  01:6594                      _CHIPcmdE_wave_compr:
    1099.  01:6594  DD 77 0D            	ld	(ix+TRACK_cmd_B),a
    1100.  01:6597  CB DA               	set	B_TRGCMD,d
    1101.  01:6599  CB A2               	res	B_ACTMOR,d
    1102.  01:659B                      
    1103.  01:659B  C3 EC 63            	jp	_rdc	
    1104.  01:659E                      
    1105.  01:659E                      
    1106.  01:659E                      _CHIPcmdF_wave_set:
    1107.  01:659E  DD 77 F0            	ld	(ix+TRACK_Waveform),a
    1108.  01:65A1  CB F2               	set	B_TRGWAV,d
    1109.  01:65A3  CB A2               	res	B_ACTMOR,d
    1110.  01:65A5                      
    1111.  01:65A5  C3 EC 63            	jp	_rdc	
    1112.  01:65A8                      
    1113.  01:65A8                      
    1114.  01:65A8                      _CHIPcmd10_morph_slave:
    1115.  01:65A8  CB E2               	set	B_ACTMOR,d
    1116.  01:65AA                      	
    1117.  01:65AA  0B                  	dec 	bc
    1118.  01:65AB  C3 EC 63            	jp	_rdc	
    1119.  01:65AE                      	
    1120.  01:65AE                      _CHIPcmd11_morph_start:
    1121.  01:65AE  E6 0F               	and	0x0f
    1122.  01:65B0  32 1C C0            	ld	(replay_morph_speed),a
    1123.  01:65B3                      	
    1124.  01:65B3  D9                  	exx
    1125.  01:65B4                      	;--- load the waveformbuffer
    1126.  01:65B4  DD 7E F0            	ld	a,(ix+TRACK_Waveform)
    1127.  01:65B7  87                  	add	a,a
    1128.  01:65B8  87                  	add	a,a
    1129.  01:65B9  87                  	add	a,a	
    1130.  01:65BA                      
    1131.  01:65BA  6F                  	ld	l,a
    1132.  01:65BB  26 00               	ld	h,0
    1133.  01:65BD  29                  	add	hl,hl
    1134.  01:65BE  29                  	add	hl,hl
    1135.  01:65BF                      		
    1136.  01:65BF  ED 5B 06 C0         	ld	de,(replay_wavebase)
    1137.  01:65C3  19                  	add	hl,de
    1138.  01:65C4                      
    1139.  01:65C4  11 1E C0            	ld	de,replay_morph_buffer
    1140.  01:65C7  3E 20               	ld	a,32
    1141.  01:65C9                      .loop:
    1142.  01:65C9  08                  	ex	af,af'	;'
    1143.  01:65CA  7E                  	ld	a,(hl)
    1144.  01:65CB  12                  	ld	(de),a		; copy value to both wave and delta pos
    1145.  01:65CC  13                  	inc	de
    1146.  01:65CD  12                  	ld	(de),a
    1147.  01:65CE  23                  	inc	hl
    1148.  01:65CF  13                  	inc	de
    1149.  01:65D0  08                  	ex	af,af'	;'
    1150.  01:65D1  3D                  	dec	a
    1151.  01:65D2  C2 C9 65            	jp	nz,.loop
    1152.  01:65D5  D9                  	exx
    1153.  01:65D6                      	
    1154.  01:65D6  0A                  	ld	a,(bc)
    1155.  01:65D7                      
    1156.  01:65D7                      _CHIPcmd12_morph_cont:
    1157.  01:65D7                      	;---- init new morph
    1158.  01:65D7  E6 F0               	and	0xf0	
    1159.  01:65D9  32 5E C0            	ld	(replay_morph_waveform),a	; store dest form offset
    1160.  01:65DC                      	
    1161.  01:65DC  AF                  	xor	a
    1162.  01:65DD  32 1D C0            	ld	(replay_morph_counter),a
    1163.  01:65E0  3C                  	inc	a
    1164.  01:65E1  32 1B C0            	ld	(replay_morph_timer),a
    1165.  01:65E4                      
    1166.  01:65E4                      	;--- calculate the delta's	
    1167.  01:65E4  3E FF               	ld	a,255				; 255 triggers calc init
    1168.  01:65E6  32 1A C0            	ld	(replay_morph_active),a	
    1169.  01:65E9                      
    1170.  01:65E9  CB E2               	set	B_ACTMOR,d
    1171.  01:65EB  C3 EC 63            	jp	_rdc		
    1172.  01:65EE                      	
    1173.  01:65EE                      
    1174.  01:65EE                      _CHIPcmd13_short_arp:
    1175.  01:65EE  DD 77 0E            	ld	(ix+TRACK_cmd_E),a		; store the halve not to add
    1176.  01:65F1  DD 36 0F 00         	ld	(ix+TRACK_Timer),0
    1177.  01:65F5                      
    1178.  01:65F5  CB DA               	set	B_TRGCMD,d		; command active
    1179.  01:65F7  C3 EC 63            	jp	_rdc	
    1180.  01:65FA                      	
    1181.  01:65FA                      	
    1182.  01:65FA                      _CHIPcmd14_fine_up:
    1183.  01:65FA                      _CHIPcmd15_fine_down:
    1184.  01:65FA  DD 77 0E            	ld	(ix+TRACK_cmd_E),a
    1185.  01:65FD  DD 36 0F 02         	ld	(ix+TRACK_Timer),2
    1186.  01:6601  CB DA               	set	B_TRGCMD,d		; command active
    1187.  01:6603                      
    1188.  01:6603  C3 EC 63            	jp	_rdc	
    1189.  01:6606                      
    1190.  01:6606                      
    1191.  01:6606                      _CHIPcmd16_vib_ctrl:
    1192.  01:6606  21 20 0F            	ld	hl,TRACK_Vibrato_sine
    1193.  01:6609  FE 01               	cp	1
    1194.  01:660B  DA 23 66            	jp	c,_cmd16_sine
    1195.  01:660E  CA 1A 66            	jp	z,_cmd16_tri
    1196.  01:6611                      _cmd16_pulse:
    1197.  01:6611  21 60 0F            	ld	hl,TRACK_Vibrato_pulse
    1198.  01:6614  22 16 C0            	ld	(replay_vib_table),hl
    1199.  01:6617  C3 EC 63            	jp	_rdc
    1200.  01:661A                      _cmd16_tri:
    1201.  01:661A  21 40 0F            	ld	hl,TRACK_Vibrato_triangle
    1202.  01:661D  22 16 C0            	ld	(replay_vib_table),hl
    1203.  01:6620  C3 EC 63            	jp	_rdc	
    1204.  01:6623                      
    1205.  01:6623                      _cmd16_sine:
    1206.  01:6623  21 20 0F            	ld	hl,TRACK_Vibrato_sine
    1207.  01:6626  22 16 C0            	ld	(replay_vib_table),hl
    1208.  01:6629  C3 EC 63            	jp	_rdc
    1209.  01:662C                      
    1210.  01:662C                      
    1211.  01:662C                      
    1212.  01:662C                      _CHIPcmd17_track_detune:
    1213.  01:662C                      	; This command sets the	detune of the track.
    1214.  01:662C  5F                  	ld	e,a
    1215.  01:662D  E6 07               	and	0x07		; low	4 bits is value
    1216.  01:662F  CB 5B               	bit	3,e		; Center around 8
    1217.  01:6631  CA 41 66            	jp	z,.pos
    1218.  01:6634  3C                  	inc	a
    1219.  01:6635  ED 44               	neg			; make correct value
    1220.  01:6637  DD 77 04            	ld	(ix+TRACK_cmd_detune),a
    1221.  01:663A  DD 36 05 FF         	ld	(ix+TRACK_cmd_detune+1),0xff
    1222.  01:663E                      
    1223.  01:663E  C3 EC 63            	jp	_rdc	
    1224.  01:6641                      
    1225.  01:6641                      .pos:
    1226.  01:6641  DD 77 04            	ld	(ix+TRACK_cmd_detune),a
    1227.  01:6644  DD 36 05 00         	ld	(ix+TRACK_cmd_detune+1),0x00	
    1228.  01:6648                      
    1229.  01:6648  C3 EC 63            	jp	_rdc	
    1230.  01:664B                      
    1231.  01:664B                      
    1232.  01:664B                      ; This command sets the	detune of the track.	
    1233.  01:664B                      _CHIPcmd18_transpose:
    1234.  01:664B  5F                  	ld	e,a
    1235.  01:664C  87                  	add	a
    1236.  01:664D  21 60 0E            	ld	hl,TRACK_ToneTable		;(replay_Tonetable)
    1237.  01:6650  E6 0F               	and	15		; low	4 bits is value
    1238.  01:6652  CB 5B               	bit	3,e		; Center around 8
    1239.  01:6654  CA 65 66            	jp	z,.pos
    1240.  01:6657                      
    1241.  01:6657                      	;neg	
    1242.  01:6657  ED 44               	neg	
    1243.  01:6659  85                  	add	a,l
    1244.  01:665A  6F                  	ld	l,a
    1245.  01:665B  D2 5F 66            	jp	nc,.skip1
    1246.  01:665E  25                  	dec	h
    1247.  01:665F                      .skip1:
    1248.  01:665F  22 18 C0            	ld	(replay_Tonetable),hl
    1249.  01:6662  C3 EC 63            	jp	_rdc
    1250.  01:6665                      ; pos
    1251.  01:6665                      .pos:	
    1252.  01:6665  85                  	add	a,l
    1253.  01:6666  6F                  	ld	l,a
    1254.  01:6667  D2 6B 66            	jp	nc,.skip2
    1255.  01:666A  24                  	inc	h
    1256.  01:666B                      .skip2:
    1257.  01:666B  22 18 C0            	ld	(replay_Tonetable),hl
    1258.  01:666E  C3 EC 63            	jp	_rdc
    1259.  01:6671                      
    1260.  01:6671                      _CHIPcmdXX_note_cut:
    1261.  01:6671  CB DA               	set	B_TRGCMD,d
    1262.  01:6673  3C                  	inc	a
    1263.  01:6674  DD 77 0F            	ld	(ix+TRACK_Timer),a		; set	the timer to param y
    1264.  01:6677  C3 EC 63            	jp 	_rdc
    1265.  01:667A                      
    1266.  01:667A                      
    1267.  01:667A                      _CHIPcmd19_note_delay:
    1268.  01:667A  CB 42               	bit	B_TRGNOT,d		; is there a note	in this eventstep?
    1269.  01:667C  CA EC 63            	jp	z,_rdc
    1270.  01:667F                      
    1271.  01:667F  CB DA               	set	B_TRGCMD,d					; command active
    1272.  01:6681  3C                  	inc	a
    1273.  01:6682  DD 77 0F            	ld	(ix+TRACK_Timer),a			; set	the timer to param y
    1274.  01:6685  DD 7E F7            	ld	a,(ix+TRACK_Note)
    1275.  01:6688  DD 77 0E            	ld	(ix+TRACK_cmd_E),a			; store the	new note
    1276.  01:668B  3A 13 C0            	ld	a,(replay_previous_note)
    1277.  01:668E  DD 77 F7            	ld	(ix+TRACK_Note),a				; restore the old	note
    1278.  01:6691  DD CB F9 86         	res	B_TRGNOT,(ix+TRACK_Flags)		; reset any	triggernote
    1279.  01:6695                      
    1280.  01:6695  C3 EC 63            	jp	_rdc	
    1281.  01:6698                      
    1282.  01:6698                      
    1283.  01:6698                      
    1284.  01:6698                      _CHIPcmd1A_trigger:
    1285.  01:6698  32 01 C0            	ld	(replay_trigger),a
    1286.  01:669B  C3 EC 63            	jp	_rdc		
    1287.  01:669E                      
    1288.  01:669E                      
    1289.  01:669E                      _CHIPcmd1B_speed:
    1290.  01:669E  32 0C C0            	ld	(replay_speed),a
    1291.  01:66A1                      	;--- Reset Timer == 0
    1292.  01:66A1  CB 3F               	srl	a				; divide speed with 2
    1293.  01:66A3  5F                  	ld	e,a
    1294.  01:66A4  3E 00               	ld	a,0				
    1295.  01:66A6  8F                  	adc	a				; store carry of shift as subtimer
    1296.  01:66A7  32 0D C0            	ld	(replay_speed_subtimer),a
    1297.  01:66AA  83                  	add	a,e
    1298.  01:66AB  32 0E C0            	ld	(replay_speed_timer),a
    1299.  01:66AE                      
    1300.  01:66AE  C3 EC 63            	jp	_rdc	
    1301.  01:66B1                      	
    1302.  01:66B1                      _CHIPcmd1C_notelink:
    1303.  01:66B1  CB 82               	res	B_TRGNOT,d
    1304.  01:66B3  0B                  	dec 	bc
    1305.  01:66B4  C3 EC 63            	jp	_rdc	
    1306.  01:66B7                      _CHIPcmd1C_call:
    1307.  01:66B7                      _CHIPcmd1D_ret:
    1308.  01:66B7                      	;< not implemented yet>
    1309.  01:66B7  0B                  	dec 	bc
    1310.  01:66B8  C3 EC 63            	jp	_rdc	
    1311.  01:66BB                      
    1312.  01:66BB                      
    1313.  01:66BB                      
    1314.  01:66BB                      
    1315.  01:66BB                      _CHIPcmd0_RE_arpeggio:
    1316.  01:66BB  DD 36 0F 00         	ld	(ix+TRACK_Timer),0
    1317.  01:66BF                      	
    1318.  01:66BF                      _CHIPcmd1_RE_port_up:	
    1319.  01:66BF                      _CHIPcmd2_RE_port_down:
    1320.  01:66BF                      _CHIPcmd4_RE_vibrato:
    1321.  01:66BF  CB DA               	set	B_TRGCMD,d
    1322.  01:66C1  DD 77 13            	ld	(ix+TRACK_Retrig),a
    1323.  01:66C4  C3 EC 63            	jp	_rdc		
    1324.  01:66C7                      	
    1325.  01:66C7                      _CHIPcmd5_RE_vibrato_port_tone:
    1326.  01:66C7                      _CHIPcmd6_RE_vibrato_vol:
    1327.  01:66C7                      _CHIPcmd7_RE_vol_slide:
    1328.  01:66C7  CB DA               	set	B_TRGCMD,d
    1329.  01:66C9  DD 36 0F 01         	ld	(ix+TRACK_Timer),1
    1330.  01:66CD  DD 77 13            	ld	(ix+TRACK_Retrig),a
    1331.  01:66D0  C3 EC 63            	jp	_rdc
    1332.  01:66D3                      		
    1333.  01:66D3                      _CHIPcmd8_RE_macro_offset:	
    1334.  01:66D3  CB DA               	set	B_TRGCMD,d
    1335.  01:66D5  DD 36 0F 02         	ld	(ix+TRACK_Timer),2
    1336.  01:66D9  DD 77 13            	ld	(ix+TRACK_Retrig),a
    1337.  01:66DC  C3 EC 63            	jp	_rdc			
    1338.  01:66DF                      
    1339.  01:66DF                      _CHIPcmd9_RE_env_shape:
    1340.  01:66DF  CB D2               	set	B_TRGENV,d
    1341.  01:66E1  DD 77 13            	ld	(ix+TRACK_Retrig),a
    1342.  01:66E4  C3 EC 63            	jp	_rdc	
    1343.  01:66E7                      
    1344.  01:66E7                      
    1345.  01:66E7                      
    1346.  01:66E7                      ;===========================================================
    1347.  01:66E7                      ; ---replay_route
    1348.  01:66E7                      ; Output the data	to the CHIP	registers
    1349.  01:66E7                      ; 
    1350.  01:66E7                      ; in HL is the current tone freq
    1351.  01:66E7                      ; in D is TRACK_FLAGS  
    1352.  01:66E7                      ;===========================================================
    1353.  01:66E7                      replay_process_chan_AY:
    1354.  01:66E7                      
    1355.  01:66E7                      	;-- set the	mixer	right
    1356.  01:66E7  21 3C C2            	ld	hl,SCC_regMIXER   
    1357.  01:66EA  CB 3E               	srl	(hl)
    1358.  01:66EC                      
    1359.  01:66EC                      	;=====
    1360.  01:66EC                      	; COMMAND
    1361.  01:66EC                      	;=====
    1362.  01:66EC  CB 5A               	bit	B_TRGCMD,d	;(ix+TRACK_Flags)
    1363.  01:66EE  CA 03 67            	jp	z,_pcAY_noCommand
    1364.  01:66F1                      	
    1365.  01:66F1  21 2E 68            	ld	hl,_pcAY_cmdlist-26
    1366.  01:66F4  DD 7E F1            	ld	a,(ix+TRACK_Command)
    1367.  01:66F7  87                  	add	a
    1368.  01:66F8  85                  	add	a,l
    1369.  01:66F9  6F                  	ld	l,a
    1370.  01:66FA  D2 FE 66            	jp	nc,.skip
    1371.  01:66FD  24                  	inc	h
    1372.  01:66FE                      .skip:
    1373.  01:66FE  7E                  	ld	a,(hl)
    1374.  01:66FF  23                  	inc	hl
    1375.  01:6700  66                  	ld	h,(hl)
    1376.  01:6701  6F                  	ld	l,a	
    1377.  01:6702  E9                  	jp	(hl)
    1378.  01:6703                      	
    1379.  01:6703                      _pcAY_noCommand:	
    1380.  01:6703                      _pcAY_commandEND:
    1381.  01:6703                      
    1382.  01:6703                      	;=====
    1383.  01:6703                      	; NOTE
    1384.  01:6703                      	;=====
    1385.  01:6703                      	;--- Check if we need to trigger a new note
    1386.  01:6703  CB 42               	bit	B_TRGNOT,d	;(ix+TRACK_Flags)
    1387.  01:6705  CA 2C 67            	jp	z,_pcAY_noNoteTrigger
    1388.  01:6708                      	
    1389.  01:6708                      
    1390.  01:6708                      _pcAY_triggerNote:	
    1391.  01:6708                      	;--- get new Note
    1392.  01:6708  CB 82               	res	B_TRGNOT,d		;(ix+TRACK_Flags)		; reset trigger note flag
    1393.  01:670A  CB CA               	set	B_ACTNOT,d		;(ix+TRACK_Flags)		; set	note active	flag
    1394.  01:670C                      
    1395.  01:670C  DD 6E F4            	ld	l,(ix+TRACK_MacroStart)
    1396.  01:670F  DD 66 F5            	ld	h,(ix+TRACK_MacroStart+1)
    1397.  01:6712                      	;--- Store the macro start	
    1398.  01:6712  DD 75 F2            	ld	(ix+TRACK_MacroPointer),l
    1399.  01:6715  DD 74 F3            	ld	(ix+TRACK_MacroPointer+1),h	
    1400.  01:6718                      
    1401.  01:6718  21 00 00            	ld	hl,0
    1402.  01:671B  ED 73 00 C0         	ld	(_SP_Storage),sp
    1403.  01:671F  DD F9               	ld	sp,ix
    1404.  01:6721  F1                  	pop	af
    1405.  01:6722  F1                  	pop	af
    1406.  01:6723  E5                  	push	hl
    1407.  01:6724  E5                  	push	hl		
    1408.  01:6725  E5                  	push	hl
    1409.  01:6726  E5                  	push	hl
    1410.  01:6727  E5                  	push	hl
    1411.  01:6728  ED 7B 00 C0         	ld	sp,(_SP_Storage)
    1412.  01:672C                      
    1413.  01:672C                      ;	ld	(ix+TRACK_ToneAdd),0
    1414.  01:672C                      ;	ld	(ix+TRACK_ToneAdd+1),0
    1415.  01:672C                      ;	ld	(ix+TRACK_VolumeAdd),0	
    1416.  01:672C                      ;	ld	(ix+TRACK_cmd_ToneAdd),0
    1417.  01:672C                      ;	ld	(ix+TRACK_cmd_ToneAdd+1),0
    1418.  01:672C                      ;	ld	(ix+TRACK_cmd_VolumeAdd),0
    1419.  01:672C                      ;	ld	(ix+TRACK_Noise),0
    1420.  01:672C                      ;	ld	(ix+TRACK_cmd_ToneSlideAdd),0
    1421.  01:672C                      ;	ld	(ix+TRACK_cmd_ToneSlideAdd+1),0
    1422.  01:672C                      
    1423.  01:672C                      _pcAY_noNoteTrigger:
    1424.  01:672C                      	;Get note freq
    1425.  01:672C  DD 7E F7            	ld	a,(ix+TRACK_Note)
    1426.  01:672F  DD 86 0B            	add	a,(ix+TRACK_cmd_NoteAdd)
    1427.  01:6732  87                  	add	a
    1428.  01:6733  08                  	ex	af,af'			;'store the	note offset
    1429.  01:6734  DD 36 0B 00         	ld	(ix+TRACK_cmd_NoteAdd),0	
    1430.  01:6738                      	
    1431.  01:6738                      
    1432.  01:6738                      	;==============
    1433.  01:6738                      	; Macro instrument
    1434.  01:6738                      	;==============
    1435.  01:6738  CB 4A               	bit	B_ACTNOT,d			;(ix+TRACK_Flags)
    1436.  01:673A  CA 43 68            	jp	z,_pcAY_noNoteActive
    1437.  01:673D                      	
    1438.  01:673D                      	;--- Get the macro len and loop
    1439.  01:673D  DD 6E F2            	ld	l,(ix+TRACK_MacroPointer)
    1440.  01:6740  DD 66 F3            	ld	h,(ix+TRACK_MacroPointer+1)
    1441.  01:6743                      
    1442.  01:6743  5E                  	ld	e,(hl)				; info byte
    1443.  01:6744  23                  	inc	hl
    1444.  01:6745  CB 43               	bit	0,e					; Volume change
    1445.  01:6747  C2 50 67            	jp	nz,_vol_change
    1446.  01:674A  DD 7E FD            	ld	a,(ix+TRACK_VolumeAdd)
    1447.  01:674D  C3 7A 67            	jp	_noEnv
    1448.  01:6750                      	
    1449.  01:6750                      	;--- Volume change
    1450.  01:6750                      _vol_change:
    1451.  01:6750  7E                  	ld	a,(hl)
    1452.  01:6751  23                  	inc	hl
    1453.  01:6752                      	
    1454.  01:6752  CB 4B               	bit	1,e
    1455.  01:6754  CA 6A 67            	jp	z,_vol_base
    1456.  01:6757                      _vol_rel:
    1457.  01:6757  DD 86 FD            	add	 (ix+TRACK_VolumeAdd)
    1458.  01:675A  FE 10               	cp	16
    1459.  01:675C  DA 6A 67            	jp	c,_vol_base
    1460.  01:675F  FE 80               	cp	128
    1461.  01:6761  DA 69 67            	jp	c,.skip
    1462.  01:6764  3E 0F               	ld	a,$0f
    1463.  01:6766  C3 6A 67            	jp	_vol_base
    1464.  01:6769                      .skip:	
    1465.  01:6769  AF                  	xor	a
    1466.  01:676A                      	
    1467.  01:676A                      _vol_base:
    1468.  01:676A  DD 77 FD            	ld	(ix+TRACK_VolumeAdd),a
    1469.  01:676D                      
    1470.  01:676D                      	;---- envelope check
    1471.  01:676D                      	; is done here to be able to continue
    1472.  01:676D                      	; macro volume values.
    1473.  01:676D  CB 52               	bit	B_TRGENV,d		;'(IX+TRACK_Flags)
    1474.  01:676F  CA 7A 67            	jp	z,_noEnv		; if not set then normal volume calculation
    1475.  01:6772  3E 10               	ld	a,16			; set volume to 16 == envelope
    1476.  01:6774  32 3B C2            	ld	(SCC_regVOLE),a
    1477.  01:6777  C3 B4 67            	jp	_noVolume	
    1478.  01:677A                      	
    1479.  01:677A                      _noEnv:
    1480.  01:677A  DD B6 F8            	or	(ix+TRACK_Volume)
    1481.  01:677D  4F                  	ld	c,a			; store volume add
    1482.  01:677E                      
    1483.  01:677E  DD 7E FF            	ld 	a,(ix+TRACK_cmd_VolumeAdd)
    1484.  01:6781  17                  	rla				; shift to detect shift
    1485.  01:6782  DA 8F 67            	jp 	c,.sub_Vadd		
    1486.  01:6785                      .add_Vadd:  
    1487.  01:6785  81                  	add	a,c
    1488.  01:6786  D2 9B 67            	jp	nc,_Vadd
    1489.  01:6789  79                  	ld	a,c
    1490.  01:678A  F6 F0               	or	0xf0
    1491.  01:678C  C3 9B 67            	jp	_Vadd	
    1492.  01:678F                      .sub_Vadd:	
    1493.  01:678F  47                  	ld	b,a
    1494.  01:6790  AF                  	xor	a
    1495.  01:6791  90                  	sub 	b
    1496.  01:6792  47                  	ld	b,a
    1497.  01:6793  79                  	ld	a,c
    1498.  01:6794  90                  	sub	a,b
    1499.  01:6795  D2 9B 67            	jp 	nc,.skip2
    1500.  01:6798  79                  	ld	a,c
    1501.  01:6799  E6 0F                	and	0x0f
    1502.  01:679B                      .skip2:
    1503.  01:679B                      
    1504.  01:679B                      	
    1505.  01:679B                      	;-- next is _Vadd
    1506.  01:679B                      _Vadd:
    1507.  01:679B                      	;--- apply main volume balance
    1508.  01:679B  ED 4B 14 C0         	ld	bc,(replay_mainvol)
    1509.  01:679F  81                  	add	a,c
    1510.  01:67A0  4F                  	ld	c,a
    1511.  01:67A1  D2 A5 67            	jp	nc,.skip
    1512.  01:67A4  04                  	inc	b
    1513.  01:67A5                      .skip:
    1514.  01:67A5  0A                  	ld	a,(bc)	
    1515.  01:67A6                      	; Test which CHIP.
    1516.  01:67A6  CB 7A               	bit	B_PSGSCC,d		;(ix+TRACK_Flags)
    1517.  01:67A8  C2 AF 67            	jp	nz,.skip2
    1518.  01:67AB  1F                  	rra
    1519.  01:67AC  1F                  	rra
    1520.  01:67AD  1F                  	rra
    1521.  01:67AE  1F                  	rra
    1522.  01:67AF                      .skip2:
    1523.  01:67AF  E6 0F               	and	0x0f
    1524.  01:67B1  32 3B C2            	ld	(SCC_regVOLE),a
    1525.  01:67B4                      
    1526.  01:67B4                      _noVolume:
    1527.  01:67B4                      	;-------------------------------
    1528.  01:67B4                      	;
    1529.  01:67B4                      	; NOISE
    1530.  01:67B4                      	;
    1531.  01:67B4                      	;-------------------------------
    1532.  01:67B4  CB 7B               	bit 	7,e			; test if noise
    1533.  01:67B6  CA DB 67            	jp	z,_noNoise
    1534.  01:67B9                      	
    1535.  01:67B9                      	;--- prevent SCC and noise
    1536.  01:67B9  CB 7A               	bit	B_PSGSCC,d		;(ix+TRACK_Flags)
    1537.  01:67BB  C2 DB 67            	jp	nz,_noNoise
    1538.  01:67BE                      
    1539.  01:67BE                      	;--- Set the mixer for noise
    1540.  01:67BE  3A 3C C2            	ld	a,(SCC_regMIXER)
    1541.  01:67C1  F6 80               	or	128
    1542.  01:67C3  32 3C C2            	ld	(SCC_regMIXER),a
    1543.  01:67C6                      
    1544.  01:67C6  CB 6B               	bit	5,e
    1545.  01:67C8  CA DB 67            	jp	z,_noNoise
    1546.  01:67CB  7E                  	ld	a,(hl)	; get	the deviation	
    1547.  01:67CC  23                  	inc	hl
    1548.  01:67CD  CB 73               	bit	6,e
    1549.  01:67CF  CA D5 67            	jp	z,.skip
    1550.  01:67D2  DD 86 FE            	add	(ix+TRACK_Noise)
    1551.  01:67D5  DD 77 FE            .skip:	ld	(ix+TRACK_Noise),a
    1552.  01:67D8  32 A5 C1            	ld	(AY_regNOISE),a
    1553.  01:67DB                      	
    1554.  01:67DB                      _noNoise:
    1555.  01:67DB                      	;-------------------------------
    1556.  01:67DB                      	;
    1557.  01:67DB                      	; TONE
    1558.  01:67DB                      	;
    1559.  01:67DB                      	;-------------------------------
    1560.  01:67DB  CB 63               	bit	4,e		; do we have tone?
    1561.  01:67DD  CA E8 67            	jp	z,_pcAY_noTone
    1562.  01:67E0                      
    1563.  01:67E0                      	;-- enable tone output
    1564.  01:67E0  3A 3C C2            	ld	a,(SCC_regMIXER)
    1565.  01:67E3  F6 10               	or	16
    1566.  01:67E5  32 3C C2            	ld	(SCC_regMIXER),a
    1567.  01:67E8                      _pcAY_noTone:
    1568.  01:67E8  DD 46 FB            	ld	b,(ix+TRACK_ToneAdd)	; get	the current	deviation	
    1569.  01:67EB  DD 4E FC            	ld	c,(ix+TRACK_ToneAdd+1)
    1570.  01:67EE                      
    1571.  01:67EE  CB 53               	bit	2,e
    1572.  01:67F0  CA 05 68            	jp	z,_pcAY_noToneAdd
    1573.  01:67F3  7E                  	ld	a,(hl)
    1574.  01:67F4  23                  	inc	hl
    1575.  01:67F5  81                  	add	c
    1576.  01:67F6  4F                  	ld	c,a
    1577.  01:67F7  DD 71 FC            	ld	(ix+TRACK_ToneAdd+1),c
    1578.  01:67FA  D2 FE 67            	jp	nc,.skip
    1579.  01:67FD  04                  	inc	b
    1580.  01:67FE                      .skip:
    1581.  01:67FE  7E                  	ld	a,(hl)
    1582.  01:67FF  23                  	inc	hl
    1583.  01:6800  80                  	add	b
    1584.  01:6801  47                  	ld	b,a
    1585.  01:6802  DD 70 FB            	ld	(ix+TRACK_ToneAdd),b
    1586.  01:6805                      _pcAY_noToneAdd:	
    1587.  01:6805  DD 75 F2            	ld	(ix+TRACK_MacroPointer),l	;--- store pointer for next time
    1588.  01:6808  DD 74 F3            	ld	(ix+TRACK_MacroPointer+1),h	
    1589.  01:680B                      
    1590.  01:680B  08                  	ex	af,af'			;';restore note offset
    1591.  01:680C  2A 18 C0            	ld	hl,(replay_Tonetable)
    1592.  01:680F  85                  	add	a,l
    1593.  01:6810  6F                  	ld	l,a
    1594.  01:6811  D2 15 68            	jp	nc,.skip
    1595.  01:6814  24                  	inc	h
    1596.  01:6815                      .skip:
    1597.  01:6815  7E                  	ld	a,(hl)	;--- Store the note tone value in hl
    1598.  01:6816  23                  	inc	hl
    1599.  01:6817  66                  	ld	h,(hl)
    1600.  01:6818  6F                  	ld	l,a
    1601.  01:6819                      		
    1602.  01:6819  09                  	add	hl,bc		;--- Store tone deviation		
    1603.  01:681A                      
    1604.  01:681A                      	; set	the detune.
    1605.  01:681A  ED 73 00 C0         	ld	(_SP_Storage),sp
    1606.  01:681E  DD F9               	ld	sp,ix
    1607.  01:6820  C1                  	pop	bc		; cmd detume
    1608.  01:6821  09                  	add	hl,bc
    1609.  01:6822  C1                  	pop	bc		; cmd toneadd
    1610.  01:6823  09                  	add	hl,bc
    1611.  01:6824  C1                  	pop	bc		; cmd tone slide add
    1612.  01:6825  09                  	add	hl,bc
    1613.  01:6826  ED 7B 00 C0         	ld	sp,(_SP_Storage)
    1614.  01:682A                      
    1615.  01:682A                      ;	ld	c,(ix+TRACK_cmd_detune)
    1616.  01:682A                      ;	ld	b,(ix+TRACK_cmd_detune+1)
    1617.  01:682A                      ;	add	hl,bc
    1618.  01:682A                      ;
    1619.  01:682A                      ;	ld	c,(ix+TRACK_cmd_ToneAdd)
    1620.  01:682A                      ;	ld	b,(ix+TRACK_cmd_ToneAdd+1)
    1621.  01:682A                      ;	add	hl,bc
    1622.  01:682A                      ;	
    1623.  01:682A                      ;	ld	c,(ix+TRACK_cmd_ToneSlideAdd)
    1624.  01:682A                      ;	ld	b,(ix+TRACK_cmd_ToneSlideAdd+1)
    1625.  01:682A                      ;	
    1626.  01:682A                      ;	add	hl,bc
    1627.  01:682A                      
    1628.  01:682A                      	;-------------------------------
    1629.  01:682A                      	;
    1630.  01:682A                      	; END of macro?
    1631.  01:682A                      	;
    1632.  01:682A                      	;-------------------------------
    1633.  01:682A  CB 5B               	bit	3,e		
    1634.  01:682C  C8                  	ret	z
    1635.  01:682D                      	
    1636.  01:682D                      	;--- now get new pointer
    1637.  01:682D  DD 4E F4            	ld	c,(ix+TRACK_MacroStart)
    1638.  01:6830  DD 46 F5            	ld	b,(ix+TRACK_MacroStart+1)
    1639.  01:6833                      	
    1640.  01:6833  DD 7E F6            	ld	a,(ix+TRACK_MacroRestart)	
    1641.  01:6836  81                  	add	a,c
    1642.  01:6837  4F                  	ld	c,a
    1643.  01:6838  D2 3C 68            	jp	nc,.skip2
    1644.  01:683B  04                  	inc	b
    1645.  01:683C                      .skip2:		
    1646.  01:683C                      	;--- Store the macro start	
    1647.  01:683C  DD 71 F2            	ld	(ix+TRACK_MacroPointer),c
    1648.  01:683F  DD 70 F3            	ld	(ix+TRACK_MacroPointer+1),b		
    1649.  01:6842                      
    1650.  01:6842  C9                  	ret
    1651.  01:6843                      	
    1652.  01:6843                      _pcAY_noNoteActive:
    1653.  01:6843  AF                  	xor	a
    1654.  01:6844  32 3B C2            	ld	(SCC_regVOLE),a
    1655.  01:6847  C9                  	ret	
    1656.  01:6848                      
    1657.  01:6848                      ;---- This is for debugging only	
    1658.  01:6848                      ;stop_debug:
    1659.  01:6848                      ;	halt
    1660.  01:6848                      ;	jp	stop_debug	
    1661.  01:6848                      ;	
    1662.  01:6848                      ;PROCESS_CMDLIST:	
    1663.  01:6848                      ;[13]	dw 	stop_debug
    1664.  01:6848                      
    1665.  01:6848                      _pcAY_cmdlist:
    1666.  01:6848  AC 69               	dw	_pcAY_cmdc_wave_duty		;d
    1667.  01:684A  D9 69               	dw	_pcAY_cmdd_wave_cut		;e
    1668.  01:684C  1A 6A               	dw	_pcAY_cmde_wave_compr		;f
    1669.  01:684E  69 6A               	dw	_pcAY_cmd13_short_arp		;10
    1670.  01:6850  7A 6A               	dw	_pcAY_cmd14_fine_up		;11
    1671.  01:6852  94 6A               	dw	_pcAY_cmd15_fine_down		;12
    1672.  01:6854  BB 6A               	dw	_pcAY_cmd19_note_delay		;13
    1673.  01:6856  AE 6A               	dw	_pcAY_cmdXX_note_cut		;14
    1674.  01:6858                      	
    1675.  01:6858  7E 68               	dw	_pcAY_cmd0_arpeggio		;15
    1676.  01:685A  B5 68               	dw	_pcAY_cmd1_port_up		;16
    1677.  01:685C  C9 68               	dw	_pcAY_cmd2_port_down		;17
    1678.  01:685E  DD 68               	dw	_pcAY_cmd3_port_tone		;18
    1679.  01:6860  1E 69               	dw	_pcAY_cmd4_vibrato		;19
    1680.  01:6862  68 69               	dw	_pcAY_cmd5_vibrato_port_tone	;1a
    1681.  01:6864  6E 69               	dw	_pcAY_cmd6_vibrato_vol		;1b
    1682.  01:6866  74 69               	dw	_pcAY_cmd7_vol_slide		;1c
    1683.  01:6868  A1 69               	dw	_pcAY_cmd8_macro_offset		;1d
    1684.  01:686A  00 00               	dw	0	;env shape
    1685.  01:686C                      
    1686.  01:686C  7E 68               	dw	_pcAY_cmd0_arpeggio		;1e
    1687.  01:686E  B5 68               	dw	_pcAY_cmd1_port_up		;1f
    1688.  01:6870  C9 68               	dw	_pcAY_cmd2_port_down		;20
    1689.  01:6872  DD 68               	dw	_pcAY_cmd3_port_tone		;21
    1690.  01:6874  1E 69               	dw	_pcAY_cmd4_vibrato
    1691.  01:6876  68 69               	dw	_pcAY_cmd5_vibrato_port_tone
    1692.  01:6878  6E 69               	dw	_pcAY_cmd6_vibrato_vol
    1693.  01:687A  74 69               	dw	_pcAY_cmd7_vol_slide
    1694.  01:687C  A1 69               	dw	_pcAY_cmd8_macro_offset
    1695.  01:687E                      
    1696.  01:687E                      			
    1697.  01:687E                      _pcAY_cmd0_arpeggio:
    1698.  01:687E  DD 7E 0F            	ld	a,(ix+TRACK_Timer)
    1699.  01:6881  CB 47               	bit	0,a
    1700.  01:6883  CA 9A 68            	jp	z,.step2
    1701.  01:6886                      
    1702.  01:6886                      	;--- set x
    1703.  01:6886  DD 36 0F 02         	ld	(ix+TRACK_Timer),2
    1704.  01:688A  AF                  	xor	a
    1705.  01:688B  DD 7E 05            	ld	a,(ix+TRACK_cmd_0)
    1706.  01:688E  E6 F0               	and	0xf0
    1707.  01:6890  1F                  	rra
    1708.  01:6891  1F                  	rra
    1709.  01:6892  1F                  	rra
    1710.  01:6893  1F                  	rra
    1711.  01:6894  DD 77 0B            	ld	(ix+TRACK_cmd_NoteAdd),a		
    1712.  01:6897  C3 03 67            	jp	_pcAY_commandEND
    1713.  01:689A                      
    1714.  01:689A                      	
    1715.  01:689A                      .step2:
    1716.  01:689A  CB 4F               	bit	1,a
    1717.  01:689C  CA AE 68            	jp	z,.step3
    1718.  01:689F                      
    1719.  01:689F                      	;--- set y
    1720.  01:689F  DD 36 0F 00         	ld	(ix+TRACK_Timer),0
    1721.  01:68A3  DD 7E 05            	ld	a,(ix+TRACK_cmd_0)
    1722.  01:68A6  E6 0F               	and	0x0f
    1723.  01:68A8  DD 77 0B            	ld	(ix+TRACK_cmd_NoteAdd),a		
    1724.  01:68AB  C3 03 67            	jp	_pcAY_commandEND
    1725.  01:68AE                      	
    1726.  01:68AE                      .step3:
    1727.  01:68AE                      	;--- set none
    1728.  01:68AE  DD 36 0F 01         	ld	(ix+TRACK_Timer),1
    1729.  01:68B2  C3 03 67            	jp	_pcAY_commandEND
    1730.  01:68B5                      	
    1731.  01:68B5                      	
    1732.  01:68B5                      _pcAY_cmd1_port_up:
    1733.  01:68B5  DD 7E 06            	ld	a,(ix+TRACK_cmd_1)
    1734.  01:68B8  47                  	ld	b,a
    1735.  01:68B9  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    1736.  01:68BC  90                  	sub	b
    1737.  01:68BD  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    1738.  01:68C0  D2 03 67            	jp	nc,_pcAY_commandEND
    1739.  01:68C3  DD 35 01            	dec	(ix+TRACK_cmd_ToneSlideAdd+1)
    1740.  01:68C6  C3 03 67            	jp	_pcAY_commandEND
    1741.  01:68C9                      	
    1742.  01:68C9                      _pcAY_cmd2_port_down:
    1743.  01:68C9  DD 7E 07            	ld	a,(ix+TRACK_cmd_2)
    1744.  01:68CC  47                  	ld	b,a
    1745.  01:68CD  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    1746.  01:68D0  80                  	add	b
    1747.  01:68D1  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    1748.  01:68D4  D2 03 67            	jp	nc,_pcAY_commandEND
    1749.  01:68D7  DD 34 01            	inc	(ix+TRACK_cmd_ToneSlideAdd+1)
    1750.  01:68DA  C3 03 67            	jp	_pcAY_commandEND
    1751.  01:68DD                      
    1752.  01:68DD                      
    1753.  01:68DD                      _pcAY_cmd3_port_tone:
    1754.  01:68DD  DD 7E 08            	ld	a,(ix+TRACK_cmd_3)
    1755.  01:68E0  DD 6E 00            	ld	l,(ix+TRACK_cmd_ToneSlideAdd)
    1756.  01:68E3  DD 66 01            	ld	h,(ix+TRACK_cmd_ToneSlideAdd+1)
    1757.  01:68E6  CB 7C               	bit	7,h
    1758.  01:68E8  CA FE 68            	jp	z,_pcAY_cmd3_sub
    1759.  01:68EB                      _pcAY_cmd3_add:
    1760.  01:68EB                      	;pos slide
    1761.  01:68EB  85                  	add	a,l
    1762.  01:68EC  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    1763.  01:68EF  D2 03 67            	jp	nc,_pcAY_commandEND
    1764.  01:68F2  24                  	inc	h					
    1765.  01:68F3  CB 7C               	bit	7,h
    1766.  01:68F5  CA 11 69            	jp	z,_pcAY_cmd3_stop			; delta turned pos ?
    1767.  01:68F8  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h
    1768.  01:68FB  C3 03 67            	jp	_pcAY_commandEND
    1769.  01:68FE                      _pcAY_cmd3_sub:
    1770.  01:68FE                      	;negative slide	
    1771.  01:68FE  4F                  	ld	c,a
    1772.  01:68FF  AF                  	xor	a
    1773.  01:6900  47                  	ld	b,a
    1774.  01:6901  ED 42               	sbc	hl,bc
    1775.  01:6903  CB 7C               	bit	7,h
    1776.  01:6905  C2 11 69            	jp	nz,_pcAY_cmd3_stop			; delta turned neg ?
    1777.  01:6908  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
    1778.  01:690B  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h
    1779.  01:690E  C3 03 67            	jp	_pcAY_commandEND
    1780.  01:6911                      _pcAY_cmd3_stop:	
    1781.  01:6911  CB 9A               	res	B_TRGCMD,d		;(ix+TRACK_Flags)
    1782.  01:6913  DD 36 00 00         	ld	(ix+TRACK_cmd_ToneSlideAdd),0
    1783.  01:6917  DD 36 01 00         	ld	(ix+TRACK_cmd_ToneSlideAdd+1),0	
    1784.  01:691B  C3 03 67            	jp	_pcAY_commandEND
    1785.  01:691E                      
    1786.  01:691E                      
    1787.  01:691E                      	;-- vibrato	
    1788.  01:691E                      _pcAY_cmd4_vibrato:
    1789.  01:691E  2A 16 C0            	ld	hl,(replay_vib_table)
    1790.  01:6921                      	;--- Get next step
    1791.  01:6921  DD 7E 10            	ld	a,(IX+TRACK_Step)
    1792.  01:6924  DD 86 0A            	add	(ix+TRACK_cmd_4_step)
    1793.  01:6927  E6 3F               	and	$3F			; max	32
    1794.  01:6929  DD 77 10            	ld	(ix+TRACK_Step),a
    1795.  01:692C                      	
    1796.  01:692C  CB 6F               	bit	5,a			; step 32-63 the neg	
    1797.  01:692E  CA 50 69            	jp	z,_pcAY_cmd4pos
    1798.  01:6931                      
    1799.  01:6931                      ; neg	
    1800.  01:6931  E6 1F               	and	$1f
    1801.  01:6933  85                  	add	l
    1802.  01:6934  6F                  	ld	l,a
    1803.  01:6935  D2 39 69            	jp	nc,.skip
    1804.  01:6938  24                  	inc	h
    1805.  01:6939                      .skip:
    1806.  01:6939  7E                  	ld	a,(hl)
    1807.  01:693A                      	;apply depth
    1808.  01:693A  DD 46 09            	ld	b,(ix+TRACK_cmd_4_depth)
    1809.  01:693D                      .loop:
    1810.  01:693D  CB 3F               	srl	a
    1811.  01:693F  10 FC               	djnz	.loop
    1812.  01:6941                      ;	and	$0f
    1813.  01:6941                      
    1814.  01:6941  ED 44               	neg
    1815.  01:6943  CA 5E 69            	jp	z,_pcAY_cmd4_zero			; $ff00 gives strange result ;)	
    1816.  01:6946  DD 77 02            	ld	(ix+TRACK_cmd_ToneAdd),a
    1817.  01:6949  DD 36 03 FF         	ld	(ix+TRACK_cmd_ToneAdd+1),0xff
    1818.  01:694D  C3 03 67            	jp	_pcAY_commandEND
    1819.  01:6950                      
    1820.  01:6950                      _pcAY_cmd4pos:	
    1821.  01:6950                      ;	and	$1f
    1822.  01:6950  85                  	add	l
    1823.  01:6951  6F                  	ld	l,a
    1824.  01:6952  D2 56 69            	jp	nc,.skip
    1825.  01:6955  24                  	inc	h
    1826.  01:6956                      .skip:
    1827.  01:6956  7E                  	ld	a,(hl)
    1828.  01:6957                      	;apply depth
    1829.  01:6957  DD 46 09            	ld	b,(ix+TRACK_cmd_4_depth)
    1830.  01:695A                      .loop:
    1831.  01:695A  CB 3F               	srl	a
    1832.  01:695C  10 FC               	djnz	.loop
    1833.  01:695E                      _pcAY_cmd4_zero:
    1834.  01:695E  DD 77 02            	ld	(ix+TRACK_cmd_ToneAdd),a
    1835.  01:6961  DD 36 03 00         	ld	(ix+TRACK_cmd_ToneAdd+1),0
    1836.  01:6965  C3 03 67            	jp	_pcAY_commandEND
    1837.  01:6968                      		
    1838.  01:6968                      	
    1839.  01:6968                      
    1840.  01:6968                      _pcAY_cmd5_vibrato_port_tone:
    1841.  01:6968  CD 7A 69            	call	_pcAY_cmdasub
    1842.  01:696B  C3 DD 68            	jp	_pcAY_cmd3_port_tone
    1843.  01:696E                      	
    1844.  01:696E                      _pcAY_cmd6_vibrato_vol:
    1845.  01:696E  CD 7A 69            	call	_pcAY_cmdasub
    1846.  01:6971  C3 1E 69            	jp	_pcAY_cmd4_vibrato	
    1847.  01:6974                      
    1848.  01:6974                      _pcAY_cmd7_vol_slide:
    1849.  01:6974  CD 7A 69            	call	_pcAY_cmdasub
    1850.  01:6977  C3 03 67            	jp	_pcAY_commandEND
    1851.  01:697A                      
    1852.  01:697A                      _pcAY_cmdasub:
    1853.  01:697A  DD 35 0F            	dec	(ix+TRACK_Timer)
    1854.  01:697D  C0                  	ret	nz
    1855.  01:697E                      		
    1856.  01:697E                      	; vol	slide
    1857.  01:697E  DD 7E 0C            	ld	a,(ix+TRACK_cmd_A)
    1858.  01:6981  4F                  	ld	c,a
    1859.  01:6982  E6 7F               	and	$7f
    1860.  01:6984  DD 77 0F            	ld	(ix+TRACK_Timer),a
    1861.  01:6987                      
    1862.  01:6987  DD 7E FF            	ld	a,(IX+TRACK_cmd_VolumeAdd)
    1863.  01:698A  CB 79               	bit	7,c
    1864.  01:698C  CA 98 69            	jp	z,_pcAY_cmda_inc
    1865.  01:698F                      _pcAY_cmda_dec:
    1866.  01:698F  FE 88               	cp	0x88
    1867.  01:6991  C8                  	ret	z
    1868.  01:6992  D6 08               	sub	8
    1869.  01:6994  DD 77 FF            	ld	(ix+TRACK_cmd_VolumeAdd),a
    1870.  01:6997  C9                  	ret
    1871.  01:6998                      _pcAY_cmda_inc:
    1872.  01:6998  FE 78               	cp	0x78
    1873.  01:699A  C8                  	ret	z
    1874.  01:699B  C6 08               	add	8	
    1875.  01:699D  DD 77 FF            	ld	(ix+TRACK_cmd_VolumeAdd),a
    1876.  01:69A0  C9                  	ret
    1877.  01:69A1                      	
    1878.  01:69A1                      _pcAY_cmd8_macro_offset:
    1879.  01:69A1  DD 35 0F            	dec	(ix+TRACK_Timer)
    1880.  01:69A4  C2 03 67            	jp	nz,_pcAY_commandEND
    1881.  01:69A7  CB 9A               	res	B_TRGCMD,d			;(ix+TRACK_Flags)
    1882.  01:69A9  C3 03 67            	jp	_pcAY_commandEND
    1883.  01:69AC                      
    1884.  01:69AC                      
    1885.  01:69AC                      _pcAY_cmdc_wave_duty:
    1886.  01:69AC                      	;=================
    1887.  01:69AC                      	; Waveform PWM / Duty Cycle
    1888.  01:69AC                      	;=================
    1889.  01:69AC  CB 9A               	res	B_TRGCMD,d			;(ix+TRACK_Flags)	; reset command
    1890.  01:69AE  CB B2               	res	B_TRGWAV,d			;(ix+TRACK_Flags)	; reset normal wave update
    1891.  01:69B0                      
    1892.  01:69B0                      	;get the waveform	start	in [DE]
    1893.  01:69B0  21 AD C1            	ld	hl,_0x9800
    1894.  01:69B3  FD 7C               	ld	a,iyh		;ixh contains chan#
    1895.  01:69B5  0F                  	rrca			; a mac value is 4 so
    1896.  01:69B6  0F                  	rrca			; 3 times rrca is	X32
    1897.  01:69B7  0F                  	rrca			; max	result is 128.
    1898.  01:69B8  85                  	add	a,l
    1899.  01:69B9  6F                  	ld	l,a
    1900.  01:69BA  D2 BE 69            	jp	nc,.skip
    1901.  01:69BD  24                  	inc	h
    1902.  01:69BE                      .skip:
    1903.  01:69BE  DD 46 0D            	ld	b,(ix+TRACK_cmd_B)
    1904.  01:69C1  04                  	inc	b
    1905.  01:69C2                      
    1906.  01:69C2  0E 60               	ld	c,96	
    1907.  01:69C4  3E 20               	ld	a,32
    1908.  01:69C6  90                  	sub	b
    1909.  01:69C7                      _wspw_loop_h:
    1910.  01:69C7  71                  	ld	(hl),c
    1911.  01:69C8  23                  	inc	hl
    1912.  01:69C9  10 FC               	djnz	_wspw_loop_h
    1913.  01:69CB                      	
    1914.  01:69CB  A7                  	and	a
    1915.  01:69CC  CA 03 67            	jp	z,_pcAY_commandEND
    1916.  01:69CF                      	
    1917.  01:69CF  0E A0               	ld	c,-96
    1918.  01:69D1  47                  	ld	b,a
    1919.  01:69D2                      _wspw_loop_l:
    1920.  01:69D2  71                  	ld	(hl),c
    1921.  01:69D3  23                  	inc	hl
    1922.  01:69D4  10 FC               	djnz	_wspw_loop_l
    1923.  01:69D6                      
    1924.  01:69D6  C3 03 67            	jp	_pcAY_commandEND
    1925.  01:69D9                      	
    1926.  01:69D9                      	
    1927.  01:69D9                      	
    1928.  01:69D9                      _pcAY_cmdd_wave_cut:
    1929.  01:69D9                      	;=================
    1930.  01:69D9                      	; Waveform Cut
    1931.  01:69D9                      	;=================
    1932.  01:69D9                      
    1933.  01:69D9  CB 9A               	res	B_TRGCMD,d		;(ix+TRACK_Flags)	; reset command
    1934.  01:69DB  CB B2               	res	B_TRGWAV,d		;(ix+TRACK_Flags)	; reset normal wave update
    1935.  01:69DD  7A                  	ld	a,d
    1936.  01:69DE  08                  	ex	AF,AF;'
    1937.  01:69DF                      
    1938.  01:69DF                      	;get the waveform	start	in [DE]
    1939.  01:69DF  11 AD C1            	ld	de,_0x9800
    1940.  01:69E2  FD 7C               	ld	a,iyh		;ixh contains chan#
    1941.  01:69E4  0F                  	rrca			; a mac value is 4 so
    1942.  01:69E5  0F                  	rrca			; 3 times rrca is	X32
    1943.  01:69E6  0F                  	rrca			; max	result is 128.
    1944.  01:69E7  83                  	add	a,e
    1945.  01:69E8  5F                  	ld	e,a
    1946.  01:69E9  D2 ED 69            	jp	nc,.skip
    1947.  01:69EC  14                  	inc	d
    1948.  01:69ED                      .skip:
    1949.  01:69ED  DD 7E F0            	ld	a,(ix+TRACK_Waveform)
    1950.  01:69F0  87                  	add	a,a
    1951.  01:69F1  87                  	add	a,a
    1952.  01:69F2  87                  	add	a,a	
    1953.  01:69F3                      
    1954.  01:69F3  6F                  	ld	l,a
    1955.  01:69F4  26 00               	ld	h,0
    1956.  01:69F6  29                  	add	hl,hl
    1957.  01:69F7  29                  	add	hl,hl
    1958.  01:69F8                      		
    1959.  01:69F8  ED 4B 06 C0         	ld	  bc,(replay_wavebase)
    1960.  01:69FC  09                  	add	  hl,bc
    1961.  01:69FD                      
    1962.  01:69FD  DD 7E 0D            	ld	a,(ix+TRACK_cmd_B)
    1963.  01:6A00  3C                  	inc	a
    1964.  01:6A01  87                  	add	a
    1965.  01:6A02  4F                  	ld	c,a
    1966.  01:6A03  06 00               	ld	b,0
    1967.  01:6A05  ED B0               	ldir
    1968.  01:6A07                      	
    1969.  01:6A07  EB                  	EX	DE,HL
    1970.  01:6A08  08                  	EX	AF,AF'		;'
    1971.  01:6A09  57                  	LD	D,A
    1972.  01:6A0A                      	
    1973.  01:6A0A  D6 20               	sub	32
    1974.  01:6A0C  ED 44               	neg	
    1975.  01:6A0E  CA 03 67            	jp	z,_pcAY_commandEND	
    1976.  01:6A11                      	
    1977.  01:6A11  47                  	ld	b,a
    1978.  01:6A12  AF                  	xor	a
    1979.  01:6A13                      _wsc_l:
    1980.  01:6A13  77                  	ld	(HL),a
    1981.  01:6A14  23                  	inc	HL
    1982.  01:6A15  10 FC               	djnz	_wsc_l
    1983.  01:6A17                      	
    1984.  01:6A17  C3 03 67            	jp	_pcAY_commandEND
    1985.  01:6A1A                      		
    1986.  01:6A1A                      	
    1987.  01:6A1A                      	
    1988.  01:6A1A                      _pcAY_cmde_wave_compr:
    1989.  01:6A1A                      	;=================
    1990.  01:6A1A                      	; Waveform Compress
    1991.  01:6A1A                      	;=================
    1992.  01:6A1A  CB 9A               	res	B_TRGCMD,d	;(ix+TRACK_Flags)	; reset command
    1993.  01:6A1C  CB B2               	res	B_TRGWAV,d	;(ix+TRACK_Flags)	; reset normal wave update
    1994.  01:6A1E  7A                  	ld	a,d
    1995.  01:6A1F  08                  	ex	AF,AF;'
    1996.  01:6A20                      	
    1997.  01:6A20                      	;get the waveform	start	in [DE]
    1998.  01:6A20  11 AD C1            	ld	de,_0x9800
    1999.  01:6A23  FD 7C               	ld	a,iyh		;ixh contains chan#
    2000.  01:6A25  0F                  	rrca			; a mac value is 4 so
    2001.  01:6A26  0F                  	rrca			; 3 times rrca is	X32
    2002.  01:6A27  0F                  	rrca			; max	result is 128.
    2003.  01:6A28  83                  	add	a,e
    2004.  01:6A29  5F                  	ld	e,a
    2005.  01:6A2A  D2 2E 6A            	jp	nc,.skip
    2006.  01:6A2D  14                  	inc	d
    2007.  01:6A2E                      .skip:
    2008.  01:6A2E  DD 7E F0            	ld	a,(ix+TRACK_Waveform)
    2009.  01:6A31  87                  	add	a,a
    2010.  01:6A32  87                  	add	a,a
    2011.  01:6A33  87                  	add	a,a	
    2012.  01:6A34                      
    2013.  01:6A34  6F                  	ld	l,a
    2014.  01:6A35  26 00               	ld	h,0
    2015.  01:6A37  29                  	add	hl,hl
    2016.  01:6A38  29                  	add	hl,hl
    2017.  01:6A39                      		
    2018.  01:6A39  ED 4B 06 C0         	ld	  bc,(replay_wavebase)
    2019.  01:6A3D  09                  	add	  hl,bc
    2020.  01:6A3E                      
    2021.  01:6A3E  DD 7E 0D            	ld	a,(ix+TRACK_cmd_B)
    2022.  01:6A41  01 40 00            	ld	bc,0x0040
    2023.  01:6A44  0F                  	rrca	; x32
    2024.  01:6A45  0F                  	rrca
    2025.  01:6A46  0F                  	rrca
    2026.  01:6A47  C6 1F               	add	31
    2027.  01:6A49  FD 6F               	ld	iyl,a		; fraction
    2028.  01:6A4B  AF                  	xor	a	
    2029.  01:6A4C                      _wcomp_loop:
    2030.  01:6A4C  ED A0               	ldi			
    2031.  01:6A4E  0D                  	dec	c
    2032.  01:6A4F  CA 5E 6A            	jp	z,.skip
    2033.  01:6A52  FD 85               	add	iyl
    2034.  01:6A54  D2 4C 6A            	jp	nc,_wcomp_loop
    2035.  01:6A57  23                  	inc	hl
    2036.  01:6A58  04                  	inc	b
    2037.  01:6A59  0D                  	dec	c
    2038.  01:6A5A  0D                  	dec	c
    2039.  01:6A5B  C2 4C 6A            	jp	nz,_wcomp_loop
    2040.  01:6A5E                      	
    2041.  01:6A5E                      	;--- remaining data
    2042.  01:6A5E                      .skip:
    2043.  01:6A5E  2B                  	dec	hl
    2044.  01:6A5F  7E                  	ld	a,(hl)
    2045.  01:6A60                      .loop:
    2046.  01:6A60  12                  	ld	(de),a
    2047.  01:6A61  13                  	inc	de
    2048.  01:6A62  10 FC               	djnz	.loop
    2049.  01:6A64                      	
    2050.  01:6A64  08                  	EX	AF,AF'		;'
    2051.  01:6A65  57                  	LD	D,A	
    2052.  01:6A66  C3 03 67            	jp	_pcAY_commandEND		
    2053.  01:6A69                      	
    2054.  01:6A69                      
    2055.  01:6A69                      _pcAY_cmd13_short_arp:
    2056.  01:6A69  DD 35 0F            	dec	(ix+TRACK_Timer)
    2057.  01:6A6C  CB 42               	bit	B_TRGNOT,d		;(ix+TRACK_Timer)
    2058.  01:6A6E  CA 03 67            	jp	z,_pcAY_commandEND
    2059.  01:6A71  DD 7E 0E            	ld	a,(ix+TRACK_cmd_E)
    2060.  01:6A74  DD 77 0B            	ld	(ix+TRACK_cmd_NoteAdd),a		
    2061.  01:6A77  C3 03 67            	jp	_pcAY_commandEND
    2062.  01:6A7A                      
    2063.  01:6A7A                      _pcAY_cmd14_fine_up:
    2064.  01:6A7A  DD 35 0F            	dec	(ix+TRACK_Timer)
    2065.  01:6A7D  C2 03 67            	jp	nz,_pcAY_commandEND
    2066.  01:6A80                      
    2067.  01:6A80  CB 9A               	res	B_TRGCMD,d			;(ix+TRACK_Flags)
    2068.  01:6A82  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    2069.  01:6A85  DD 86 0E            	add	(ix+TRACK_cmd_E)
    2070.  01:6A88  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    2071.  01:6A8B  D2 03 67            	jp	nc,_pcAY_commandEND	
    2072.  01:6A8E  DD 34 01            	inc	(ix+TRACK_cmd_ToneSlideAdd+1)
    2073.  01:6A91  C3 03 67            	jp	_pcAY_commandEND	
    2074.  01:6A94                      
    2075.  01:6A94                      _pcAY_cmd15_fine_down:
    2076.  01:6A94  DD 35 0F            	dec	(ix+TRACK_Timer)
    2077.  01:6A97  C2 03 67            	jp	nz,_pcAY_commandEND
    2078.  01:6A9A                      
    2079.  01:6A9A  CB 9A               	res	B_TRGCMD,d		;(ix+TRACK_Flags)
    2080.  01:6A9C  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    2081.  01:6A9F  DD 96 0E            	sub	(ix+TRACK_cmd_E)
    2082.  01:6AA2  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    2083.  01:6AA5  D2 03 67            	jp	nc,_pcAY_commandEND	
    2084.  01:6AA8  DD 35 01            	dec	(ix+TRACK_cmd_ToneSlideAdd+1)
    2085.  01:6AAB  C3 03 67            	jp	_pcAY_commandEND	
    2086.  01:6AAE                      
    2087.  01:6AAE                      
    2088.  01:6AAE                      _pcAY_cmdXX_note_cut:
    2089.  01:6AAE  DD 35 0F            	dec	(ix+TRACK_Timer)
    2090.  01:6AB1  C2 03 67            	jp	nz,_pcAY_commandEND
    2091.  01:6AB4                      	
    2092.  01:6AB4                      	; stop note
    2093.  01:6AB4  CB 9A               	res	B_TRGCMD,d	; set	note bit to	0
    2094.  01:6AB6  CB 82               	res	B_TRGNOT,d
    2095.  01:6AB8  C3 03 67            	jp	_pcAY_commandEND		
    2096.  01:6ABB                      	
    2097.  01:6ABB                      _pcAY_cmd19_note_delay:
    2098.  01:6ABB                      	; note delay
    2099.  01:6ABB  DD 35 0F            	dec	(ix+TRACK_Timer)
    2100.  01:6ABE  C2 03 67            	jp	nz,_pcAY_commandEND	; no delay yet
    2101.  01:6AC1                      
    2102.  01:6AC1                      	; trigger note
    2103.  01:6AC1  DD 7E 0E            	ld	a,(ix+TRACK_cmd_E)		
    2104.  01:6AC4  DD 77 F7            	ld	(ix+TRACK_Note),a		; set	the note val
    2105.  01:6AC7  CB C2               	set	B_TRGNOT,d	;(ix+TRACK_Flags)		; set	trigger note flag
    2106.  01:6AC9  CB 9A               	res	B_TRGCMD,d	;(ix+TRACK_Flags)		; reset tiggger cmd flag
    2107.  01:6ACB                      	
    2108.  01:6ACB  C3 03 67            	jp	_pcAY_commandEND	
    2109.  01:6ACE                      
    2110.  01:6ACE                      
    2111.  01:6ACE                      
    2112.  01:6ACE                      ;===========================================================
    2113.  01:6ACE                      ; ---replay_route
    2114.  01:6ACE                      ; Output the data	to the CHIP	registers
    2115.  01:6ACE                      ; 
    2116.  01:6ACE                      ; 
    2117.  01:6ACE                      ;===========================================================
    2118.  01:6ACE                      replay_route:
    2119.  01:6ACE                      ;---------------
    2120.  01:6ACE                      ; P S	G 
    2121.  01:6ACE                      ;---------------
    2122.  01:6ACE                      	;--- Push values to AY HW
    2123.  01:6ACE  06 00               	ld	b,0
    2124.  01:6AD0  0E A0               	ld	c,0xa0
    2125.  01:6AD2  21 9F C1            	ld	hl,AY_registers
    2126.  01:6AD5                      _comp_loop:	
    2127.  01:6AD5  ED 41               	out	(c),b
    2128.  01:6AD7  7E                  	ld	a,(hl)
    2129.  01:6AD8  C6 01               	add	1
    2130.  01:6ADA  D3 A1               	out	(0xa1),a
    2131.  01:6ADC  23                  	inc	hl
    2132.  01:6ADD  7E                  	ld	a,(hl)
    2133.  01:6ADE  CE 00               	adc	a,0
    2134.  01:6AE0  04                  	inc	b
    2135.  01:6AE1  ED 41               	out	(c),b	
    2136.  01:6AE3  23                  	inc	hl
    2137.  01:6AE4  D3 A1               	out	(0xa1),a	
    2138.  01:6AE6  04                  	inc	b
    2139.  01:6AE7  3E 06               	ld	a,6
    2140.  01:6AE9  B8                  	cp	b
    2141.  01:6AEA  C2 D5 6A            	jp	nz,_comp_loop
    2142.  01:6AED                      	
    2143.  01:6AED  78                  	ld	a,b	
    2144.  01:6AEE                      	
    2145.  01:6AEE                      	
    2146.  01:6AEE                      _ptAY_loop:
    2147.  01:6AEE  ED 79               	out	(c),a
    2148.  01:6AF0  0C                  	inc	c
    2149.  01:6AF1  ED A3               	outi
    2150.  01:6AF3  0D                  	dec	c
    2151.  01:6AF4  3C                  	inc	a
    2152.  01:6AF5  FE 0D               	cp	13
    2153.  01:6AF7  20 F5               	jr	nz,_ptAY_loop
    2154.  01:6AF9                      
    2155.  01:6AF9  47                  	ld	b,a
    2156.  01:6AFA  7E                  	ld	a,(hl)
    2157.  01:6AFB  A7                  	and	a
    2158.  01:6AFC  CA 06 6B            	jp	z,_ptAY_noEnv
    2159.  01:6AFF  ED 41               	out	(c),b
    2160.  01:6B01  0C                  	inc	c
    2161.  01:6B02  ED 79               	out 	(c),a
    2162.  01:6B04  36 00               	ld	(hl),0	;reset the envwrite
    2163.  01:6B06                      	
    2164.  01:6B06                      	
    2165.  01:6B06                      _ptAY_noEnv:
    2166.  01:6B06                      ;--------------
    2167.  01:6B06                      ; S C	C 
    2168.  01:6B06                      ;--------------
    2169.  01:6B06  3E 3F               	ld  a,03Fh				; enable SCC
    2170.  01:6B08  32 00 90            	ld  (0x9000),a
    2171.  01:6B0B                      
    2172.  01:6B0B                      	;--- Set the waveforms
    2173.  01:6B0B  21 DB C0            	ld	hl,TRACK_Chan4+17+TRACK_Flags
    2174.  01:6B0E  CB 76               	bit	B_TRGWAV,(hl)
    2175.  01:6B10  CA 1E 6B            	jp	z,.skip
    2176.  01:6B13                      	;--- set wave form
    2177.  01:6B13  CB B6               	res	B_TRGWAV,(hl)
    2178.  01:6B15  3A D2 C0            	ld	a,(TRACK_Chan4+17+TRACK_Waveform)
    2179.  01:6B18  11 00 98            	ld	de,0x9800
    2180.  01:6B1B  CD 76 6B            	call	_write_SCC_wave
    2181.  01:6B1E                      .skip:
    2182.  01:6B1E  21 01 C1            	ld	hl,TRACK_Chan5+17+TRACK_Flags
    2183.  01:6B21  CB 76               	bit	B_TRGWAV,(hl)
    2184.  01:6B23  CA 31 6B            	jp	z,.skip2
    2185.  01:6B26                      	;--- set wave form
    2186.  01:6B26  CB B6               	res	B_TRGWAV,(hl)
    2187.  01:6B28  3A F8 C0            	ld	a,(TRACK_Chan5+17+TRACK_Waveform)
    2188.  01:6B2B  11 20 98            	ld	de,0x9820
    2189.  01:6B2E  CD 76 6B            	call	_write_SCC_wave
    2190.  01:6B31                      .skip2:
    2191.  01:6B31  21 27 C1            	ld	hl,TRACK_Chan6+17+TRACK_Flags
    2192.  01:6B34  CB 76               	bit	B_TRGWAV,(hl)
    2193.  01:6B36  CA 44 6B            	jp	z,.skip3
    2194.  01:6B39                      	;--- set wave form
    2195.  01:6B39  CB B6               	res	B_TRGWAV,(hl)
    2196.  01:6B3B  3A 1E C1            	ld	a,(TRACK_Chan6+17+TRACK_Waveform)
    2197.  01:6B3E  11 40 98            	ld	de,0x9840
    2198.  01:6B41  CD 76 6B            	call	_write_SCC_wave
    2199.  01:6B44                      .skip3:
    2200.  01:6B44  21 4D C1            	ld	hl,TRACK_Chan7+17+TRACK_Flags
    2201.  01:6B47  CB 76               	bit	B_TRGWAV,(hl)
    2202.  01:6B49  CA 57 6B            	jp	z,.skip4
    2203.  01:6B4C                      	;--- set wave form
    2204.  01:6B4C  CB B6               	res	B_TRGWAV,(hl)
    2205.  01:6B4E  3A 44 C1            	ld	a,(TRACK_Chan7+17+TRACK_Waveform)
    2206.  01:6B51  11 60 98            	ld	de,0x9860
    2207.  01:6B54  CD 76 6B            	call	_write_SCC_wave
    2208.  01:6B57                      .skip4:
    2209.  01:6B57                      
    2210.  01:6B57                      scc_reg_update:
    2211.  01:6B57                      
    2212.  01:6B57  3E 3F               	ld  a,03Fh				; enable SCC
    2213.  01:6B59  32 00 90            	ld  (0x9000),a
    2214.  01:6B5C                      
    2215.  01:6B5C                      	;--- Update changed SCC registers.
    2216.  01:6B5C  21 3D C2            	ld hl,oldregs
    2217.  01:6B5F  11 2D C2            	ld de,SCC_registers
    2218.  01:6B62  01 80 98            	ld bc,0x9880
    2219.  01:6B65  3E 10               	ld a,3*5+1
    2220.  01:6B67                      loop:
    2221.  01:6B67  08                  	ex af,af'	;'
    2222.  01:6B68  1A                  	ld a,(de)
    2223.  01:6B69  BE                  	cp (hl)
    2224.  01:6B6A  28 02               	jr z,.skip
    2225.  01:6B6C  77                  	ld (hl),a	     ; update old	registers in ram
    2226.  01:6B6D  02                  	ld (bc),a	     ; update scc	registers
    2227.  01:6B6E                      .skip:	    
    2228.  01:6B6E  23                  	inc hl
    2229.  01:6B6F  13                  	inc de
    2230.  01:6B70  03                  	inc bc
    2231.  01:6B71  08                  	ex af,af'		;'
    2232.  01:6B72  3D                  	dec a
    2233.  01:6B73  20 F2               	jr nz, loop
    2234.  01:6B75  C9                  	ret
    2235.  01:6B76                      
    2236.  01:6B76                      	
    2237.  01:6B76                      	
    2238.  01:6B76                      ;==================
    2239.  01:6B76                      ; _write_SCC_wave
    2240.  01:6B76                      ;
    2241.  01:6B76                      ; Writes waveform	data.	[DE] contains location for data
    2242.  01:6B76                      ; [A]	contains waveform	number + flags for special actions
    2243.  01:6B76                      ; Data is not written to SCC but into RAM	shadow registers.
    2244.  01:6B76                      ;==================
    2245.  01:6B76                      _write_SCC_wave:
    2246.  01:6B76  CB 66               	bit	B_ACTMOR,(hl)
    2247.  01:6B78  C2 8E 6B            	jp	nz,_write_SCC_special
    2248.  01:6B7B  87                  	add	a,a
    2249.  01:6B7C  87                  	add	a,a
    2250.  01:6B7D  87                  	add	a,a	
    2251.  01:6B7E                      
    2252.  01:6B7E  6F                  	ld	l,a
    2253.  01:6B7F  26 00               	ld	h,0
    2254.  01:6B81  29                  	add	hl,hl
    2255.  01:6B82  29                  	add	hl,hl
    2256.  01:6B83                      		
    2257.  01:6B83  ED 4B 06 C0         	ld	  bc,(replay_wavebase)
    2258.  01:6B87  09                  	add	  hl,bc
    2259.  01:6B88  01 20 00            	ld	  bc,32
    2260.  01:6B8B  ED B0               	ldir
    2261.  01:6B8D                      
    2262.  01:6B8D  C9                  	ret
    2263.  01:6B8E                      
    2264.  01:6B8E                      
    2265.  01:6B8E                      _write_SCC_special:
    2266.  01:6B8E  21 1F C0            	ld	hl,replay_morph_buffer+1
    2267.  01:6B91  06 20               	ld	b,32
    2268.  01:6B93                      _wss_l:
    2269.  01:6B93  7E                  	ld	a,(hl)
    2270.  01:6B94  12                  	ld	(de),a
    2271.  01:6B95  23                  	inc	hl
    2272.  01:6B96  23                  	inc	hl
    2273.  01:6B97  13                  	inc	de
    2274.  01:6B98  10 F9               	djnz	_wss_l
    2275.  01:6B9A                      	 
    2276.  01:6B9A                      	
    2277.  01:6B9A  C9                  	ret
    2278.  01:6B9B                      
    2279.  01:6B9B                      	
    2280.  01:6B9B                      ;=============
    2281.  01:6B9B                      ; in [A] the morph active status	
    2282.  01:6B9B                      replay_process_morph:
    2283.  01:6B9B  21 1B C0            	ld	hl,replay_morph_timer
    2284.  01:6B9E  35                  	dec	(hl)
    2285.  01:6B9F  C0                  	ret	nz
    2286.  01:6BA0                      	
    2287.  01:6BA0                      	;---- not sure what to do with this.
    2288.  01:6BA0                      	; trigger any waveform updates
    2289.  01:6BA0  06 04               	ld	b,4
    2290.  01:6BA2  11 26 00            	ld	de,TRACK_REC_SIZE
    2291.  01:6BA5  21 DB C0            	ld	hl,TRACK_Chan4+17+TRACK_Flags
    2292.  01:6BA8                      .loop:	
    2293.  01:6BA8  CB 66               	bit 	B_ACTMOR,(hl)
    2294.  01:6BAA  CA AF 6B            	jp	z,.skip
    2295.  01:6BAD  CB F6               	set	B_TRGWAV,(hl)
    2296.  01:6BAF                      .skip:
    2297.  01:6BAF  19                  	add	hl,de
    2298.  01:6BB0  10 F6               	djnz	.loop	
    2299.  01:6BB2                      	
    2300.  01:6BB2                      	
    2301.  01:6BB2                      	;---- timer ended.
    2302.  01:6BB2  3C                  	inc	a
    2303.  01:6BB3  C2 01 6C            	jp	nz,_rpm_next_step		; if status was !=255 then skip init
    2304.  01:6BB6                      
    2305.  01:6BB6                      	;---- calculate offset
    2306.  01:6BB6  3C                  	inc	a		
    2307.  01:6BB7  32 1A C0            	ld	(replay_morph_active),a		; set status to 1
    2308.  01:6BBA                      ;	ld	(replay_morph_update),a		; after this update the waveforms of the SCC
    2309.  01:6BBA                      
    2310.  01:6BBA  3A 1C C0            	ld	a,(replay_morph_speed)
    2311.  01:6BBD  32 1B C0            	ld	(replay_morph_timer),a
    2312.  01:6BC0                      	
    2313.  01:6BC0                      
    2314.  01:6BC0                      	;--- calculate the delta's
    2315.  01:6BC0  11 1E C0            	ld	de,replay_morph_buffer
    2316.  01:6BC3  2A 06 C0            	ld	hl,(replay_wavebase)
    2317.  01:6BC6  3A 5E C0            	ld	a,(replay_morph_waveform)
    2318.  01:6BC9  87                  	add	a
    2319.  01:6BCA  D2 CE 6B            	jp	nc,.skip2
    2320.  01:6BCD  24                  	inc	h
    2321.  01:6BCE                      .skip2:
    2322.  01:6BCE  85                  	add	a,l
    2323.  01:6BCF  6F                  	ld	l,a
    2324.  01:6BD0  D2 D4 6B            	jp	nc,.skip3
    2325.  01:6BD3  24                  	inc	h
    2326.  01:6BD4                      .skip3:	
    2327.  01:6BD4                      	;---- start calculating
    2328.  01:6BD4  06 20               	ld	b,32		; 32 values
    2329.  01:6BD6                      _rpm_loop:	
    2330.  01:6BD6  13                  	inc	de
    2331.  01:6BD7  1A                  	ld	a,(de)
    2332.  01:6BD8  1B                  	dec	de
    2333.  01:6BD9  C6 80               	add	a,128
    2334.  01:6BDB  4F                  	ld	c,a
    2335.  01:6BDC  7E                  	ld	a,(hl)
    2336.  01:6BDD  C6 80               	add	a,128
    2337.  01:6BDF  B9                  	cp	c
    2338.  01:6BE0  DA F1 6B            	jp	c,_rpm_smaller		; dest is smaller
    2339.  01:6BE3                      
    2340.  01:6BE3                      	
    2341.  01:6BE3                      _rpm_larger:
    2342.  01:6BE3  91                  	sub	c
    2343.  01:6BE4  0F                  	rrca
    2344.  01:6BE5  0F                  	rrca
    2345.  01:6BE6  0F                  	rrca
    2346.  01:6BE7  0F                  	rrca
    2347.  01:6BE8  E6 EF               	and	$ef		; reset bit 5
    2348.  01:6BEA  12                  	ld	(de),a
    2349.  01:6BEB                      	
    2350.  01:6BEB  13                  	inc	de
    2351.  01:6BEC  13                  	inc	de
    2352.  01:6BED  23                  	inc	hl
    2353.  01:6BEE  10 E6               	djnz	_rpm_loop
    2354.  01:6BF0  C9                  	ret	
    2355.  01:6BF1                      	
    2356.  01:6BF1                      _rpm_smaller:
    2357.  01:6BF1  91                  	sub	c
    2358.  01:6BF2  ED 44               	neg	
    2359.  01:6BF4  0F                  	rrca
    2360.  01:6BF5  0F                  	rrca
    2361.  01:6BF6  0F                  	rrca
    2362.  01:6BF7  0F                  	rrca
    2363.  01:6BF8  F6 10               	or	$10		; set bit 5
    2364.  01:6BFA  12                  	ld	(de),a
    2365.  01:6BFB                      	
    2366.  01:6BFB  13                  	inc	de
    2367.  01:6BFC  13                  	inc	de
    2368.  01:6BFD  23                  	inc	hl
    2369.  01:6BFE  10 D6               	djnz	_rpm_loop
    2370.  01:6C00  C9                  	ret		
    2371.  01:6C01                      	
    2372.  01:6C01                      ;============================
    2373.  01:6C01                      _rpm_next_step:
    2374.  01:6C01  3A 1C C0            	ld	a,(replay_morph_speed)
    2375.  01:6C04  32 1B C0            	ld	(replay_morph_timer),a
    2376.  01:6C07                      
    2377.  01:6C07                      	;-- apply the delta's
    2378.  01:6C07  3A 1D C0            	ld	a,(replay_morph_counter)
    2379.  01:6C0A  4F                  	ld	c,a
    2380.  01:6C0B  C6 10               	add	16
    2381.  01:6C0D  32 1D C0            	ld	(replay_morph_counter),a
    2382.  01:6C10  C2 16 6C            	jp	nz,.skip
    2383.  01:6C13                      	;--- end morph
    2384.  01:6C13  32 1A C0            	ld	(replay_morph_active),a
    2385.  01:6C16                      
    2386.  01:6C16                      .skip:
    2387.  01:6C16  0D                  	dec c
    2388.  01:6C17  21 1E C0            	ld	hl,replay_morph_buffer
    2389.  01:6C1A  06 20               	ld	b,32
    2390.  01:6C1C                      _rpm_ns_loop:	
    2391.  01:6C1C  7E                  	ld	a,(hl)
    2392.  01:6C1D  CB 67               	bit 	4,a
    2393.  01:6C1F  CA 34 6C            	jp	z,_rmp_ns_add
    2394.  01:6C22                      _rmp_ns_sub:
    2395.  01:6C22                      	;--- handle corection
    2396.  01:6C22  E6 EF               	and	$ef
    2397.  01:6C24  B9                  	cp	c		; correction < counteR?
    2398.  01:6C25  DA 29 6C            	jp	c,.skip
    2399.  01:6C28  3C                  	inc	a		; if smaller C was set
    2400.  01:6C29                      .skip:
    2401.  01:6C29  E6 1F               	and	00011111b	; keep lower 5 bits
    2402.  01:6C2B  23                  	inc	hl
    2403.  01:6C2C  57                  	ld	d,a
    2404.  01:6C2D  7E                  	ld	a,(hl)
    2405.  01:6C2E  92                  	sub	d
    2406.  01:6C2F  77                  	ld	(hl),a	; load new value
    2407.  01:6C30  23                  	inc	hl
    2408.  01:6C31  10 E9               	djnz	_rpm_ns_loop
    2409.  01:6C33  C9                  	ret	
    2410.  01:6C34                      _rmp_ns_add:
    2411.  01:6C34                      	;--- handle corection
    2412.  01:6C34  B9                  	cp	c		; correction < counter?
    2413.  01:6C35  DA 39 6C            	jp	c,.skip
    2414.  01:6C38  3C                  	inc	a		; if smaller C was set
    2415.  01:6C39                      .skip:
    2416.  01:6C39  E6 1F               	and	00011111b	; keep lower 5 bits
    2417.  01:6C3B  23                  	inc	hl
    2418.  01:6C3C  86                  	add	(hl)		; subtract waveform value
    2419.  01:6C3D  77                  	ld	(hl),a	; load new value
    2420.  01:6C3E  23                  	inc	hl
    2421.  01:6C3F  10 DB               	djnz	_rpm_ns_loop
    2422.  01:6C41  C9                  	ret		
    2423.  01:6C42                      	
    2424.  01:6C42                      
    2425.  01:6C42                      
     411   01:6C42                      	
     412   01:6C42                      FINISH:
     413   01:6C42                      
     414   01:6C42                      
     415   01:6C42                      ;---------------------------------------------------------
     416   01:6C42                      ; Variables
     417   01:6C42                      ;---------------------------------------------------------
     418   01:6C42  (0040)              	MAP 0x0040
     419   01:6C42  (01:0040)           musbuff:	#15*1024
     420   01:6C42                      	
     421   01:6C42  (0000)              	ENDMAP
     422   01:6C42                      	
     423   01:6C42  (C000)              	MAP 0xC000
     424   01:6C42                      	include	"..\TTplayer\code\ttreplayRAM.asm"
       1.  01:6C42                      ;================================
       2.  01:6C42                      ; The new replayer.
       3.  01:6C42                      ;
       4.  01:6C42                      ; Persistent RAM unswappable
       5.  01:6C42                      ;
       6.  01:6C42                      ;================================
       7.  01:6C42                      
       8.  01:6C42  (01:FFFFFFEF)       TRACK_Instrument		equ 0-17
       9.  01:6C42  (01:FFFFFFF0)       TRACK_Waveform		equ 1-17
      10.  01:6C42  (01:FFFFFFF1)       TRACK_Command		equ 2-17
      11.  01:6C42  (01:FFFFFFF2)       TRACK_MacroPointer	equ 3-17
      12.  01:6C42  (01:FFFFFFF4)       TRACK_MacroStart		equ 5-17
      13.  01:6C42  (01:FFFFFFF6)       TRACK_MacroRestart 	equ 7-17
      14.  01:6C42  (01:FFFFFFF7)       TRACK_Note			equ 8-17
      15.  01:6C42  (01:FFFFFFF8)       TRACK_Volume		equ 9-17
      16.  01:6C42  (01:FFFFFFF9)       TRACK_Flags			equ 10-17
      17.  01:6C42                      	; 0 = note trigger
      18.  01:6C42                      	; 1 = note active
      19.  01:6C42                      	; 4 = morph active		;-< for SCC when 1 then waveform is following morph buffer
      20.  01:6C42                      	; 3 = command trigger
      21.  01:6C42                      	; 2 = envelope trigger
      22.  01:6C42                      	; 5 = instrument trigger
      23.  01:6C42                      	; 6 = waveform trigger
      24.  01:6C42                      	; 7 = PSG/SCC
      25.  01:6C42  (01:FFFFFFFA)       TRACK_empty			equ 11-17		; needed for pushing 0 at note start
      26.  01:6C42  (01:FFFFFFFB)       TRACK_ToneAdd		equ 12-17		; reset after note set
      27.  01:6C42  (01:FFFFFFFD)       TRACK_VolumeAdd		equ 14-17		; reset after note set
      28.  01:6C42  (01:FFFFFFFE)       TRACK_Noise			equ 15-17		; reset after note set
      29.  01:6C42  (01:FFFFFFFF)       TRACK_cmd_VolumeAdd	equ 16-17		; reset after note set
      30.  01:6C42  (01:0000)           TRACK_cmd_ToneSlideAdd	equ 17-17		; reset after note set
      31.  01:6C42  (01:0002)           TRACK_cmd_ToneAdd		equ 19-17		; reset after note set
      32.  01:6C42                      
      33.  01:6C42  (01:0004)           TRACK_cmd_detune		equ 21-17
      34.  01:6C42  (01:0005)           TRACK_cmd_0			equ 22-17
      35.  01:6C42  (01:0006)           TRACK_cmd_1			equ 23-17
      36.  01:6C42  (01:0007)           TRACK_cmd_2			equ 24-17
      37.  01:6C42  (01:0008)           TRACK_cmd_3			equ 25-17
      38.  01:6C42  (01:0009)           TRACK_cmd_4_depth		equ 26-17
      39.  01:6C42  (01:000A)           TRACK_cmd_4_step		equ 27-17
      40.  01:6C42  (01:000B)           TRACK_cmd_NoteAdd		equ 28-17		;x reset after note set
      41.  01:6C42  (01:000C)           TRACK_cmd_A			equ 29-17		
      42.  01:6C42  (01:000D)           TRACK_cmd_B			equ 30-17		
      43.  01:6C42  (01:000E)           TRACK_cmd_E			equ 31-17
      44.  01:6C42  (01:000F)           TRACK_Timer			equ 32-17		; used for timing by all cmd's
      45.  01:6C42  (01:0010)           TRACK_Step			equ 33-17		; only for VIBRATO???
      46.  01:6C42  (01:0011)           TRACK_Delay			equ 34-17		; rows to wait till next data
      47.  01:6C42  (01:0012)           TRACK_prevDelay		equ 35-17
      48.  01:6C42  (01:0013)           TRACK_Retrig		equ 36-17		; rows to retrigger command
      49.  01:6C42  (01:0014)           TRACK_cmd_A_add		equ 37-17	;<< Still in use???
      50.  01:6C42                      
      51.  01:6C42  (01:0026)           TRACK_REC_SIZE		equ 38
      52.  01:6C42                      
      53.  01:6C42                      
      54.  01:6C42  (01:0000)           B_TRGNOT			equ 0			; note trigger
      55.  01:6C42  (01:0001)           B_ACTNOT			equ 1			; note active
      56.  01:6C42  (01:0002)           B_TRGENV			equ 2			; envelope trigger
      57.  01:6C42  (01:0003)           B_TRGCMD			equ 3			; command active
      58.  01:6C42  (01:0004)           B_ACTMOR			equ 4			; morph active
      59.  01:6C42  (01:0005)           B_TRGINS			equ 5			; instrument trigger
      60.  01:6C42  (01:0006)           B_TRGWAV			equ 6			; waveform trigger
      61.  01:6C42  (01:0007)           B_PSGSCC			equ 7			; chip type (PSG or SCC)
      62.  01:6C42                      
      63.  01:6C42                      
      64.  01:6C42  (01:C000)           _SP_Storage			#1			; to store the SP
      65.  01:6C42                      
      66.  01:6C42  (01:C001)           replay_trigger		#1			; trigger byte.
      67.  01:6C42  (01:C002)           replay_mainPSGvol		#2			; volume mixer for PSG SCC balance
      68.  01:6C42  (01:C004)           replay_mainSCCvol		#2			; volume mixer for PSG SCC balance
      69.  01:6C42                      ;replay_songbase:		#2			; pointer to song data
      70.  01:6C42  (01:C006)           replay_wavebase:		#2			; pointer to waveform data
      71.  01:6C42  (01:C008)           replay_insbase:		#2			; pointer to instrument data
      72.  01:6C42  (01:C00A)           replay_orderpointer:	#2			; pointer to the order track list pointers
      73.  01:6C42                      
      74.  01:6C42  (01:C00C)           replay_speed 		#1			; speed to replay (get from song)
      75.  01:6C42  (01:C00D)           replay_speed_subtimer 	#1			; counter for finer speed
      76.  01:6C42  (01:C00E)           replay_speed_timer 	#1 			; counter for speed
      77.  01:6C42  (01:C00F)           replay_mode 		#1			; Replayer status
      78.  01:6C42                      ; mode 0  = no sound output
      79.  01:6C42                      ; mode 1  = replay song 
      80.  01:6C42  (01:C010)           replay_fade			#1			; Fade active (value = fade speed)
      81.  01:6C42  (01:C011)           replay_fade_timer		#1			; Timer for fade
      82.  01:6C42  (01:C012)           replay_fade_vol		#1			; fade volume to lower the channel volume.
      83.  01:6C42                      
      84.  01:6C42                      
      85.  01:6C42  (01:C013)           replay_previous_note	#1			; previous note played
      86.  01:6C42  (01:C014)           replay_mainvol		#2			; the volume correction.
      87.  01:6C42                      
      88.  01:6C42  (01:C016)           replay_vib_table		#2			; pointer to the vibrato table
      89.  01:6C42  (01:C018)           replay_Tonetable		#2			; ToneTable (affected by transpose);
      90.  01:6C42                      
      91.  01:6C42  (01:C01A)           replay_morph_active	#1			; flag to indicate morphing is active
      92.  01:6C42                      ;replay_morph_update	#1			; flag to indicate a new waveform is ready
      93.  01:6C42  (01:C01B)           replay_morph_timer	#1			; step timer between morphs
      94.  01:6C42  (01:C01C)           replay_morph_speed	#1 
      95.  01:6C42  (01:C01D)           replay_morph_counter	#1			; counter till end morph
      96.  01:6C42  (01:C01E)           replay_morph_buffer	#64			; interleaved buffer with morphed waveform and morph delta values
      97.  01:6C42  (01:C05E)           replay_morph_waveform	#1 			; waveform we are morphing to.
      98.  01:6C42                      
      99.  01:6C42                      
     100.  01:6C42  (01:C05F)           TRACK_Chan1			#TRACK_REC_SIZE
     101.  01:6C42  (01:C085)           TRACK_Chan2			#TRACK_REC_SIZE
     102.  01:6C42  (01:C0AB)           TRACK_Chan3			#TRACK_REC_SIZE
     103.  01:6C42  (01:C0D1)           TRACK_Chan4			#TRACK_REC_SIZE
     104.  01:6C42  (01:C0F7)           TRACK_Chan5			#TRACK_REC_SIZE
     105.  01:6C42  (01:C11D)           TRACK_Chan6			#TRACK_REC_SIZE
     106.  01:6C42  (01:C143)           TRACK_Chan7			#TRACK_REC_SIZE
     107.  01:6C42  (01:C169)           TRACK_Chan8			#TRACK_REC_SIZE
     108.  01:6C42                      
     109.  01:6C42  (01:C18F)           TRACK_pointer1		#2
     110.  01:6C42  (01:C191)           TRACK_pointer2		#2
     111.  01:6C42  (01:C193)           TRACK_pointer3		#2
     112.  01:6C42  (01:C195)           TRACK_pointer4		#2
     113.  01:6C42  (01:C197)           TRACK_pointer5		#2
     114.  01:6C42  (01:C199)           TRACK_pointer6		#2
     115.  01:6C42  (01:C19B)           TRACK_pointer7		#2
     116.  01:6C42  (01:C19D)           TRACK_pointer8		#2
     117.  01:6C42                      
     118.  01:6C42                      
     119.  01:6C42                      ;--- AY SPECIFIC
     120.  01:6C42  (01:C19F)           AY_registers		#0 
     121.  01:6C42  (01:C19F)           AY_regToneA 		#2	; Tone A freq low (8bit)
     122.  01:6C42                      					; Tone A freq high (4bit)
     123.  01:6C42  (01:C1A1)           AY_regToneB 		#2	; Tone B freq low
     124.  01:6C42                      					; Tone B freq high
     125.  01:6C42  (01:C1A3)           AY_regToneC 		#2	; Tone C freq low
     126.  01:6C42                      					; Tone C freq high
     127.  01:6C42  (01:C1A5)           AY_regNOISE 		#1	; Noise freq (5bit)
     128.  01:6C42  (01:C1A6)           AY_regMIXER 		#1	;0x38	;x3f	; Mixer control (1 = off, 0 = on)
     129.  01:6C42  (01:C1A7)           AY_regVOLA 			#1	; Chan A volume
     130.  01:6C42  (01:C1A8)           AY_regVOLB 			#1	; Chan B volume
     131.  01:6C42  (01:C1A9)           AY_regVOLC  		#1	; Chan C volume
     132.  01:6C42  (01:C1AA)           AY_regEnvL 			#1	; Volume Env Freq low (8bit)	
     133.  01:6C42  (01:C1AB)           AY_regEnvH 			#1	; Volume Env Freq high (4bit)
     134.  01:6C42  (01:C1AC)           AY_regEnvShape 		#1	; Volume Env Shape (4bit)
     135.  01:6C42                      
     136.  01:6C42                      ;--- SCC SPECIFIC
     137.  01:6C42                      
     138.  01:6C42  (01:C1AD)           _0x9800:	#32			; Waveform data
     139.  01:6C42  (01:C1CD)           _0x9820:	#32
     140.  01:6C42  (01:C1ED)           _0x9840:	#32
     141.  01:6C42  (01:C20D)           _0x9860:	#32
     142.  01:6C42  (01:C22D)           SCC_registers 		#0
     143.  01:6C42  (01:C22D)           SCC_regToneA 		#2	; Tone A freq low (8bit)
     144.  01:6C42                      					; Tone A freq high (4bit)
     145.  01:6C42  (01:C22F)           SCC_regToneB 		#2	; Tone B freq low
     146.  01:6C42                      					; Tone B freq high
     147.  01:6C42  (01:C231)           SCC_regToneC 		#2	; Tone C freq low
     148.  01:6C42                      					; Tone C freq high
     149.  01:6C42  (01:C233)           SCC_regToneD 		#2	; Tone D freq low
     150.  01:6C42                      					; Tone D freq high
     151.  01:6C42  (01:C235)           SCC_regToneE 		#2	; Tone E freq low
     152.  01:6C42                      					; Tone E freq high
     153.  01:6C42  (01:C237)           SCC_regVOLA 		#1	; Chan A volume
     154.  01:6C42  (01:C238)           SCC_regVOLB 		#1	; Chan B volume
     155.  01:6C42  (01:C239)           SCC_regVOLC  		#1	; Chan C volume
     156.  01:6C42  (01:C23A)           SCC_regVOLD 		#1	; Chan D volume
     157.  01:6C42  (01:C23B)           SCC_regVOLE  		#1	; Chan E volume
     158.  01:6C42  (01:C23C)           SCC_regMIXER 		#1	; x3f	; Mixer control (1 = off, 0 = on)
     159.  01:6C42                      
     160.  01:6C42                      
     161.  01:6C42                      ;/// see to remove this.
     162.  01:6C42                      ;-- SCC registers
     163.  01:6C42  (01:C23D)           oldregs:	#(32*4)+(3*5)+1		; a way to int the SCC
     164.  01:6C42                      
     165.  01:6C42                      
     425   01:6C42                      
     426   01:6C42  (01:C2CD)           _levelmap:			#mapWidth*mapHeight
     427   01:6C42                      
     428   01:6C42  (01:CDCD)           _cur_level_bf:		#mapWidth*mapHeight/2
     429   01:6C42                      ram_sat:
     430   01:6C42  (01:D34D)           _sat				#4*32
     431   01:6C42                      
     432   01:6C42                      ; enemylist:			#enemy*nenemies
     433   01:6C42                      
     434   01:6C42  (01:D3CD)           slotvar				#1
     435   01:6C42  (01:D3CE)           slotram				#1
     436   01:6C42  (01:D3CF)           SEL_NTSC			#1
     437   01:6C42                      
     438   01:6C42  (01:D3D0)           joystick			#1
     439   01:6C42                      
     440   01:6C42  (01:D3D1)           _mcx				#2	; relative with in the frame on the screen
     441   01:6C42  (01:D3D3)           _mcy				#2
     442   01:6C42                      
     443   01:6C42  (01:D3D5)           _mclx				#2	; absolute with the level in ram
     444   01:6C42  (01:D3D7)           _mcly				#2
     445   01:6C42                      
     446   01:6C42  (01:D3D9)           _mcframe			#1
     447   01:6C42  (01:D3DA)           _mcstate			#1
     448   01:6C42                      
     449   01:6C42  (01:D3DB)           _mcdx				#2
     450   01:6C42  (01:D3DD)           _mcdy				#2
     451   01:6C42                      
     452   01:6C42  (01:D3DF)           _mcprobe:			#1
     453   01:6C42  (01:D3E0)           _mcprobeb:			#1
     454   01:6C42                      
     455   01:6C42  (01:D3E1)           _ticxframe			#1
     456   01:6C42                      
     457   01:6C42  (01:D3E2)           _buffer:			#16
     458   01:6C42  (01:D3F2)           _fps:				#2
     459   01:6C42  (01:D3F4)           _nframes:			#2
     460   01:6C42  (01:D3F6)           _vbit16:			#2
     461   01:6C42                      
     462   01:6C42  (01:D3F8)           _ymappos:			#1
     463   01:6C42  (01:D3F9)           _xmappos:			#2
     464   01:6C42  (01:D3FB)           _levelmap_pos:		#2
     465   01:6C42                      
     466   01:6C42  (01:D3FD)           _shadowbuff:		#2
     467   01:6C42  (01:D3FF)           _currentpage:		#1
     468   01:6C42                      
     469   01:6C42  (01:D400)           _displaypage:		#1
     470   01:6C42  (01:D401)           _direction:			#1
     471   01:6C42  (01:D402)           _old_direction:		#1
     472   01:6C42  (01:D403)           _xoffset:			#1
     473   01:6C42  (01:D404)           _yoffset:			#1
     474   01:6C42                      
     475   01:6C42  (01:D405)           randSeed:			#2
     476   01:6C42  (01:D407)           cur_level:			#1
     477   01:6C42  (01:D408)           wave_count:			#1
     478   01:6C42  (01:D409)           landing_permission:	#1
     479   01:6C42  (01:D40A)           assault_wave_timer:	#2
     480   01:6C42  (01:D40C)           bullet_rate:		#1
     481   01:6C42  (01:D40D)           dxmap:				#1
     482   01:6C42  (01:D40E)           xmap:				#2
     483   01:6C42  (01:D410)           yship:				#1
     484   01:6C42  (01:D411)           xship:				#2
     485   01:6C42  (01:D413)           aniframe:			#1
     486   01:6C42  (01:D414)           ms_state:			#1
     487   01:6C42  (01:D415)           god_mode:			#1
     488   01:6C42                      
     489   01:6C42                      	struct enemy_data
     490   01:6C42                    < y				db	0
     491   01:6C42                    < x				dw	0
     492   01:6C42                    < xoff			db	0
     493   01:6C42                    < yoff			db	0
     494   01:6C42                    < xsize			db	0
     495   01:6C42                    < ysize			db	0
     496   01:6C42                    < status			db	0	; B7 == DWN/UP | B6 == RIGHT/LEFT | B0 == Inactive/Active
     497   01:6C42                    < cntr			db	0
     498   01:6C42                    < kind			db	0
     499   01:6C42                    < frame			db	0
     500   01:6C42                    < color			db	0
     501   01:6C42                    < speed			dw	0
     502   01:6C42                    < 	ends
     503   01:6C42                      	
     504   01:6C42                      ; [max_enem]			enemy_data
     505   01:6C42                      ; [max_bullets]		enemy_data
     506   01:6C42                      ; [max_enem_bullets]	enemy_data
     507   01:6C42                      
     508   01:6C42  (01:D416)           enemies:		#	enemy_data*max_enem
     509   01:6C42  (01:D486)           ms_bullets:		#	enemy_data*max_bullets
     510   01:6C42  (01:D4A2)           enem_bullets:	#	enemy_data*max_enem_bullets
     511   01:6C42                      
     512   01:6C42                      ; _shadow0:			#32*24*2
     513   01:6C42                      ; _shadow1:			#32*24*2
     514   01:6C42                      
     515   01:6C42  (0000)              	ENDMAP

    LABELS
-------------------------------------------------
00:00005000   _kBank1
00:00007000   _kBank2
00:00009000   _kBank3
00:0000B000   _kBank4
00:00000100   mapWidth
00:0000000B   mapHeight
00:000000A0   YSIZE
00:00000024 X ENASLT
00:00000138   RSLREG
00:0000FCC1   EXPTBL
00:00004010   search_slot
00:0000402F   search_slotram
00:00004050   search_slotram0
00:00004055 X setrompage0
00:0000405B   setrampage0
00:00004061   setrompage2
00:00004067 X setrampage2
00:0000406D X setrompage3
00:00004073 X setrampage3
00:00004079 X recbios
00:0000407C   setslotpage0
00:000040B3 X setslotpage1
00:000040F2   setslotpage2
00:00004139   setslotpage3
00:00004178   _cls
00:00000099   vdpport1
00:0000009A   vdpport2
00:00004196   levelcolors
00:00004196 X _SetPalet
00:000041A8   _vdpsetvramwr
00:000041B9 X _vdpsetvramwr14
00:000041C2   _vdpsetvramrd
00:000041DC   _setpage
00:0000005F   chgmod
00:0000000C X RDSLT
00:00000156 X KILBUF
00:000041ED   set_scr
00:00004238   _waitvdp
00:0000000C X rdslt
00:0000001C X CALSLT
00:00000180   chgcpu
00:0000FCC1 X exttbl
00:00004250 X _set_r800
00:00004271   set_turbo_tr
00:0000F3DF   RG0SAV
00:0000F3E0   RG1SAV
00:0000F3E6 X RG7SAV
00:0000F3E7   RG8SAV
00:0000FC9E   _jiffy
00:00004279   _isrinit
00:0000429D X _intreset
00:000042AE   _scroll
00:000042CE   lint
00:00004347   lint.exit
00:00004365   vblank
00:000043AD   checkkbd
00:000043B8   _hw_sprite_init
00:0000440B   _rom_sat
00:00000040 S counter
00:0000448B   __sat_update
00:000044A9   START
00:000044B6   _ntsc
00:0000456E   main_loop
00:00004592   main_loop.nomove
00:000045AB   test_move_right
00:000045B6   test_move_left
00:000045C2   _dw
00:000045CD   _up
00:00000000   border_color
00:000045D6   inc_xoffset
00:000045E2 X inc_xoffset.case0
00:000045F1   inc_xoffset.case1_15
00:000045FC   inc_xoffset.cont
00:00004616   dec_xoffset
00:00004623 X dec_xoffset.case15
00:00004632   dec_xoffset.case0_14
00:0000463D   dec_xoffset.cont
00:00004659   AFXPLAY
00:0000465A X _vuitpakker
00:00004692   _literal
00:00004697   __loop
00:000046A0 X _getlen
00:000046A6   lus
00:000046C3   lenok
00:000046D0   _mode7
00:000046D6   _mode6
00:000046DC   _mode5
00:000046E2   _mode4
00:000046E8   _mode3
00:000046EE   _mode2
00:000046FE   offsok
00:00004709   _loop
00:0000471F   _getbit
00:00004723   _getbitexx
00:00004729   Depack_out
00:0000472B   setVwrite
00:00004737   setVread
00:00004745   __modes
00:00004753   _print_probe
00:00004798   _print_fps
00:000047B5   _compute_fps
00:000047BC   int2ascii
00:000047BF X Num2asc
00:000047D8   Num1
00:000047DA   Num2
00:000047E3   blank_line_rgt
00:000047E8   blank_line_lft
00:000047EA   blank_line
00:0000481E   plot_line_lft
00:00004826   plot_line_rgt
00:0000482F   plot_line
00:0000488A   plot_tile
00:000048D6   init_page0
00:00004904 X init_page1
00:00004932   clrboder
00:00004963   move_block
00:00000000 X ms_fly__right
00:00000001 X ms_spin_face_right
00:00000002 X ms_side_dwn_face_right
00:00000003 X ms_side_up__face_right
00:00000004 X ms_fly__left
00:00000005 X ms_spin_face_left
00:00000006 X ms_side_dwn_face_left
00:00000007 X ms_side_up__face_left
00:00000008   ms_loop_right2left
00:00000009   ms_loop_left2right
00:0000000A X ms_explode
00:0000000B X ms_landing
00:0000000C X ms_reset
00:00000010 X maxspeed
00:00000008   max_enem
00:00000003   max_enem_bullets
00:00000002   max_bullets
00:000000B4   assault_wave_timer_preset
00:00000002   enemy_bullet_speed
00:00000078 X xship_rel
00:000049A3   ms_ani
00:000049A3 X ms_demo_ani
00:000049F3   ms_col_win
00:000049F3 X ms_demo_coll_wind
00:00004A93   set_size
00:00004A93   set_size2
00:00004A94   add_bc_score_bin
00:00004A95   test_collision_msbullets
00:00004A96   CollisionCheck_8b
00:00004A97   CalcCollision
00:00004A98   test_collision_enemy_bullets
00:00004A99 X rand8_init
00:00004AA2   rand8
00:00004AAF   land_now_test
00:00004ACD X npc_init
00:00004AF7 X bull_init
00:00004B34 X wave_timer
00:00004C00   spritecolors
00:00004C08   wave0
00:00004C08   wave1
00:00004C29 X wave1.neg
00:00004C35   wave1.pos
00:00004C91   wave1.next
00:00004C98   wave2
00:00004CC3 X wave2.neg
00:00004CD1   wave2.pos
00:00004D27   wave2.next
00:00004D2E   wave3
00:00004D46 X wave3.neg
00:00004D51   wave3.pos
00:00004DAE   wave3.next
00:00004DB5   wave4
00:00004DE0 X wave4.neg
00:00004DEE   wave4.pos
00:00004E44   wave4.next
00:00004E4B   wave5
00:00004E61 X wave5.neg
00:00004E6B   wave5.pos
00:00004EBD   wave5.next
00:00004EC4   wave6
00:00004EEF X wave6.neg
00:00004EFE   wave6.pos
00:00004F5F   wave6.next
00:00004F66   wave7
00:00004F7C X wave7.neg
00:00004F86   wave7.pos
00:00004FD8   wave7.next
00:00004FDF X npc_loop
00:0000500F   next
00:00005018   npcdies
00:0000503F   enemy255
00:00005063   enemy0
00:00005063 X enemy1
00:00005069 X enemy1.go_left
00:0000508C   enemy1.go_right
00:000050BE   enemy2
00:000050BE X enemy3
00:000050D7 X enemy3.go_left
00:000050ED   enemy3.go_right
00:00005112   enemy4
00:0000512B X enemy4.go_left
00:00005141   enemy4.go_right
00:0000515E X enemy4.go_up
00:00005169   enemy4.go_dwn
00:00005200   rotation
00:00005208   rotate
00:00005300   sinewave
00:00005340   enemy5
00:00005359 X enemy5.go_left
00:0000536F   enemy5.go_right
00:000053A6   enemy6
00:000053BF X enemy6.go_left
00:000053DD   enemy6.go_right
00:00005405 X enemy6.go_up
00:00005410   enemy6.go_dwn
00:0000542D   enemy7
00:00005446 X enemy7.go_left
00:00005464   enemy7.go_right
00:0000548C X enemy7.go_up
00:00005497   enemy7.go_dwn
00:000054B4   book_enemy_shoot
00:000054FB   book_enemy_shoot.activate_this
00:00005501 X book_enemy_shoot.shootdx
00:00005510   book_enemy_shoot.shootsx
00:00005546 X enemy_bullet_loop
00:00005630   test_obstacles.found
02:00008000   _scorebar
04:0000A000   _tiles0
0F:0000A000   _level
0F:0000AB00   sprtdata
0E:00008000   demo_song
0E:00000045   demo_song.restart
0E:00000109   demo_song.waveform_start
0E:00000329   demo_song.instrument_start
0E:0000035B   demo_song.ins_1
0E:0000036B   demo_song.rst_i1
0E:00000370   demo_song.ins_2
0E:00000399   demo_song.rst_i2
0E:0000039B   demo_song.ins_3
0E:000003A1   demo_song.rst_i3
0E:000003A3   demo_song.ins_4
0E:000003A3   demo_song.ins_5
0E:000003A3   demo_song.ins_6
0E:000003AD   demo_song.rst_i6
0E:000003B4   demo_song.ins_7
0E:000003BA   demo_song.rst_i7
0E:000003BC   demo_song.ins_8
0E:000003CE   demo_song.rst_i8
0E:000003D0   demo_song.ins_9
0E:000003D0   demo_song.ins_10
0E:000003F8   demo_song.rst_i10
0E:000003FA   demo_song.ins_11
0E:000003FA   demo_song.ins_12
0E:000003FA   demo_song.ins_13
0E:00000414   demo_song.rst_i13
0E:00000416   demo_song.ins_14
0E:00000428   demo_song.rst_i14
0E:0000042A   demo_song.ins_15
0E:00000452   demo_song.rst_i15
0E:00000454   demo_song.ins_16
0E:00000466   demo_song.rst_i16
0E:00000468   demo_song.ins_17
0E:00000468   demo_song.ins_18
0E:0000047C   demo_song.rst_i18
0E:0000047E   demo_song.ins_19
0E:00000490   demo_song.rst_i19
0E:00000492   demo_song.ins_20
0E:00000492   demo_song.ins_21
0E:0000049C   demo_song.rst_i21
0E:000004A3   demo_song.ins_22
0E:000004CB   demo_song.rst_i22
0E:000004CD   demo_song.ins_23
0E:000004CD   demo_song.ins_24
0E:000004CD   demo_song.ins_25
0E:000004F5   demo_song.rst_i25
0E:000004F7   demo_song.track_0
0E:0000055A   demo_song.track_1
0E:0000059E   demo_song.track_2
0E:000005DD   demo_song.track_3
0E:000005DF   demo_song.track_4
0E:00000641   demo_song.track_5
0E:00000685   demo_song.track_6
0E:000006C2   demo_song.track_7
0E:000006F4   demo_song.track_8
0E:00000716   demo_song.track_9
0E:00000735   demo_song.track_10
0E:00000737   demo_song.track_11
0E:00000768   demo_song.track_12
0E:000007AD   demo_song.track_13
0E:000007F0   demo_song.track_14
0E:00000800   demo_song.track_15
0E:00000810   demo_song.track_16
0E:0000081A   demo_song.track_17
0E:00000855   demo_song.track_18
0E:000008A5   demo_song.track_19
0E:000008EC   demo_song.track_20
0E:00000930   demo_song.track_21
0E:0000093C   demo_song.track_22
0E:00000977   demo_song.track_23
0E:000009CB   demo_song.track_24
0E:00000A09   demo_song.track_25
0E:00000A52   demo_song.track_26
0E:00000A71   demo_song.track_27
0E:00000A8C   demo_song.track_28
0E:00000AB1   demo_song.track_29
0E:00000ADA   demo_song.track_30
0E:00000AFD   demo_song.track_31
0E:00000B28   demo_song.track_32
0E:00000B4C   demo_song.track_33
0E:00000B60   demo_song.track_34
0E:00000B8F   demo_song.track_35
0E:00000BB8   demo_song.track_36
0E:00000BFB   demo_song.track_37
0E:00000C24   demo_song.track_38
0E:00000C53   demo_song.track_39
0E:00000C6A   demo_song.track_40
0E:00000CAE   demo_song.track_41
0E:00000CD6 X demo_song.track_42
0E:00000CDB   demo_song.track_43
0E:00000CDF X demo_song.track_44
0E:00000D60   _VOLUME_TABLE
0E:00000D40   C_PER
0E:00000C80   C1_PER
0E:00000BC0   D_PER
0E:00000B20   D1_PER
0E:00000A80   E_PER
0E:000009E0   F_PER
0E:00000940   F1_PER
0E:000008C0   G_PER
0E:00000840   G1_PER
0E:000007E0   A_PER
0E:00000760   A1_PER
0E:00000700   B_PER
0E:00000E60   TRACK_ToneTable
0E:00000F20   TRACK_Vibrato_sine
0E:00000F40   TRACK_Vibrato_triangle
0E:00000F60   TRACK_Vibrato_pulse
0E:00000F80   end_demo_song
01:00006000   replay_init
01:0000600F   replay_pause
01:00006024   _replay_pause_r
01:0000602A X replay_fade_out
01:00006035 X replay_transpose
01:0000603E   replay_set_SCC_balance
01:00006045   replay_set_PSG_balance
01:0000604C   _getnewbalancebase
01:0000605A   replay_loadsong
01:0000606C   replay_loadsong.nwu
01:00006079   replay_loadsong.niu
01:0000611F   _replay_check_patternend
01:00006143   _replay_check_patternend.no_restart
01:00006151   replay_play
01:0000616D X replay_decodedata
01:00006190   replay_decodedata.decode2
01:000061B3   replay_decodedata.decode3
01:000061D6   replay_decodedata.decode4
01:000061F9   replay_decodedata.decode5
01:0000621C   replay_decodedata.decode6
01:0000623F   replay_decodedata.decode7
01:00006262   replay_decodedata.decode8
01:00006285   replay_decodedata.decode_end
01:00006285   replay_decodedata_NO
01:00006387   replay_decodedata_NO.cont_fadeing
01:0000638D   replay_decodedata_NO.no_new_step
01:000063A1   replay_decodedata_NO.calc_vol
01:000063A7   replay_decodedata_NO.no_carry
01:000063AC   replay_decode_chan
01:000063B9   replay_decode_chan.skip_retrig_reset
01:000063C2   _rdn2
01:000063C7   _rdv2
01:000063CC   _rdi2
01:000063D4   _rdn
01:000063DC   _rdi
01:000063E4   _rdv
01:000063EC   _rdc
01:000063F6   _rd_delay
01:000063FD   _replay_decode_note
01:00006409   _replay_decode_rest
01:00006412   _replay_decode_ins
01:00006429   _replay_decode_ins.skip
01:0000644B   _replay_decode_ins.skip_ins
01:00006450   _replay_decode_vol
01:00006465   _replay_decode_delay
01:00006472   _replay_decode_cmd
01:00006481   _replay_decode_cmd.skip
01:00006488   DECODE_CMDLIST
01:000064DA   _CHIPcmd0_arpeggio
01:000064E6   _CHIPcmd1_port_up
01:000064EE   _CHIPcmd2_port_down
01:000064F6   _CHIPcmd3_RE_port_tone
01:000064FC   _CHIPcmd3_port_tone
01:00006503   _CHIPcmd3_port_tone_cont
01:0000651A   _CHIPcmd3_port_tone_cont.skip
01:00006532   _CHIPcmd3_port_tone_cont.skip2
01:00006546   _CHIPcmd4_vibrato
01:00006560   _CHIPcmd5_vibrato_port_tone
01:00006560   _CHIPcmd6_vibrato_vol
01:00006560   _CHIPcmd7_vol_slide
01:0000656C   _CHIPcmd8_macro_offset
01:0000656F   _CHIPcmd9_env_shape
01:00006577   _CHIPcmdA_env_mul
01:0000658C   _CHIPcmdB_wave_res
01:00006594   _CHIPcmdC_wave_duty
01:00006594   _CHIPcmdD_wave_cut
01:00006594   _CHIPcmdE_wave_compr
01:0000659E   _CHIPcmdF_wave_set
01:000065A8   _CHIPcmd10_morph_slave
01:000065AE   _CHIPcmd11_morph_start
01:000065C9   _CHIPcmd11_morph_start.loop
01:000065D7   _CHIPcmd12_morph_cont
01:000065EE   _CHIPcmd13_short_arp
01:000065FA   _CHIPcmd14_fine_up
01:000065FA   _CHIPcmd15_fine_down
01:00006606   _CHIPcmd16_vib_ctrl
01:00006611 X _cmd16_pulse
01:0000661A   _cmd16_tri
01:00006623   _cmd16_sine
01:0000662C   _CHIPcmd17_track_detune
01:00006641   _CHIPcmd17_track_detune.pos
01:0000664B   _CHIPcmd18_transpose
01:0000665F   _CHIPcmd18_transpose.skip1
01:00006665   _CHIPcmd18_transpose.pos
01:0000666B   _CHIPcmd18_transpose.skip2
01:00006671   _CHIPcmdXX_note_cut
01:0000667A   _CHIPcmd19_note_delay
01:00006698   _CHIPcmd1A_trigger
01:0000669E   _CHIPcmd1B_speed
01:000066B1   _CHIPcmd1C_notelink
01:000066B7 X _CHIPcmd1C_call
01:000066B7   _CHIPcmd1D_ret
01:000066BB   _CHIPcmd0_RE_arpeggio
01:000066BF   _CHIPcmd1_RE_port_up
01:000066BF   _CHIPcmd2_RE_port_down
01:000066BF   _CHIPcmd4_RE_vibrato
01:000066C7   _CHIPcmd5_RE_vibrato_port_tone
01:000066C7   _CHIPcmd6_RE_vibrato_vol
01:000066C7   _CHIPcmd7_RE_vol_slide
01:000066D3   _CHIPcmd8_RE_macro_offset
01:000066DF   _CHIPcmd9_RE_env_shape
01:000066E7   replay_process_chan_AY
01:000066FE   replay_process_chan_AY.skip
01:00006703   _pcAY_noCommand
01:00006703   _pcAY_commandEND
01:00006708 X _pcAY_triggerNote
01:0000672C   _pcAY_noNoteTrigger
01:00006750   _vol_change
01:00006757 X _vol_rel
01:00006769   _vol_rel.skip
01:0000676A   _vol_base
01:0000677A   _noEnv
01:00006785 X _noEnv.add_Vadd
01:0000678F   _noEnv.sub_Vadd
01:0000679B   _noEnv.skip2
01:0000679B   _Vadd
01:000067A5   _Vadd.skip
01:000067AF   _Vadd.skip2
01:000067B4   _noVolume
01:000067D5   _noVolume.skip
01:000067DB   _noNoise
01:000067E8   _pcAY_noTone
01:000067FE   _pcAY_noTone.skip
01:00006805   _pcAY_noToneAdd
01:00006815   _pcAY_noToneAdd.skip
01:0000683C   _pcAY_noToneAdd.skip2
01:00006843   _pcAY_noNoteActive
01:00006848   _pcAY_cmdlist
01:0000687E   _pcAY_cmd0_arpeggio
01:0000689A   _pcAY_cmd0_arpeggio.step2
01:000068AE   _pcAY_cmd0_arpeggio.step3
01:000068B5   _pcAY_cmd1_port_up
01:000068C9   _pcAY_cmd2_port_down
01:000068DD   _pcAY_cmd3_port_tone
01:000068EB X _pcAY_cmd3_add
01:000068FE   _pcAY_cmd3_sub
01:00006911   _pcAY_cmd3_stop
01:0000691E   _pcAY_cmd4_vibrato
01:00006939   _pcAY_cmd4_vibrato.skip
01:0000693D   _pcAY_cmd4_vibrato.loop
01:00006950   _pcAY_cmd4pos
01:00006956   _pcAY_cmd4pos.skip
01:0000695A   _pcAY_cmd4pos.loop
01:0000695E   _pcAY_cmd4_zero
01:00006968   _pcAY_cmd5_vibrato_port_tone
01:0000696E   _pcAY_cmd6_vibrato_vol
01:00006974   _pcAY_cmd7_vol_slide
01:0000697A   _pcAY_cmdasub
01:0000698F X _pcAY_cmda_dec
01:00006998   _pcAY_cmda_inc
01:000069A1   _pcAY_cmd8_macro_offset
01:000069AC   _pcAY_cmdc_wave_duty
01:000069BE   _pcAY_cmdc_wave_duty.skip
01:000069C7   _wspw_loop_h
01:000069D2   _wspw_loop_l
01:000069D9   _pcAY_cmdd_wave_cut
01:000069ED   _pcAY_cmdd_wave_cut.skip
01:00006A13   _wsc_l
01:00006A1A   _pcAY_cmde_wave_compr
01:00006A2E   _pcAY_cmde_wave_compr.skip
01:00006A4C   _wcomp_loop
01:00006A5E   _wcomp_loop.skip
01:00006A60   _wcomp_loop.loop
01:00006A69   _pcAY_cmd13_short_arp
01:00006A7A   _pcAY_cmd14_fine_up
01:00006A94   _pcAY_cmd15_fine_down
01:00006AAE   _pcAY_cmdXX_note_cut
01:00006ABB   _pcAY_cmd19_note_delay
01:00006ACE   replay_route
01:00006AD5   _comp_loop
01:00006AEE   _ptAY_loop
01:00006B06   _ptAY_noEnv
01:00006B1E   _ptAY_noEnv.skip
01:00006B31   _ptAY_noEnv.skip2
01:00006B44   _ptAY_noEnv.skip3
01:00006B57   _ptAY_noEnv.skip4
01:00006B57   scc_reg_update
01:00006B67   loop
01:00006B6E   loop.skip
01:00006B76   _write_SCC_wave
01:00006B8E   _write_SCC_special
01:00006B93   _wss_l
01:00006B9B   replay_process_morph
01:00006BA8   replay_process_morph.loop
01:00006BAF   replay_process_morph.skip
01:00006BCE   replay_process_morph.skip2
01:00006BD4   replay_process_morph.skip3
01:00006BD6   _rpm_loop
01:00006BE3 X _rpm_larger
01:00006BF1   _rpm_smaller
01:00006C01   _rpm_next_step
01:00006C16   _rpm_next_step.skip
01:00006C1C   _rpm_ns_loop
01:00006C22 X _rmp_ns_sub
01:00006C29   _rmp_ns_sub.skip
01:00006C34   _rmp_ns_add
01:00006C39   _rmp_ns_add.skip
01:00006C42 X FINISH
01:00000040   musbuff
01:FFFFFFEF   TRACK_Instrument
01:FFFFFFF0   TRACK_Waveform
01:FFFFFFF1   TRACK_Command
01:FFFFFFF2   TRACK_MacroPointer
01:FFFFFFF4   TRACK_MacroStart
01:FFFFFFF6   TRACK_MacroRestart
01:FFFFFFF7   TRACK_Note
01:FFFFFFF8   TRACK_Volume
01:FFFFFFF9   TRACK_Flags
01:FFFFFFFA X TRACK_empty
01:FFFFFFFB   TRACK_ToneAdd
01:FFFFFFFD   TRACK_VolumeAdd
01:FFFFFFFE   TRACK_Noise
01:FFFFFFFF   TRACK_cmd_VolumeAdd
01:00000000   TRACK_cmd_ToneSlideAdd
01:00000002   TRACK_cmd_ToneAdd
01:00000004   TRACK_cmd_detune
01:00000005   TRACK_cmd_0
01:00000006   TRACK_cmd_1
01:00000007   TRACK_cmd_2
01:00000008   TRACK_cmd_3
01:00000009   TRACK_cmd_4_depth
01:0000000A   TRACK_cmd_4_step
01:0000000B   TRACK_cmd_NoteAdd
01:0000000C   TRACK_cmd_A
01:0000000D   TRACK_cmd_B
01:0000000E   TRACK_cmd_E
01:0000000F   TRACK_Timer
01:00000010   TRACK_Step
01:00000011   TRACK_Delay
01:00000012   TRACK_prevDelay
01:00000013   TRACK_Retrig
01:00000014 X TRACK_cmd_A_add
01:00000026   TRACK_REC_SIZE
01:00000000   B_TRGNOT
01:00000001   B_ACTNOT
01:00000002   B_TRGENV
01:00000003   B_TRGCMD
01:00000004   B_ACTMOR
01:00000005 X B_TRGINS
01:00000006   B_TRGWAV
01:00000007   B_PSGSCC
01:0000C000   _SP_Storage
01:0000C001   replay_trigger
01:0000C002   replay_mainPSGvol
01:0000C004   replay_mainSCCvol
01:0000C006   replay_wavebase
01:0000C008   replay_insbase
01:0000C00A   replay_orderpointer
01:0000C00C   replay_speed
01:0000C00D   replay_speed_subtimer
01:0000C00E   replay_speed_timer
01:0000C00F   replay_mode
01:0000C010   replay_fade
01:0000C011   replay_fade_timer
01:0000C012   replay_fade_vol
01:0000C013   replay_previous_note
01:0000C014   replay_mainvol
01:0000C016   replay_vib_table
01:0000C018   replay_Tonetable
01:0000C01A   replay_morph_active
01:0000C01B   replay_morph_timer
01:0000C01C   replay_morph_speed
01:0000C01D   replay_morph_counter
01:0000C01E   replay_morph_buffer
01:0000C05E   replay_morph_waveform
01:0000C05F   TRACK_Chan1
01:0000C085   TRACK_Chan2
01:0000C0AB   TRACK_Chan3
01:0000C0D1   TRACK_Chan4
01:0000C0F7   TRACK_Chan5
01:0000C11D   TRACK_Chan6
01:0000C143   TRACK_Chan7
01:0000C169   TRACK_Chan8
01:0000C18F   TRACK_pointer1
01:0000C191   TRACK_pointer2
01:0000C193   TRACK_pointer3
01:0000C195   TRACK_pointer4
01:0000C197   TRACK_pointer5
01:0000C199   TRACK_pointer6
01:0000C19B   TRACK_pointer7
01:0000C19D   TRACK_pointer8
01:0000C19F   AY_registers
01:0000C19F   AY_regToneA
01:0000C1A1   AY_regToneB
01:0000C1A3   AY_regToneC
01:0000C1A5   AY_regNOISE
01:0000C1A6   AY_regMIXER
01:0000C1A7   AY_regVOLA
01:0000C1A8   AY_regVOLB
01:0000C1A9   AY_regVOLC
01:0000C1AA   AY_regEnvL
01:0000C1AB   AY_regEnvH
01:0000C1AC   AY_regEnvShape
01:0000C1AD   _0x9800
01:0000C1CD X _0x9820
01:0000C1ED X _0x9840
01:0000C20D X _0x9860
01:0000C22D   SCC_registers
01:0000C22D   SCC_regToneA
01:0000C22F   SCC_regToneB
01:0000C231   SCC_regToneC
01:0000C233   SCC_regToneD
01:0000C235   SCC_regToneE
01:0000C237   SCC_regVOLA
01:0000C238   SCC_regVOLB
01:0000C239   SCC_regVOLC
01:0000C23A   SCC_regVOLD
01:0000C23B   SCC_regVOLE
01:0000C23C   SCC_regMIXER
01:0000C23D   oldregs
01:0000C2CD   _levelmap
01:0000CDCD X _cur_level_bf
01:00006C42 X ram_sat
01:0000D34D   _sat
01:0000D3CD   slotvar
01:0000D3CE   slotram
01:0000D3CF   SEL_NTSC
01:0000D3D0 X joystick
01:0000D3D1 X _mcx
01:0000D3D3 X _mcy
01:0000D3D5 X _mclx
01:0000D3D7 X _mcly
01:0000D3D9   _mcframe
01:0000D3DA X _mcstate
01:0000D3DB   _mcdx
01:0000D3DD X _mcdy
01:0000D3DF X _mcprobe
01:0000D3E0   _mcprobeb
01:0000D3E1   _ticxframe
01:0000D3E2   _buffer
01:0000D3F2   _fps
01:0000D3F4   _nframes
01:0000D3F6   _vbit16
01:0000D3F8   _ymappos
01:0000D3F9   _xmappos
01:0000D3FB   _levelmap_pos
01:0000D3FD X _shadowbuff
01:0000D3FF   _currentpage
01:0000D400   _displaypage
01:0000D401   _direction
01:0000D402 X _old_direction
01:0000D403   _xoffset
01:0000D404   _yoffset
01:0000D405   randSeed
01:0000D407   cur_level
01:0000D408   wave_count
01:0000D409   landing_permission
01:0000D40A   assault_wave_timer
01:0000D40C   bullet_rate
01:0000D40D   dxmap
01:0000D40E   xmap
01:0000D410   yship
01:0000D411 X xship
01:0000D413   aniframe
01:0000D414   ms_state
01:0000D415   god_mode
00:00000000   enemy_data.y
00:00000001   enemy_data.x
00:00000003   enemy_data.xoff
00:00000004 X enemy_data.yoff
00:00000005   enemy_data.xsize
00:00000006 X enemy_data.ysize
00:00000007   enemy_data.status
00:00000008   enemy_data.cntr
00:00000009   enemy_data.kind
00:0000000A   enemy_data.frame
00:0000000B   enemy_data.color
00:0000000C   enemy_data.speed
00:0000000E   enemy_data
01:0000D416   enemies
01:0000D486   ms_bullets
01:0000D4A2   enem_bullets


 Output: main.out
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: *  Used: 00000000

    No output

 Output: urd_scr8.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00002000  Used: 00001631

   Address   Length Align   Label
   00004000    5681         search_slot
   00005631    2511       <empty>

 Page: 01
  Org: 00006000  Size: 00002000  Used: 00000C42

   Address   Length Align   Label
   00006000    3138         replay_init
   00006C42    5054       <empty>

 Page: 02
  Org: 00008000  Size: 00002000  Used: 00001800

   Address   Length Align   Label
   00008000    6144         _scorebar
   00009800    2048       <empty>

 Page: 03
  Org: 0000A000  Size: 00002000  Used: 00000000

   0000A000    8192       <empty>

 Page: 04
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         _tiles0

 Page: 05
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 06
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 07
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 08
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 09
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 0A
  Org: 0000A000  Size: 00002000  Used: 00002000

   Address   Length Align   Label
   0000A000    8192         

 Page: 0B
  Org: 0000A000  Size: 00002000  Used: 00001900

   Address   Length Align   Label
   0000A000    6400         
   0000B900    1792       <empty>

 Page: 0C
  Org: 00004000  Size: 00002000  Used: 00000000

   00004000    8192       <empty>

 Page: 0D
  Org: 00006000  Size: 00002000  Used: 00000000

   00006000    8192       <empty>

 Page: 0E
  Org: 00008000  Size: 00002000  Used: 00000F40

   Address   Length Align   Label
   00008000    3904         demo_song
   00008F40    4288       <empty>

 Page: 0F
  Org: 0000A000  Size: 00002000  Used: 00001300

   Address   Length Align   Label
   0000A000    2816         _level
   0000AB00    2048         sprtdata
   0000B300    3328       <empty>
